import{g as Do,r as F,R as Pe,a as xs,j as T}from"./main-DYrGVUc3.js";import{u as Ps,y as Cs,L as Ss}from"./index-CszUP6Ok.js";import{a as Ms}from"./index-Dq7h7Pqt.js";var fo=63710088e-1;function Ro(i,u,r={}){const l={type:"Feature"};return(r.id===0||r.id)&&(l.id=r.id),r.bbox&&(l.bbox=r.bbox),l.properties=u||{},l.geometry=i,l}function bs(i,u,r={}){if(!i)throw new Error("coordinates is required");if(!Array.isArray(i))throw new Error("coordinates must be an Array");if(i.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!po(i[0])||!po(i[1]))throw new Error("coordinates must contain numbers");return Ro({type:"Point",coordinates:i},u,r)}function Ts(i,u,r={}){for(const n of i){if(n.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(n[n.length-1].length!==n[0].length)throw new Error("First and last Position are not equivalent.");for(let s=0;s<n[n.length-1].length;s++)if(n[n.length-1][s]!==n[0][s])throw new Error("First and last Position are not equivalent.")}return Ro({type:"Polygon",coordinates:i},u,r)}function po(i){return!isNaN(i)&&i!==null&&!Array.isArray(i)}function Oo(i,u,r){if(i!==null)for(var l,n,s,c,f,p,g,m=0,w=0,x,P=i.type,M=P==="FeatureCollection",S=P==="Feature",O=M?i.features.length:1,E=0;E<O;E++){g=M?i.features[E].geometry:S?i.geometry:i,x=g?g.type==="GeometryCollection":!1,f=x?g.geometries.length:1;for(var V=0;V<f;V++){var D=0,J=0;if(c=x?g.geometries[V]:g,c!==null){p=c.coordinates;var Y=c.type;switch(m=Y==="Polygon"||Y==="MultiPolygon"?1:0,Y){case null:break;case"Point":if(u(p,w,E,D,J)===!1)return!1;w++,D++;break;case"LineString":case"MultiPoint":for(l=0;l<p.length;l++){if(u(p[l],w,E,D,J)===!1)return!1;w++,Y==="MultiPoint"&&D++}Y==="LineString"&&D++;break;case"Polygon":case"MultiLineString":for(l=0;l<p.length;l++){for(n=0;n<p[l].length-m;n++){if(u(p[l][n],w,E,D,J)===!1)return!1;w++}Y==="MultiLineString"&&D++,Y==="Polygon"&&J++}Y==="Polygon"&&D++;break;case"MultiPolygon":for(l=0;l<p.length;l++){for(J=0,n=0;n<p[l].length;n++){for(s=0;s<p[l][n].length-m;s++){if(u(p[l][n][s],w,E,D,J)===!1)return!1;w++}J++}D++}break;case"GeometryCollection":for(l=0;l<c.geometries.length;l++)if(Oo(c.geometries[l],u)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Es(i,u){var r,l,n,s,c,f,p,g,m,w,x=0,P=i.type==="FeatureCollection",M=i.type==="Feature",S=P?i.features.length:1;for(r=0;r<S;r++){for(f=P?i.features[r].geometry:M?i.geometry:i,g=P?i.features[r].properties:M?i.properties:{},m=P?i.features[r].bbox:M?i.bbox:void 0,w=P?i.features[r].id:M?i.id:void 0,p=f?f.type==="GeometryCollection":!1,c=p?f.geometries.length:1,n=0;n<c;n++){if(s=p?f.geometries[n]:f,s===null){if(u(null,x,g,m,w)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(u(s,x,g,m,w)===!1)return!1;break}case"GeometryCollection":{for(l=0;l<s.geometries.length;l++)if(u(s.geometries[l],x,g,m,w)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}x++}}function ks(i,u,r){var l=r;return Es(i,function(n,s,c,f,p){s===0&&r===void 0?l=n:l=u(l,n,s,c,f,p)}),l}function Ds(i){return ks(i,(u,r)=>u+Rs(r),0)}function Rs(i){let u=0,r;switch(i.type){case"Polygon":return _o(i.coordinates);case"MultiPolygon":for(r=0;r<i.coordinates.length;r++)u+=_o(i.coordinates[r]);return u;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function _o(i){let u=0;if(i&&i.length>0){u+=Math.abs(go(i[0]));for(let r=1;r<i.length;r++)u-=Math.abs(go(i[r]))}return u}var Os=fo*fo/2,Di=Math.PI/180;function go(i){const u=i.length-1;if(u<=2)return 0;let r=0,l=0;for(;l<u;){const n=i[l],s=i[l+1===u?0:l+1],c=i[l+2>=u?(l+2)%u:l+2],f=n[0]*Di,p=s[1]*Di,g=c[0]*Di;r+=(g-f)*Math.sin(p),l++}return r*Os}var Ri,mo;function Is(){return mo||(mo=1,Ri=function i(u,r){if(u===r)return!0;if(u&&r&&typeof u=="object"&&typeof r=="object"){if(u.constructor!==r.constructor)return!1;var l,n,s;if(Array.isArray(u)){if(l=u.length,l!=r.length)return!1;for(n=l;n--!==0;)if(!i(u[n],r[n]))return!1;return!0}if(u.constructor===RegExp)return u.source===r.source&&u.flags===r.flags;if(u.valueOf!==Object.prototype.valueOf)return u.valueOf()===r.valueOf();if(u.toString!==Object.prototype.toString)return u.toString()===r.toString();if(s=Object.keys(u),l=s.length,l!==Object.keys(r).length)return!1;for(n=l;n--!==0;)if(!Object.prototype.hasOwnProperty.call(r,s[n]))return!1;for(n=l;n--!==0;){var c=s[n];if(!i(u[c],r[c]))return!1}return!0}return u!==u&&r!==r}),Ri}var zs=Is();const vo=Do(zs);function As(i,u={}){let r=0,l=0,n=0;return Oo(i,function(s){r+=s[0],l+=s[1],n++}),bs([r/n,l/n],u.properties)}function Io(i,u){const r=F.useRef(u);F.useEffect(function(){u!==r.current&&i.attributionControl!=null&&(r.current!=null&&i.attributionControl.removeAttribution(r.current),u!=null&&i.attributionControl.addAttribution(u)),r.current=u},[i,u])}function Fs(i,u,r){u.center!==r.center&&i.setLatLng(u.center),u.radius!=null&&u.radius!==r.radius&&i.setRadius(u.radius)}const Bs=1;function Hs(i){return Object.freeze({__version:Bs,map:i})}function We(i,u){return Object.freeze({...i,...u})}const zo=F.createContext(null),Ao=zo.Provider;function Ce(){const i=F.useContext(zo);if(i==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return i}function Fo(i){function u(r,l){const{instance:n,context:s}=i(r).current;return F.useImperativeHandle(l,()=>n),r.children==null?null:Pe.createElement(Ao,{value:s},r.children)}return F.forwardRef(u)}function Zs(i){function u(r,l){const[n,s]=F.useState(!1),{instance:c}=i(r,s).current;F.useImperativeHandle(l,()=>c),F.useEffect(function(){n&&c.update()},[c,n,r.children]);const f=c._contentNode;return f?xs.createPortal(r.children,f):null}return F.forwardRef(u)}function Ns(i){function u(r,l){const{instance:n}=i(r).current;return F.useImperativeHandle(l,()=>n),null}return F.forwardRef(u)}function Yi(i,u){const r=F.useRef();F.useEffect(function(){return u!=null&&i.instance.on(u),r.current=u,function(){r.current!=null&&i.instance.off(r.current),r.current=null}},[i,u])}function qe(i,u){const r=i.pane??u.pane;return r?{...i,pane:r}:i}function Gs(i,u){return function(l,n){const s=Ce(),c=i(qe(l,s),s);return Io(s.map,l.attribution),Yi(c.current,l.eventHandlers),u(c.current,s,l,n),c}}var Le={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var Vs=Le.exports,yo;function $s(){return yo||(yo=1,function(i,u){(function(r,l){l(u)})(Vs,function(r){var l="1.9.4";function n(t){var e,o,a,h;for(o=1,a=arguments.length;o<a;o++){h=arguments[o];for(e in h)t[e]=h[e]}return t}var s=Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}();function c(t,e){var o=Array.prototype.slice;if(t.bind)return t.bind.apply(t,o.call(arguments,1));var a=o.call(arguments,2);return function(){return t.apply(e,a.length?a.concat(o.call(arguments)):arguments)}}var f=0;function p(t){return"_leaflet_id"in t||(t._leaflet_id=++f),t._leaflet_id}function g(t,e,o){var a,h,d,_;return _=function(){a=!1,h&&(d.apply(o,h),h=!1)},d=function(){a?h=arguments:(t.apply(o,arguments),setTimeout(_,e),a=!0)},d}function m(t,e,o){var a=e[1],h=e[0],d=a-h;return t===a&&o?t:((t-h)%d+d)%d+h}function w(){return!1}function x(t,e){if(e===!1)return t;var o=Math.pow(10,e===void 0?6:e);return Math.round(t*o)/o}function P(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function M(t){return P(t).split(/\s+/)}function S(t,e){Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?s(t.options):{});for(var o in e)t.options[o]=e[o];return t.options}function O(t,e,o){var a=[];for(var h in t)a.push(encodeURIComponent(o?h.toUpperCase():h)+"="+encodeURIComponent(t[h]));return(!e||e.indexOf("?")===-1?"?":"&")+a.join("&")}var E=/\{ *([\w_ -]+) *\}/g;function V(t,e){return t.replace(E,function(o,a){var h=e[a];if(h===void 0)throw new Error("No value provided for variable "+o);return typeof h=="function"&&(h=h(e)),h})}var D=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};function J(t,e){for(var o=0;o<t.length;o++)if(t[o]===e)return o;return-1}var Y="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function Rt(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var Bt=0;function Ht(t){var e=+new Date,o=Math.max(0,16-(e-Bt));return Bt=e+o,window.setTimeout(t,o)}var Zt=window.requestAnimationFrame||Rt("RequestAnimationFrame")||Ht,Wt=window.cancelAnimationFrame||Rt("CancelAnimationFrame")||Rt("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function nt(t,e,o){if(o&&Zt===Ht)t.call(e);else return Zt.call(window,c(t,e))}function ot(t){t&&Wt.call(window,t)}var Ko={__proto__:null,extend:n,create:s,bind:c,get lastId(){return f},stamp:p,throttle:g,wrapNum:m,falseFn:w,formatNum:x,trim:P,splitWords:M,setOptions:S,getParamString:O,template:V,isArray:D,indexOf:J,emptyImageUrl:Y,requestFn:Zt,cancelFn:Wt,requestAnimFrame:nt,cancelAnimFrame:ot};function St(){}St.extend=function(t){var e=function(){S(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},o=e.__super__=this.prototype,a=s(o);a.constructor=e,e.prototype=a;for(var h in this)Object.prototype.hasOwnProperty.call(this,h)&&h!=="prototype"&&h!=="__super__"&&(e[h]=this[h]);return t.statics&&n(e,t.statics),t.includes&&(Xo(t.includes),n.apply(null,[a].concat(t.includes))),n(a,t),delete a.statics,delete a.includes,a.options&&(a.options=o.options?s(o.options):{},n(a.options,t.options)),a._initHooks=[],a.callInitHooks=function(){if(!this._initHooksCalled){o.callInitHooks&&o.callInitHooks.call(this),this._initHooksCalled=!0;for(var d=0,_=a._initHooks.length;d<_;d++)a._initHooks[d].call(this)}},e},St.include=function(t){var e=this.prototype.options;return n(this.prototype,t),t.options&&(this.prototype.options=e,this.mergeOptions(t.options)),this},St.mergeOptions=function(t){return n(this.prototype.options,t),this},St.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),o=typeof t=="function"?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(o),this};function Xo(t){if(!(typeof L>"u"||!L||!L.Mixin)){t=D(t)?t:[t];for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var dt={on:function(t,e,o){if(typeof t=="object")for(var a in t)this._on(a,t[a],e);else{t=M(t);for(var h=0,d=t.length;h<d;h++)this._on(t[h],e,o)}return this},off:function(t,e,o){if(!arguments.length)delete this._events;else if(typeof t=="object")for(var a in t)this._off(a,t[a],e);else{t=M(t);for(var h=arguments.length===1,d=0,_=t.length;d<_;d++)h?this._off(t[d]):this._off(t[d],e,o)}return this},_on:function(t,e,o,a){if(typeof e!="function"){console.warn("wrong listener type: "+typeof e);return}if(this._listens(t,e,o)===!1){o===this&&(o=void 0);var h={fn:e,ctx:o};a&&(h.once=!0),this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(h)}},_off:function(t,e,o){var a,h,d;if(this._events&&(a=this._events[t],!!a)){if(arguments.length===1){if(this._firingCount)for(h=0,d=a.length;h<d;h++)a[h].fn=w;delete this._events[t];return}if(typeof e!="function"){console.warn("wrong listener type: "+typeof e);return}var _=this._listens(t,e,o);if(_!==!1){var v=a[_];this._firingCount&&(v.fn=w,this._events[t]=a=a.slice()),a.splice(_,1)}}},fire:function(t,e,o){if(!this.listens(t,o))return this;var a=n({},e,{type:t,target:this,sourceTarget:e&&e.sourceTarget||this});if(this._events){var h=this._events[t];if(h){this._firingCount=this._firingCount+1||1;for(var d=0,_=h.length;d<_;d++){var v=h[d],y=v.fn;v.once&&this.off(t,y,v.ctx),y.call(v.ctx||this,a)}this._firingCount--}}return o&&this._propagateEvent(a),this},listens:function(t,e,o,a){typeof t!="string"&&console.warn('"string" type argument expected');var h=e;typeof e!="function"&&(a=!!e,h=void 0,o=void 0);var d=this._events&&this._events[t];if(d&&d.length&&this._listens(t,h,o)!==!1)return!0;if(a){for(var _ in this._eventParents)if(this._eventParents[_].listens(t,e,o,a))return!0}return!1},_listens:function(t,e,o){if(!this._events)return!1;var a=this._events[t]||[];if(!e)return!!a.length;o===this&&(o=void 0);for(var h=0,d=a.length;h<d;h++)if(a[h].fn===e&&a[h].ctx===o)return h;return!1},once:function(t,e,o){if(typeof t=="object")for(var a in t)this._on(a,t[a],e,!0);else{t=M(t);for(var h=0,d=t.length;h<d;h++)this._on(t[h],e,o,!0)}return this},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[p(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[p(t)],this},_propagateEvent:function(t){for(var e in this._eventParents)this._eventParents[e].fire(t.type,n({layer:t.target,propagatedFrom:t.target},t),!0)}};dt.addEventListener=dt.on,dt.removeEventListener=dt.clearAllEventListeners=dt.off,dt.addOneTimeEventListener=dt.once,dt.fireEvent=dt.fire,dt.hasEventListeners=dt.listens;var oe=St.extend(dt);function B(t,e,o){this.x=o?Math.round(t):t,this.y=o?Math.round(e):e}var tn=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};B.prototype={clone:function(){return new B(this.x,this.y)},add:function(t){return this.clone()._add(A(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(A(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new B(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new B(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=tn(this.x),this.y=tn(this.y),this},distanceTo:function(t){t=A(t);var e=t.x-this.x,o=t.y-this.y;return Math.sqrt(e*e+o*o)},equals:function(t){return t=A(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=A(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+x(this.x)+", "+x(this.y)+")"}};function A(t,e,o){return t instanceof B?t:D(t)?new B(t[0],t[1]):t==null?t:typeof t=="object"&&"x"in t&&"y"in t?new B(t.x,t.y):new B(t,e,o)}function K(t,e){if(t)for(var o=e?[t,e]:t,a=0,h=o.length;a<h;a++)this.extend(o[a])}K.prototype={extend:function(t){var e,o;if(!t)return this;if(t instanceof B||typeof t[0]=="number"||"x"in t)e=o=A(t);else if(t=ut(t),e=t.min,o=t.max,!e||!o)return this;return!this.min&&!this.max?(this.min=e.clone(),this.max=o.clone()):(this.min.x=Math.min(e.x,this.min.x),this.max.x=Math.max(o.x,this.max.x),this.min.y=Math.min(e.y,this.min.y),this.max.y=Math.max(o.y,this.max.y)),this},getCenter:function(t){return A((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return A(this.min.x,this.max.y)},getTopRight:function(){return A(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,o;return typeof t[0]=="number"||t instanceof B?t=A(t):t=ut(t),t instanceof K?(e=t.min,o=t.max):e=o=t,e.x>=this.min.x&&o.x<=this.max.x&&e.y>=this.min.y&&o.y<=this.max.y},intersects:function(t){t=ut(t);var e=this.min,o=this.max,a=t.min,h=t.max,d=h.x>=e.x&&a.x<=o.x,_=h.y>=e.y&&a.y<=o.y;return d&&_},overlaps:function(t){t=ut(t);var e=this.min,o=this.max,a=t.min,h=t.max,d=h.x>e.x&&a.x<o.x,_=h.y>e.y&&a.y<o.y;return d&&_},isValid:function(){return!!(this.min&&this.max)},pad:function(t){var e=this.min,o=this.max,a=Math.abs(e.x-o.x)*t,h=Math.abs(e.y-o.y)*t;return ut(A(e.x-a,e.y-h),A(o.x+a,o.y+h))},equals:function(t){return t?(t=ut(t),this.min.equals(t.getTopLeft())&&this.max.equals(t.getBottomRight())):!1}};function ut(t,e){return!t||t instanceof K?t:new K(t,e)}function ht(t,e){if(t)for(var o=e?[t,e]:t,a=0,h=o.length;a<h;a++)this.extend(o[a])}ht.prototype={extend:function(t){var e=this._southWest,o=this._northEast,a,h;if(t instanceof W)a=t,h=t;else if(t instanceof ht){if(a=t._southWest,h=t._northEast,!a||!h)return this}else return t?this.extend($(t)||tt(t)):this;return!e&&!o?(this._southWest=new W(a.lat,a.lng),this._northEast=new W(h.lat,h.lng)):(e.lat=Math.min(a.lat,e.lat),e.lng=Math.min(a.lng,e.lng),o.lat=Math.max(h.lat,o.lat),o.lng=Math.max(h.lng,o.lng)),this},pad:function(t){var e=this._southWest,o=this._northEast,a=Math.abs(e.lat-o.lat)*t,h=Math.abs(e.lng-o.lng)*t;return new ht(new W(e.lat-a,e.lng-h),new W(o.lat+a,o.lng+h))},getCenter:function(){return new W((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new W(this.getNorth(),this.getWest())},getSouthEast:function(){return new W(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){typeof t[0]=="number"||t instanceof W||"lat"in t?t=$(t):t=tt(t);var e=this._southWest,o=this._northEast,a,h;return t instanceof ht?(a=t.getSouthWest(),h=t.getNorthEast()):a=h=t,a.lat>=e.lat&&h.lat<=o.lat&&a.lng>=e.lng&&h.lng<=o.lng},intersects:function(t){t=tt(t);var e=this._southWest,o=this._northEast,a=t.getSouthWest(),h=t.getNorthEast(),d=h.lat>=e.lat&&a.lat<=o.lat,_=h.lng>=e.lng&&a.lng<=o.lng;return d&&_},overlaps:function(t){t=tt(t);var e=this._southWest,o=this._northEast,a=t.getSouthWest(),h=t.getNorthEast(),d=h.lat>e.lat&&a.lat<o.lat,_=h.lng>e.lng&&a.lng<o.lng;return d&&_},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return t?(t=tt(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function tt(t,e){return t instanceof ht?t:new ht(t,e)}function W(t,e,o){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,o!==void 0&&(this.alt=+o)}W.prototype={equals:function(t,e){if(!t)return!1;t=$(t);var o=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return o<=(e===void 0?1e-9:e)},toString:function(t){return"LatLng("+x(this.lat,t)+", "+x(this.lng,t)+")"},distanceTo:function(t){return Ot.distance(this,$(t))},wrap:function(){return Ot.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,o=e/Math.cos(Math.PI/180*this.lat);return tt([this.lat-e,this.lng-o],[this.lat+e,this.lng+o])},clone:function(){return new W(this.lat,this.lng,this.alt)}};function $(t,e,o){return t instanceof W?t:D(t)&&typeof t[0]!="object"?t.length===3?new W(t[0],t[1],t[2]):t.length===2?new W(t[0],t[1]):null:t==null?t:typeof t=="object"&&"lat"in t?new W(t.lat,"lng"in t?t.lng:t.lon,t.alt):e===void 0?null:new W(t,e,o)}var Mt={latLngToPoint:function(t,e){var o=this.projection.project(t),a=this.scale(e);return this.transformation._transform(o,a)},pointToLatLng:function(t,e){var o=this.scale(e),a=this.transformation.untransform(t,o);return this.projection.unproject(a)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,o=this.scale(t),a=this.transformation.transform(e.min,o),h=this.transformation.transform(e.max,o);return new K(a,h)},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?m(t.lng,this.wrapLng,!0):t.lng,o=this.wrapLat?m(t.lat,this.wrapLat,!0):t.lat,a=t.alt;return new W(o,e,a)},wrapLatLngBounds:function(t){var e=t.getCenter(),o=this.wrapLatLng(e),a=e.lat-o.lat,h=e.lng-o.lng;if(a===0&&h===0)return t;var d=t.getSouthWest(),_=t.getNorthEast(),v=new W(d.lat-a,d.lng-h),y=new W(_.lat-a,_.lng-h);return new ht(v,y)}},Ot=n({},Mt,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var o=Math.PI/180,a=t.lat*o,h=e.lat*o,d=Math.sin((e.lat-t.lat)*o/2),_=Math.sin((e.lng-t.lng)*o/2),v=d*d+Math.cos(a)*Math.cos(h)*_*_,y=2*Math.atan2(Math.sqrt(v),Math.sqrt(1-v));return this.R*y}}),en=6378137,Xe={R:en,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,o=this.MAX_LATITUDE,a=Math.max(Math.min(o,t.lat),-o),h=Math.sin(a*e);return new B(this.R*t.lng*e,this.R*Math.log((1+h)/(1-h))/2)},unproject:function(t){var e=180/Math.PI;return new W((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:function(){var t=en*Math.PI;return new K([-t,-t],[t,t])}()};function Je(t,e,o,a){if(D(t)){this._a=t[0],this._b=t[1],this._c=t[2],this._d=t[3];return}this._a=t,this._b=e,this._c=o,this._d=a}Je.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new B((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}};function re(t,e,o,a){return new Je(t,e,o,a)}var Qe=n({},Ot,{code:"EPSG:3857",projection:Xe,transformation:function(){var t=.5/(Math.PI*Xe.R);return re(t,.5,-t,.5)}()}),Jo=n({},Qe,{code:"EPSG:900913"});function nn(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function on(t,e){var o="",a,h,d,_,v,y;for(a=0,d=t.length;a<d;a++){for(v=t[a],h=0,_=v.length;h<_;h++)y=v[h],o+=(h?"L":"M")+y.x+" "+y.y;o+=e?k.svg?"z":"x":""}return o||"M0 0"}var ti=document.documentElement.style,Se="ActiveXObject"in window,Qo=Se&&!document.addEventListener,rn="msLaunchUri"in navigator&&!("documentMode"in document),ei=Lt("webkit"),sn=Lt("android"),an=Lt("android 2")||Lt("android 3"),tr=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),er=sn&&Lt("Google")&&tr<537&&!("AudioNode"in window),ii=!!window.opera,ln=!rn&&Lt("chrome"),un=Lt("gecko")&&!ei&&!ii&&!Se,ir=!ln&&Lt("safari"),hn=Lt("phantom"),cn="OTransition"in ti,nr=navigator.platform.indexOf("Win")===0,dn=Se&&"transition"in ti,ni="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!an,fn="MozPerspective"in ti,or=!window.L_DISABLE_3D&&(dn||ni||fn)&&!cn&&!hn,se=typeof orientation<"u"||Lt("mobile"),rr=se&&ei,sr=se&&ni,pn=!window.PointerEvent&&window.MSPointerEvent,_n=!!(window.PointerEvent||pn),gn="ontouchstart"in window||!!window.TouchEvent,ar=!window.L_NO_TOUCH&&(gn||_n),lr=se&&ii,ur=se&&un,hr=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,cr=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",w,e),window.removeEventListener("testPassiveEventSupport",w,e)}catch{}return t}(),dr=function(){return!!document.createElement("canvas").getContext}(),oi=!!(document.createElementNS&&nn("svg").createSVGRect),fr=!!oi&&function(){var t=document.createElement("div");return t.innerHTML="<svg/>",(t.firstChild&&t.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),pr=!oi&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&typeof e.adj=="object"}catch{return!1}}(),_r=navigator.platform.indexOf("Mac")===0,gr=navigator.platform.indexOf("Linux")===0;function Lt(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var k={ie:Se,ielt9:Qo,edge:rn,webkit:ei,android:sn,android23:an,androidStock:er,opera:ii,chrome:ln,gecko:un,safari:ir,phantom:hn,opera12:cn,win:nr,ie3d:dn,webkit3d:ni,gecko3d:fn,any3d:or,mobile:se,mobileWebkit:rr,mobileWebkit3d:sr,msPointer:pn,pointer:_n,touch:ar,touchNative:gn,mobileOpera:lr,mobileGecko:ur,retina:hr,passiveEvents:cr,canvas:dr,svg:oi,vml:pr,inlineSvg:fr,mac:_r,linux:gr},mn=k.msPointer?"MSPointerDown":"pointerdown",vn=k.msPointer?"MSPointerMove":"pointermove",yn=k.msPointer?"MSPointerUp":"pointerup",Ln=k.msPointer?"MSPointerCancel":"pointercancel",ri={touchstart:mn,touchmove:vn,touchend:yn,touchcancel:Ln},wn={touchstart:xr,touchmove:Me,touchend:Me,touchcancel:Me},qt={},xn=!1;function mr(t,e,o){return e==="touchstart"&&wr(),wn[e]?(o=wn[e].bind(this,o),t.addEventListener(ri[e],o,!1),o):(console.warn("wrong event specified:",e),w)}function vr(t,e,o){if(!ri[e]){console.warn("wrong event specified:",e);return}t.removeEventListener(ri[e],o,!1)}function yr(t){qt[t.pointerId]=t}function Lr(t){qt[t.pointerId]&&(qt[t.pointerId]=t)}function Pn(t){delete qt[t.pointerId]}function wr(){xn||(document.addEventListener(mn,yr,!0),document.addEventListener(vn,Lr,!0),document.addEventListener(yn,Pn,!0),document.addEventListener(Ln,Pn,!0),xn=!0)}function Me(t,e){if(e.pointerType!==(e.MSPOINTER_TYPE_MOUSE||"mouse")){e.touches=[];for(var o in qt)e.touches.push(qt[o]);e.changedTouches=[e],t(e)}}function xr(t,e){e.MSPOINTER_TYPE_TOUCH&&e.pointerType===e.MSPOINTER_TYPE_TOUCH&&st(e),Me(t,e)}function Pr(t){var e={},o,a;for(a in t)o=t[a],e[a]=o&&o.bind?o.bind(t):o;return t=e,e.type="dblclick",e.detail=2,e.isTrusted=!1,e._simulated=!0,e}var Cr=200;function Sr(t,e){t.addEventListener("dblclick",e);var o=0,a;function h(d){if(d.detail!==1){a=d.detail;return}if(!(d.pointerType==="mouse"||d.sourceCapabilities&&!d.sourceCapabilities.firesTouchEvents)){var _=Tn(d);if(!(_.some(function(y){return y instanceof HTMLLabelElement&&y.attributes.for})&&!_.some(function(y){return y instanceof HTMLInputElement||y instanceof HTMLSelectElement}))){var v=Date.now();v-o<=Cr?(a++,a===2&&e(Pr(d))):a=1,o=v}}}return t.addEventListener("click",h),{dblclick:e,simDblclick:h}}function Mr(t,e){t.removeEventListener("dblclick",e.dblclick),t.removeEventListener("click",e.simDblclick)}var si=Ee(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ae=Ee(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Cn=ae==="webkitTransition"||ae==="OTransition"?ae+"End":"transitionend";function Sn(t){return typeof t=="string"?document.getElementById(t):t}function le(t,e){var o=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!o||o==="auto")&&document.defaultView){var a=document.defaultView.getComputedStyle(t,null);o=a?a[e]:null}return o==="auto"?null:o}function j(t,e,o){var a=document.createElement(t);return a.className=e||"",o&&o.appendChild(a),a}function X(t){var e=t.parentNode;e&&e.removeChild(t)}function be(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function Yt(t){var e=t.parentNode;e&&e.lastChild!==t&&e.appendChild(t)}function Kt(t){var e=t.parentNode;e&&e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function ai(t,e){if(t.classList!==void 0)return t.classList.contains(e);var o=Te(t);return o.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(o)}function Z(t,e){if(t.classList!==void 0)for(var o=M(e),a=0,h=o.length;a<h;a++)t.classList.add(o[a]);else if(!ai(t,e)){var d=Te(t);li(t,(d?d+" ":"")+e)}}function Q(t,e){t.classList!==void 0?t.classList.remove(e):li(t,P((" "+Te(t)+" ").replace(" "+e+" "," ")))}function li(t,e){t.className.baseVal===void 0?t.className=e:t.className.baseVal=e}function Te(t){return t.correspondingElement&&(t=t.correspondingElement),t.className.baseVal===void 0?t.className:t.className.baseVal}function pt(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&br(t,e)}function br(t,e){var o=!1,a="DXImageTransform.Microsoft.Alpha";try{o=t.filters.item(a)}catch{if(e===1)return}e=Math.round(e*100),o?(o.Enabled=e!==100,o.Opacity=e):t.style.filter+=" progid:"+a+"(opacity="+e+")"}function Ee(t){for(var e=document.documentElement.style,o=0;o<t.length;o++)if(t[o]in e)return t[o];return!1}function Nt(t,e,o){var a=e||new B(0,0);t.style[si]=(k.ie3d?"translate("+a.x+"px,"+a.y+"px)":"translate3d("+a.x+"px,"+a.y+"px,0)")+(o?" scale("+o+")":"")}function et(t,e){t._leaflet_pos=e,k.any3d?Nt(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function Gt(t){return t._leaflet_pos||new B(0,0)}var ue,he,ui;if("onselectstart"in document)ue=function(){H(window,"selectstart",st)},he=function(){q(window,"selectstart",st)};else{var ce=Ee(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);ue=function(){if(ce){var t=document.documentElement.style;ui=t[ce],t[ce]="none"}},he=function(){ce&&(document.documentElement.style[ce]=ui,ui=void 0)}}function hi(){H(window,"dragstart",st)}function ci(){q(window,"dragstart",st)}var ke,di;function fi(t){for(;t.tabIndex===-1;)t=t.parentNode;t.style&&(De(),ke=t,di=t.style.outlineStyle,t.style.outlineStyle="none",H(window,"keydown",De))}function De(){ke&&(ke.style.outlineStyle=di,ke=void 0,di=void 0,q(window,"keydown",De))}function Mn(t){do t=t.parentNode;while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body);return t}function pi(t){var e=t.getBoundingClientRect();return{x:e.width/t.offsetWidth||1,y:e.height/t.offsetHeight||1,boundingClientRect:e}}var Tr={__proto__:null,TRANSFORM:si,TRANSITION:ae,TRANSITION_END:Cn,get:Sn,getStyle:le,create:j,remove:X,empty:be,toFront:Yt,toBack:Kt,hasClass:ai,addClass:Z,removeClass:Q,setClass:li,getClass:Te,setOpacity:pt,testProp:Ee,setTransform:Nt,setPosition:et,getPosition:Gt,get disableTextSelection(){return ue},get enableTextSelection(){return he},disableImageDrag:hi,enableImageDrag:ci,preventOutline:fi,restoreOutline:De,getSizedParentNode:Mn,getScale:pi};function H(t,e,o,a){if(e&&typeof e=="object")for(var h in e)gi(t,h,e[h],o);else{e=M(e);for(var d=0,_=e.length;d<_;d++)gi(t,e[d],o,a)}return this}var wt="_leaflet_events";function q(t,e,o,a){if(arguments.length===1)bn(t),delete t[wt];else if(e&&typeof e=="object")for(var h in e)mi(t,h,e[h],o);else if(e=M(e),arguments.length===2)bn(t,function(v){return J(e,v)!==-1});else for(var d=0,_=e.length;d<_;d++)mi(t,e[d],o,a);return this}function bn(t,e){for(var o in t[wt]){var a=o.split(/\d/)[0];(!e||e(a))&&mi(t,a,null,null,o)}}var _i={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function gi(t,e,o,a){var h=e+p(o)+(a?"_"+p(a):"");if(t[wt]&&t[wt][h])return this;var d=function(v){return o.call(a||t,v||window.event)},_=d;!k.touchNative&&k.pointer&&e.indexOf("touch")===0?d=mr(t,e,d):k.touch&&e==="dblclick"?d=Sr(t,d):"addEventListener"in t?e==="touchstart"||e==="touchmove"||e==="wheel"||e==="mousewheel"?t.addEventListener(_i[e]||e,d,k.passiveEvents?{passive:!1}:!1):e==="mouseenter"||e==="mouseleave"?(d=function(v){v=v||window.event,yi(t,v)&&_(v)},t.addEventListener(_i[e],d,!1)):t.addEventListener(e,_,!1):t.attachEvent("on"+e,d),t[wt]=t[wt]||{},t[wt][h]=d}function mi(t,e,o,a,h){h=h||e+p(o)+(a?"_"+p(a):"");var d=t[wt]&&t[wt][h];if(!d)return this;!k.touchNative&&k.pointer&&e.indexOf("touch")===0?vr(t,e,d):k.touch&&e==="dblclick"?Mr(t,d):"removeEventListener"in t?t.removeEventListener(_i[e]||e,d,!1):t.detachEvent("on"+e,d),t[wt][h]=null}function Vt(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function vi(t){return gi(t,"wheel",Vt),this}function de(t){return H(t,"mousedown touchstart dblclick contextmenu",Vt),t._leaflet_disable_click=!0,this}function st(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function $t(t){return st(t),Vt(t),this}function Tn(t){if(t.composedPath)return t.composedPath();for(var e=[],o=t.target;o;)e.push(o),o=o.parentNode;return e}function En(t,e){if(!e)return new B(t.clientX,t.clientY);var o=pi(e),a=o.boundingClientRect;return new B((t.clientX-a.left)/o.x-e.clientLeft,(t.clientY-a.top)/o.y-e.clientTop)}var Er=k.linux&&k.chrome?window.devicePixelRatio:k.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function kn(t){return k.edge?t.wheelDeltaY/2:t.deltaY&&t.deltaMode===0?-t.deltaY/Er:t.deltaY&&t.deltaMode===1?-t.deltaY*20:t.deltaY&&t.deltaMode===2?-t.deltaY*60:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?-t.detail*20:t.detail?t.detail/-32765*60:0}function yi(t,e){var o=e.relatedTarget;if(!o)return!0;try{for(;o&&o!==t;)o=o.parentNode}catch{return!1}return o!==t}var kr={__proto__:null,on:H,off:q,stopPropagation:Vt,disableScrollPropagation:vi,disableClickPropagation:de,preventDefault:st,stop:$t,getPropagationPath:Tn,getMousePosition:En,getWheelDelta:kn,isExternalTarget:yi,addListener:H,removeListener:q},Dn=oe.extend({run:function(t,e,o,a){this.stop(),this._el=t,this._inProgress=!0,this._duration=o||.25,this._easeOutPower=1/Math.max(a||.5,.2),this._startPos=Gt(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=nt(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,o=this._duration*1e3;e<o?this._runFrame(this._easeOut(e/o),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var o=this._startPos.add(this._offset.multiplyBy(t));e&&o._round(),et(this._el,o),this.fire("step")},_complete:function(){ot(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),U=oe.extend({options:{crs:Qe,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=S(this,e),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=c(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),e.zoom!==void 0&&(this._zoom=this._limitZoom(e.zoom)),e.center&&e.zoom!==void 0&&this.setView($(e.center),e.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ae&&k.any3d&&!k.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),H(this._proxy,Cn,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,e,o){if(e=e===void 0?this._zoom:this._limitZoom(e),t=this._limitCenter($(t),e,this.options.maxBounds),o=o||{},this._stop(),this._loaded&&!o.reset&&o!==!0){o.animate!==void 0&&(o.zoom=n({animate:o.animate},o.zoom),o.pan=n({animate:o.animate,duration:o.duration},o.pan));var a=this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,o.zoom):this._tryAnimatedPan(t,o.pan);if(a)return clearTimeout(this._sizeTimer),this}return this._resetView(t,e,o.pan&&o.pan.noMoveStart),this},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(k.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(k.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,o){var a=this.getZoomScale(e),h=this.getSize().divideBy(2),d=t instanceof B?t:this.latLngToContainerPoint(t),_=d.subtract(h).multiplyBy(1-1/a),v=this.containerPointToLatLng(h.add(_));return this.setView(v,e,{zoom:o})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():tt(t);var o=A(e.paddingTopLeft||e.padding||[0,0]),a=A(e.paddingBottomRight||e.padding||[0,0]),h=this.getBoundsZoom(t,!1,o.add(a));if(h=typeof e.maxZoom=="number"?Math.min(e.maxZoom,h):h,h===1/0)return{center:t.getCenter(),zoom:h};var d=a.subtract(o).divideBy(2),_=this.project(t.getSouthWest(),h),v=this.project(t.getNorthEast(),h),y=this.unproject(_.add(v).divideBy(2).add(d),h);return{center:y,zoom:h}},fitBounds:function(t,e){if(t=tt(t),!t.isValid())throw new Error("Bounds are not valid.");var o=this._getBoundsCenterZoom(t,e);return this.setView(o.center,o.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(t=A(t).round(),e=e||{},!t.x&&!t.y)return this.fire("moveend");if(e.animate!==!0&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Dn,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),e.animate!==!1){Z(this._mapPane,"leaflet-pan-anim");var o=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,o,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,e,o){if(o=o||{},o.animate===!1||!k.any3d)return this.setView(t,e,o);this._stop();var a=this.project(this.getCenter()),h=this.project(t),d=this.getSize(),_=this._zoom;t=$(t),e=e===void 0?_:e;var v=Math.max(d.x,d.y),y=v*this.getZoomScale(_,e),C=h.distanceTo(a)||1,b=1.42,R=b*b;function N(it){var Ve=it?-1:1,vs=it?y:v,ys=y*y-v*v+Ve*R*R*C*C,Ls=2*vs*R*C,ki=ys/Ls,co=Math.sqrt(ki*ki+1)-ki,ws=co<1e-9?-18:Math.log(co);return ws}function lt(it){return(Math.exp(it)-Math.exp(-it))/2}function rt(it){return(Math.exp(it)+Math.exp(-it))/2}function gt(it){return lt(it)/rt(it)}var ct=N(0);function ie(it){return v*(rt(ct)/rt(ct+b*it))}function ps(it){return v*(rt(ct)*gt(ct+b*it)-lt(ct))/R}function _s(it){return 1-Math.pow(1-it,1.5)}var gs=Date.now(),uo=(N(1)-ct)/b,ms=o.duration?1e3*o.duration:1e3*uo*.8;function ho(){var it=(Date.now()-gs)/ms,Ve=_s(it)*uo;it<=1?(this._flyToFrame=nt(ho,this),this._move(this.unproject(a.add(h.subtract(a).multiplyBy(ps(Ve)/C)),_),this.getScaleZoom(v/ie(Ve),_),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}return this._moveStart(!0,o.noMoveStart),ho.call(this),this},flyToBounds:function(t,e){var o=this._getBoundsCenterZoom(t,e);return this.flyTo(o.center,o.zoom,e)},setMaxBounds:function(t){return t=tt(t),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),t.isValid()?(this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(t){var e=this.options.minZoom;return this.options.minZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var e=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var o=this.getCenter(),a=this._limitCenter(o,this._zoom,tt(t));return o.equals(a)||this.panTo(a,e),this._enforcingBounds=!1,this},panInside:function(t,e){e=e||{};var o=A(e.paddingTopLeft||e.padding||[0,0]),a=A(e.paddingBottomRight||e.padding||[0,0]),h=this.project(this.getCenter()),d=this.project(t),_=this.getPixelBounds(),v=ut([_.min.add(o),_.max.subtract(a)]),y=v.getSize();if(!v.contains(d)){this._enforcingBounds=!0;var C=d.subtract(v.getCenter()),b=v.extend(d).getSize().subtract(y);h.x+=C.x<0?-b.x:b.x,h.y+=C.y<0?-b.y:b.y,this.panTo(this.unproject(h),e),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=n({animate:!1,pan:!0},t===!0?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var o=this.getSize(),a=e.divideBy(2).round(),h=o.divideBy(2).round(),d=a.subtract(h);return!d.x&&!d.y?this:(t.animate&&t.pan?this.panBy(d):(t.pan&&this._rawPanBy(d),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(c(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:o}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=n({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=c(this._handleGeolocationResponse,this),o=c(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,o,t):navigator.geolocation.getCurrentPosition(e,o,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){if(this._container._leaflet_id){var e=t.code,o=t.message||(e===1?"permission denied":e===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+o+"."})}},_handleGeolocationResponse:function(t){if(this._container._leaflet_id){var e=t.coords.latitude,o=t.coords.longitude,a=new W(e,o),h=a.toBounds(t.coords.accuracy*2),d=this._locateOptions;if(d.setView){var _=this.getBoundsZoom(h);this.setView(a,d.maxZoom?Math.min(_,d.maxZoom):_)}var v={latlng:a,bounds:h,timestamp:t.timestamp};for(var y in t.coords)typeof t.coords[y]=="number"&&(v[y]=t.coords[y]);this.fire("locationfound",v)}},addHandler:function(t,e){if(!e)return this;var o=this[t]=new e(this);return this._handlers.push(o),this.options[t]&&o.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),X(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(ot(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var t;for(t in this._layers)this._layers[t].remove();for(t in this._panes)X(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){var o="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),a=j("div",o,e||this._mapPane);return t&&(this._panes[t]=a),a},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),e=this.unproject(t.getBottomLeft()),o=this.unproject(t.getTopRight());return new ht(e,o)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,o){t=tt(t),o=A(o||[0,0]);var a=this.getZoom()||0,h=this.getMinZoom(),d=this.getMaxZoom(),_=t.getNorthWest(),v=t.getSouthEast(),y=this.getSize().subtract(o),C=ut(this.project(v,a),this.project(_,a)).getSize(),b=k.any3d?this.options.zoomSnap:1,R=y.x/C.x,N=y.y/C.y,lt=e?Math.max(R,N):Math.min(R,N);return a=this.getScaleZoom(lt,a),b&&(a=Math.round(a/(b/100))*(b/100),a=e?Math.ceil(a/b)*b:Math.floor(a/b)*b),Math.max(h,Math.min(d,a))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new B(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var o=this._getTopLeftPoint(t,e);return new K(o,o.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===void 0?this.getZoom():t)},getPane:function(t){return typeof t=="string"?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var o=this.options.crs;return e=e===void 0?this._zoom:e,o.scale(t)/o.scale(e)},getScaleZoom:function(t,e){var o=this.options.crs;e=e===void 0?this._zoom:e;var a=o.zoom(t*o.scale(e));return isNaN(a)?1/0:a},project:function(t,e){return e=e===void 0?this._zoom:e,this.options.crs.latLngToPoint($(t),e)},unproject:function(t,e){return e=e===void 0?this._zoom:e,this.options.crs.pointToLatLng(A(t),e)},layerPointToLatLng:function(t){var e=A(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){var e=this.project($(t))._round();return e._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng($(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(tt(t))},distance:function(t,e){return this.options.crs.distance($(t),$(e))},containerPointToLayerPoint:function(t){return A(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return A(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(A(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint($(t)))},mouseEventToContainerPoint:function(t){return En(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=Sn(t);if(e){if(e._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");H(e,"scroll",this._onScroll,this),this._containerId=p(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&k.any3d,Z(t,"leaflet-container"+(k.touch?" leaflet-touch":"")+(k.retina?" leaflet-retina":"")+(k.ielt9?" leaflet-oldie":"")+(k.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=le(t,"position");e!=="absolute"&&e!=="relative"&&e!=="fixed"&&e!=="sticky"&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),et(this._mapPane,new B(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Z(t.markerPane,"leaflet-zoom-hide"),Z(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e,o){et(this._mapPane,new B(0,0));var a=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var h=this._zoom!==e;this._moveStart(h,o)._move(t,e)._moveEnd(h),this.fire("viewreset"),a&&this.fire("load")},_moveStart:function(t,e){return t&&this.fire("zoomstart"),e||this.fire("movestart"),this},_move:function(t,e,o,a){e===void 0&&(e=this._zoom);var h=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),a?o&&o.pinch&&this.fire("zoom",o):((h||o&&o.pinch)&&this.fire("zoom",o),this.fire("move",o)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return ot(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){et(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[p(this._container)]=this;var e=t?q:H;e(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),k.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){ot(this._resizeRequest),this._resizeRequest=nt(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var o=[],a,h=e==="mouseout"||e==="mouseover",d=t.target||t.srcElement,_=!1;d;){if(a=this._targets[p(d)],a&&(e==="click"||e==="preclick")&&this._draggableMoved(a)){_=!0;break}if(a&&a.listens(e,!0)&&(h&&!yi(d,t)||(o.push(a),h))||d===this._container)break;d=d.parentNode}return!o.length&&!_&&!h&&this.listens(e,!0)&&(o=[this]),o},_isClickDisabled:function(t){for(;t&&t!==this._container;){if(t._leaflet_disable_click)return!0;t=t.parentNode}},_handleDOMEvent:function(t){var e=t.target||t.srcElement;if(!(!this._loaded||e._leaflet_disable_events||t.type==="click"&&this._isClickDisabled(e))){var o=t.type;o==="mousedown"&&fi(e),this._fireDOMEvent(t,o)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,e,o){if(t.type==="click"){var a=n({},t);a.type="preclick",this._fireDOMEvent(a,a.type,o)}var h=this._findEventTargets(t,e);if(o){for(var d=[],_=0;_<o.length;_++)o[_].listens(e,!0)&&d.push(o[_]);h=d.concat(h)}if(h.length){e==="contextmenu"&&st(t);var v=h[0],y={originalEvent:t};if(t.type!=="keypress"&&t.type!=="keydown"&&t.type!=="keyup"){var C=v.getLatLng&&(!v._radius||v._radius<=10);y.containerPoint=C?this.latLngToContainerPoint(v.getLatLng()):this.mouseEventToContainerPoint(t),y.layerPoint=this.containerPointToLayerPoint(y.containerPoint),y.latlng=C?v.getLatLng():this.layerPointToLatLng(y.layerPoint)}for(_=0;_<h.length;_++)if(h[_].fire(e,y,!0),y.originalEvent._stopped||h[_].options.bubblingMouseEvents===!1&&J(this._mouseEvents,e)!==-1)return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return Gt(this._mapPane)||new B(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){var o=t&&e!==void 0?this._getNewPixelOrigin(t,e):this.getPixelOrigin();return o.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var o=this.getSize()._divideBy(2);return this.project(t,e)._subtract(o)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,o){var a=this._getNewPixelOrigin(o,e);return this.project(t,e)._subtract(a)},_latLngBoundsToNewLayerBounds:function(t,e,o){var a=this._getNewPixelOrigin(o,e);return ut([this.project(t.getSouthWest(),e)._subtract(a),this.project(t.getNorthWest(),e)._subtract(a),this.project(t.getSouthEast(),e)._subtract(a),this.project(t.getNorthEast(),e)._subtract(a)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,o){if(!o)return t;var a=this.project(t,e),h=this.getSize().divideBy(2),d=new K(a.subtract(h),a.add(h)),_=this._getBoundsOffset(d,o,e);return Math.abs(_.x)<=1&&Math.abs(_.y)<=1?t:this.unproject(a.add(_),e)},_limitOffset:function(t,e){if(!e)return t;var o=this.getPixelBounds(),a=new K(o.min.add(t),o.max.add(t));return t.add(this._getBoundsOffset(a,e))},_getBoundsOffset:function(t,e,o){var a=ut(this.project(e.getNorthEast(),o),this.project(e.getSouthWest(),o)),h=a.min.subtract(t.min),d=a.max.subtract(t.max),_=this._rebound(h.x,-d.x),v=this._rebound(h.y,-d.y);return new B(_,v)},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),o=this.getMaxZoom(),a=k.any3d?this.options.zoomSnap:1;return a&&(t=Math.round(t/a)*a),Math.max(e,Math.min(o,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Q(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var o=this._getCenterOffset(t)._trunc();return(e&&e.animate)!==!0&&!this.getSize().contains(o)?!1:(this.panBy(o,e),!0)},_createAnimProxy:function(){var t=this._proxy=j("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(e){var o=si,a=this._proxy.style[o];Nt(this._proxy,this.project(e.center,e.zoom),this.getZoomScale(e.zoom,1)),a===this._proxy.style[o]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){X(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),e=this.getZoom();Nt(this._proxy,this.project(t,e),this.getZoomScale(e,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,o){if(this._animatingZoom)return!0;if(o=o||{},!this._zoomAnimated||o.animate===!1||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var a=this.getZoomScale(e),h=this._getCenterOffset(t)._divideBy(1-1/a);return o.animate!==!0&&!this.getSize().contains(h)?!1:(nt(function(){this._moveStart(!0,o.noMoveStart||!1)._animateZoom(t,e,!0)},this),!0)},_animateZoom:function(t,e,o,a){this._mapPane&&(o&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,Z(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:a}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(c(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Q(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Dr(t,e){return new U(t,e)}var mt=St.extend({options:{position:"topright"},initialize:function(t){S(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),o=this.getPosition(),a=t._controlCorners[o];return Z(e,"leaflet-control"),o.indexOf("bottom")!==-1?a.insertBefore(e,a.firstChild):a.appendChild(e),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(X(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),fe=function(t){return new mt(t)};U.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},e="leaflet-",o=this._controlContainer=j("div",e+"control-container",this._container);function a(h,d){var _=e+h+" "+e+d;t[h+d]=j("div",_,o)}a("top","left"),a("top","right"),a("bottom","left"),a("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)X(this._controlCorners[t]);X(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Rn=mt.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,o,a){return o<a?-1:a<o?1:0}},initialize:function(t,e,o){S(this,o),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var a in t)this._addLayer(t[a],a);for(a in e)this._addLayer(e[a],a,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return mt.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(p(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){Z(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(Z(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):Q(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Q(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=j("div",t),o=this.options.collapsed;e.setAttribute("aria-haspopup",!0),de(e),vi(e);var a=this._section=j("section",t+"-list");o&&(this._map.on("click",this.collapse,this),H(e,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var h=this._layersLink=j("a",t+"-toggle",e);h.href="#",h.title="Layers",h.setAttribute("role","button"),H(h,{keydown:function(d){d.keyCode===13&&this._expandSafely()},click:function(d){st(d),this._expandSafely()}},this),o||this.expand(),this._baseLayersList=j("div",t+"-base",a),this._separator=j("div",t+"-separator",a),this._overlaysList=j("div",t+"-overlays",a),e.appendChild(a)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&p(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,o){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:o}),this.options.sortLayers&&this._layers.sort(c(function(a,h){return this.options.sortFunction(a.layer,h.layer,a.name,h.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;be(this._baseLayersList),be(this._overlaysList),this._layerControlInputs=[];var t,e,o,a,h=0;for(o=0;o<this._layers.length;o++)a=this._layers[o],this._addItem(a),e=e||a.overlay,t=t||!a.overlay,h+=a.overlay?0:1;return this.options.hideSingleBase&&(t=t&&h>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(p(t.target)),o=e.overlay?t.type==="add"?"overlayadd":"overlayremove":t.type==="add"?"baselayerchange":null;o&&this._map.fire(o,e)},_createRadioElement:function(t,e){var o='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",a=document.createElement("div");return a.innerHTML=o,a.firstChild},_addItem:function(t){var e=document.createElement("label"),o=this._map.hasLayer(t.layer),a;t.overlay?(a=document.createElement("input"),a.type="checkbox",a.className="leaflet-control-layers-selector",a.defaultChecked=o):a=this._createRadioElement("leaflet-base-layers_"+p(this),o),this._layerControlInputs.push(a),a.layerId=p(t.layer),H(a,"click",this._onInputClick,this);var h=document.createElement("span");h.innerHTML=" "+t.name;var d=document.createElement("span");e.appendChild(d),d.appendChild(a),d.appendChild(h);var _=t.overlay?this._overlaysList:this._baseLayersList;return _.appendChild(e),this._checkDisabledLayers(),e},_onInputClick:function(){if(!this._preventClick){var t=this._layerControlInputs,e,o,a=[],h=[];this._handlingClick=!0;for(var d=t.length-1;d>=0;d--)e=t[d],o=this._getLayer(e.layerId).layer,e.checked?a.push(o):e.checked||h.push(o);for(d=0;d<h.length;d++)this._map.hasLayer(h[d])&&this._map.removeLayer(h[d]);for(d=0;d<a.length;d++)this._map.hasLayer(a[d])||this._map.addLayer(a[d]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var t=this._layerControlInputs,e,o,a=this._map.getZoom(),h=t.length-1;h>=0;h--)e=t[h],o=this._getLayer(e.layerId).layer,e.disabled=o.options.minZoom!==void 0&&a<o.options.minZoom||o.options.maxZoom!==void 0&&a>o.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var t=this._section;this._preventClick=!0,H(t,"click",st),this.expand();var e=this;setTimeout(function(){q(t,"click",st),e._preventClick=!1})}}),Rr=function(t,e,o){return new Rn(t,e,o)},Li=mt.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",o=j("div",e+" leaflet-bar"),a=this.options;return this._zoomInButton=this._createButton(a.zoomInText,a.zoomInTitle,e+"-in",o,this._zoomIn),this._zoomOutButton=this._createButton(a.zoomOutText,a.zoomOutTitle,e+"-out",o,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),o},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,o,a,h){var d=j("a",o,a);return d.innerHTML=t,d.href="#",d.title=e,d.setAttribute("role","button"),d.setAttribute("aria-label",e),de(d),H(d,"click",$t),H(d,"click",h,this),H(d,"click",this._refocusOnMap,this),d},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";Q(this._zoomInButton,e),Q(this._zoomOutButton,e),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||t._zoom===t.getMinZoom())&&(Z(this._zoomOutButton,e),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||t._zoom===t.getMaxZoom())&&(Z(this._zoomInButton,e),this._zoomInButton.setAttribute("aria-disabled","true"))}});U.mergeOptions({zoomControl:!0}),U.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Li,this.addControl(this.zoomControl))});var Or=function(t){return new Li(t)},On=mt.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e="leaflet-control-scale",o=j("div",e),a=this.options;return this._addScales(a,e+"-line",o),t.on(a.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),o},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,o){t.metric&&(this._mScale=j("div",e,o)),t.imperial&&(this._iScale=j("div",e,o))},_update:function(){var t=this._map,e=t.getSize().y/2,o=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(o)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),o=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,o,e/t)},_updateImperial:function(t){var e=t*3.2808399,o,a,h;e>5280?(o=e/5280,a=this._getRoundNum(o),this._updateScale(this._iScale,a+" mi",a/o)):(h=this._getRoundNum(e),this._updateScale(this._iScale,h+" ft",h/e))},_updateScale:function(t,e,o){t.style.width=Math.round(this.options.maxWidth*o)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),o=t/e;return o=o>=10?10:o>=5?5:o>=3?3:o>=2?2:1,e*o}}),Ir=function(t){return new On(t)},zr='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',wi=mt.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(k.inlineSvg?zr+" ":"")+"Leaflet</a>"},initialize:function(t){S(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=j("div","leaflet-control-attribution"),de(this._container);for(var e in t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),t.on("layeradd",this._addAttribution,this),this._container},onRemove:function(t){t.off("layeradd",this._addAttribution,this)},_addAttribution:function(t){t.layer.getAttribution&&(this.addAttribution(t.layer.getAttribution()),t.layer.once("remove",function(){this.removeAttribution(t.layer.getAttribution())},this))},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var o=[];this.options.prefix&&o.push(this.options.prefix),t.length&&o.push(t.join(", ")),this._container.innerHTML=o.join(' <span aria-hidden="true">|</span> ')}}});U.mergeOptions({attributionControl:!0}),U.addInitHook(function(){this.options.attributionControl&&new wi().addTo(this)});var Ar=function(t){return new wi(t)};mt.Layers=Rn,mt.Zoom=Li,mt.Scale=On,mt.Attribution=wi,fe.layers=Rr,fe.zoom=Or,fe.scale=Ir,fe.attribution=Ar;var xt=St.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});xt.addTo=function(t,e){return t.addHandler(e,this),this};var Fr={Events:dt},In=k.touch?"touchstart mousedown":"mousedown",It=oe.extend({options:{clickTolerance:3},initialize:function(t,e,o,a){S(this,a),this._element=t,this._dragStartTarget=e||t,this._preventOutline=o},enable:function(){this._enabled||(H(this._dragStartTarget,In,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(It._dragging===this&&this.finishDrag(!0),q(this._dragStartTarget,In,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(this._enabled&&(this._moved=!1,!ai(this._element,"leaflet-zoom-anim"))){if(t.touches&&t.touches.length!==1){It._dragging===this&&this.finishDrag();return}if(!(It._dragging||t.shiftKey||t.which!==1&&t.button!==1&&!t.touches)&&(It._dragging=this,this._preventOutline&&fi(this._element),hi(),ue(),!this._moving)){this.fire("down");var e=t.touches?t.touches[0]:t,o=Mn(this._element);this._startPoint=new B(e.clientX,e.clientY),this._startPos=Gt(this._element),this._parentScale=pi(o);var a=t.type==="mousedown";H(document,a?"mousemove":"touchmove",this._onMove,this),H(document,a?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(t){if(this._enabled){if(t.touches&&t.touches.length>1){this._moved=!0;return}var e=t.touches&&t.touches.length===1?t.touches[0]:t,o=new B(e.clientX,e.clientY)._subtract(this._startPoint);!o.x&&!o.y||Math.abs(o.x)+Math.abs(o.y)<this.options.clickTolerance||(o.x/=this._parentScale.x,o.y/=this._parentScale.y,st(t),this._moved||(this.fire("dragstart"),this._moved=!0,Z(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Z(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(o),this._moving=!0,this._lastEvent=t,this._updatePosition())}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),et(this._element,this._newPos),this.fire("drag",t)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(t){Q(document.body,"leaflet-dragging"),this._lastTarget&&(Q(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),q(document,"mousemove touchmove",this._onMove,this),q(document,"mouseup touchend touchcancel",this._onUp,this),ci(),he();var e=this._moved&&this._moving;this._moving=!1,It._dragging=!1,e&&this.fire("dragend",{noInertia:t,distance:this._newPos.distanceTo(this._startPos)})}});function zn(t,e,o){var a,h=[1,4,2,8],d,_,v,y,C,b,R,N;for(d=0,b=t.length;d<b;d++)t[d]._code=Ut(t[d],e);for(v=0;v<4;v++){for(R=h[v],a=[],d=0,b=t.length,_=b-1;d<b;_=d++)y=t[d],C=t[_],y._code&R?C._code&R||(N=Re(C,y,R,e,o),N._code=Ut(N,e),a.push(N)):(C._code&R&&(N=Re(C,y,R,e,o),N._code=Ut(N,e),a.push(N)),a.push(y));t=a}return t}function An(t,e){var o,a,h,d,_,v,y,C,b;if(!t||t.length===0)throw new Error("latlngs not passed");_t(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var R=$([0,0]),N=tt(t),lt=N.getNorthWest().distanceTo(N.getSouthWest())*N.getNorthEast().distanceTo(N.getNorthWest());lt<1700&&(R=xi(t));var rt=t.length,gt=[];for(o=0;o<rt;o++){var ct=$(t[o]);gt.push(e.project($([ct.lat-R.lat,ct.lng-R.lng])))}for(v=y=C=0,o=0,a=rt-1;o<rt;a=o++)h=gt[o],d=gt[a],_=h.y*d.x-d.y*h.x,y+=(h.x+d.x)*_,C+=(h.y+d.y)*_,v+=_*3;v===0?b=gt[0]:b=[y/v,C/v];var ie=e.unproject(A(b));return $([ie.lat+R.lat,ie.lng+R.lng])}function xi(t){for(var e=0,o=0,a=0,h=0;h<t.length;h++){var d=$(t[h]);e+=d.lat,o+=d.lng,a++}return $([e/a,o/a])}var Br={__proto__:null,clipPolygon:zn,polygonCenter:An,centroid:xi};function Fn(t,e){if(!e||!t.length)return t.slice();var o=e*e;return t=Nr(t,o),t=Zr(t,o),t}function Bn(t,e,o){return Math.sqrt(pe(t,e,o,!0))}function Hr(t,e,o){return pe(t,e,o)}function Zr(t,e){var o=t.length,a=typeof Uint8Array<"u"?Uint8Array:Array,h=new a(o);h[0]=h[o-1]=1,Pi(t,h,e,0,o-1);var d,_=[];for(d=0;d<o;d++)h[d]&&_.push(t[d]);return _}function Pi(t,e,o,a,h){var d=0,_,v,y;for(v=a+1;v<=h-1;v++)y=pe(t[v],t[a],t[h],!0),y>d&&(_=v,d=y);d>o&&(e[_]=1,Pi(t,e,o,a,_),Pi(t,e,o,_,h))}function Nr(t,e){for(var o=[t[0]],a=1,h=0,d=t.length;a<d;a++)Gr(t[a],t[h])>e&&(o.push(t[a]),h=a);return h<d-1&&o.push(t[d-1]),o}var Hn;function Zn(t,e,o,a,h){var d=a?Hn:Ut(t,o),_=Ut(e,o),v,y,C;for(Hn=_;;){if(!(d|_))return[t,e];if(d&_)return!1;v=d||_,y=Re(t,e,v,o,h),C=Ut(y,o),v===d?(t=y,d=C):(e=y,_=C)}}function Re(t,e,o,a,h){var d=e.x-t.x,_=e.y-t.y,v=a.min,y=a.max,C,b;return o&8?(C=t.x+d*(y.y-t.y)/_,b=y.y):o&4?(C=t.x+d*(v.y-t.y)/_,b=v.y):o&2?(C=y.x,b=t.y+_*(y.x-t.x)/d):o&1&&(C=v.x,b=t.y+_*(v.x-t.x)/d),new B(C,b,h)}function Ut(t,e){var o=0;return t.x<e.min.x?o|=1:t.x>e.max.x&&(o|=2),t.y<e.min.y?o|=4:t.y>e.max.y&&(o|=8),o}function Gr(t,e){var o=e.x-t.x,a=e.y-t.y;return o*o+a*a}function pe(t,e,o,a){var h=e.x,d=e.y,_=o.x-h,v=o.y-d,y=_*_+v*v,C;return y>0&&(C=((t.x-h)*_+(t.y-d)*v)/y,C>1?(h=o.x,d=o.y):C>0&&(h+=_*C,d+=v*C)),_=t.x-h,v=t.y-d,a?_*_+v*v:new B(h,d)}function _t(t){return!D(t[0])||typeof t[0][0]!="object"&&typeof t[0][0]<"u"}function Nn(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),_t(t)}function Gn(t,e){var o,a,h,d,_,v,y,C;if(!t||t.length===0)throw new Error("latlngs not passed");_t(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var b=$([0,0]),R=tt(t),N=R.getNorthWest().distanceTo(R.getSouthWest())*R.getNorthEast().distanceTo(R.getNorthWest());N<1700&&(b=xi(t));var lt=t.length,rt=[];for(o=0;o<lt;o++){var gt=$(t[o]);rt.push(e.project($([gt.lat-b.lat,gt.lng-b.lng])))}for(o=0,a=0;o<lt-1;o++)a+=rt[o].distanceTo(rt[o+1])/2;if(a===0)C=rt[0];else for(o=0,d=0;o<lt-1;o++)if(_=rt[o],v=rt[o+1],h=_.distanceTo(v),d+=h,d>a){y=(d-a)/h,C=[v.x-y*(v.x-_.x),v.y-y*(v.y-_.y)];break}var ct=e.unproject(A(C));return $([ct.lat+b.lat,ct.lng+b.lng])}var Vr={__proto__:null,simplify:Fn,pointToSegmentDistance:Bn,closestPointOnSegment:Hr,clipSegment:Zn,_getEdgeIntersection:Re,_getBitCode:Ut,_sqClosestPointOnSegment:pe,isFlat:_t,_flat:Nn,polylineCenter:Gn},Ci={project:function(t){return new B(t.lng,t.lat)},unproject:function(t){return new W(t.y,t.x)},bounds:new K([-180,-90],[180,90])},Si={R:6378137,R_MINOR:6356752314245179e-9,bounds:new K([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(t){var e=Math.PI/180,o=this.R,a=t.lat*e,h=this.R_MINOR/o,d=Math.sqrt(1-h*h),_=d*Math.sin(a),v=Math.tan(Math.PI/4-a/2)/Math.pow((1-_)/(1+_),d/2);return a=-o*Math.log(Math.max(v,1e-10)),new B(t.lng*e*o,a)},unproject:function(t){for(var e=180/Math.PI,o=this.R,a=this.R_MINOR/o,h=Math.sqrt(1-a*a),d=Math.exp(-t.y/o),_=Math.PI/2-2*Math.atan(d),v=0,y=.1,C;v<15&&Math.abs(y)>1e-7;v++)C=h*Math.sin(_),C=Math.pow((1-C)/(1+C),h/2),y=Math.PI/2-2*Math.atan(d*C)-_,_+=y;return new W(_*e,t.x*e/o)}},$r={__proto__:null,LonLat:Ci,Mercator:Si,SphericalMercator:Xe},Ur=n({},Ot,{code:"EPSG:3395",projection:Si,transformation:function(){var t=.5/(Math.PI*Si.R);return re(t,.5,-t,.5)}()}),Vn=n({},Ot,{code:"EPSG:4326",projection:Ci,transformation:re(1/180,1,-1/180,.5)}),jr=n({},Mt,{projection:Ci,transformation:re(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var o=e.lng-t.lng,a=e.lat-t.lat;return Math.sqrt(o*o+a*a)},infinite:!0});Mt.Earth=Ot,Mt.EPSG3395=Ur,Mt.EPSG3857=Qe,Mt.EPSG900913=Jo,Mt.EPSG4326=Vn,Mt.Simple=jr;var vt=oe.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[p(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[p(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var o=this.getEvents();e.on(o,this),this.once("remove",function(){e.off(o,this)},this)}this.onAdd(e),this.fire("add"),e.fire("layeradd",{layer:this})}}});U.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var e=p(t);return this._layers[e]?this:(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var e=p(t);return this._layers[e]?(this._loaded&&t.onRemove(this),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return p(t)in this._layers},eachLayer:function(t,e){for(var o in this._layers)t.call(e,this._layers[o]);return this},_addLayers:function(t){t=t?D(t)?t:[t]:[];for(var e=0,o=t.length;e<o;e++)this.addLayer(t[e])},_addZoomLimit:function(t){(!isNaN(t.options.maxZoom)||!isNaN(t.options.minZoom))&&(this._zoomBoundLayers[p(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=p(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-1/0,o=this._getZoomSpan();for(var a in this._zoomBoundLayers){var h=this._zoomBoundLayers[a].options;t=h.minZoom===void 0?t:Math.min(t,h.minZoom),e=h.maxZoom===void 0?e:Math.max(e,h.maxZoom)}this._layersMaxZoom=e===-1/0?void 0:e,this._layersMinZoom=t===1/0?void 0:t,o!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Xt=vt.extend({initialize:function(t,e){S(this,e),this._layers={};var o,a;if(t)for(o=0,a=t.length;o<a;o++)this.addLayer(t[o])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){var e=typeof t=="number"?t:this.getLayerId(t);return e in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e=Array.prototype.slice.call(arguments,1),o,a;for(o in this._layers)a=this._layers[o],a[t]&&a[t].apply(a,e);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var o in this._layers)t.call(e,this._layers[o]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return p(t)}}),Wr=function(t,e){return new Xt(t,e)},bt=Xt.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),Xt.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),Xt.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new ht;for(var e in this._layers){var o=this._layers[e];t.extend(o.getBounds?o.getBounds():o.getLatLng())}return t}}),qr=function(t,e){return new bt(t,e)},Jt=St.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(t){S(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var o=this._getIconUrl(t);if(!o){if(t==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var a=this._createImg(o,e&&e.tagName==="IMG"?e:null);return this._setIconStyles(a,t),(this.options.crossOrigin||this.options.crossOrigin==="")&&(a.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),a},_setIconStyles:function(t,e){var o=this.options,a=o[e+"Size"];typeof a=="number"&&(a=[a,a]);var h=A(a),d=A(e==="shadow"&&o.shadowAnchor||o.iconAnchor||h&&h.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(o.className||""),d&&(t.style.marginLeft=-d.x+"px",t.style.marginTop=-d.y+"px"),h&&(t.style.width=h.x+"px",t.style.height=h.y+"px")},_createImg:function(t,e){return e=e||document.createElement("img"),e.src=t,e},_getIconUrl:function(t){return k.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function Yr(t){return new Jt(t)}var _e=Jt.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return typeof _e.imagePath!="string"&&(_e.imagePath=this._detectIconPath()),(this.options.imagePath||_e.imagePath)+Jt.prototype._getIconUrl.call(this,t)},_stripUrl:function(t){var e=function(o,a,h){var d=a.exec(o);return d&&d[h]};return t=e(t,/^url\((['"])?(.+)\1\)$/,2),t&&e(t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var t=j("div","leaflet-default-icon-path",document.body),e=le(t,"background-image")||le(t,"backgroundImage");if(document.body.removeChild(t),e=this._stripUrl(e),e)return e;var o=document.querySelector('link[href$="leaflet.css"]');return o?o.href.substring(0,o.href.length-11-1):""}}),$n=xt.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new It(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Z(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Q(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e=this._marker,o=e._map,a=this._marker.options.autoPanSpeed,h=this._marker.options.autoPanPadding,d=Gt(e._icon),_=o.getPixelBounds(),v=o.getPixelOrigin(),y=ut(_.min._subtract(v).add(h),_.max._subtract(v).subtract(h));if(!y.contains(d)){var C=A((Math.max(y.max.x,d.x)-y.max.x)/(_.max.x-y.max.x)-(Math.min(y.min.x,d.x)-y.min.x)/(_.min.x-y.min.x),(Math.max(y.max.y,d.y)-y.max.y)/(_.max.y-y.max.y)-(Math.min(y.min.y,d.y)-y.min.y)/(_.min.y-y.min.y)).multiplyBy(a);o.panBy(C,{animate:!1}),this._draggable._newPos._add(C),this._draggable._startPos._add(C),et(e._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=nt(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(ot(this._panRequest),this._panRequest=nt(this._adjustPan.bind(this,t)))},_onDrag:function(t){var e=this._marker,o=e._shadow,a=Gt(e._icon),h=e._map.layerPointToLatLng(a);o&&et(o,a),e._latlng=h,t.latlng=h,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){ot(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),Oe=vt.extend({options:{icon:new _e,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,e){S(this,e),this._latlng=$(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=$(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),o=t.icon.createIcon(this._icon),a=!1;o!==this._icon&&(this._icon&&this._removeIcon(),a=!0,t.title&&(o.title=t.title),o.tagName==="IMG"&&(o.alt=t.alt||"")),Z(o,e),t.keyboard&&(o.tabIndex="0",o.setAttribute("role","button")),this._icon=o,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&H(o,"focus",this._panOnFocus,this);var h=t.icon.createShadow(this._shadow),d=!1;h!==this._shadow&&(this._removeShadow(),d=!0),h&&(Z(h,e),h.alt=""),this._shadow=h,t.opacity<1&&this._updateOpacity(),a&&this.getPane().appendChild(this._icon),this._initInteraction(),h&&d&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&q(this._icon,"focus",this._panOnFocus,this),X(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&X(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&et(this._icon,t),this._shadow&&et(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(Z(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),$n)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new $n(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&pt(this._icon,t),this._shadow&&pt(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var t=this._map;if(t){var e=this.options.icon.options,o=e.iconSize?A(e.iconSize):A(0,0),a=e.iconAnchor?A(e.iconAnchor):A(0,0);t.panInside(this._latlng,{paddingTopLeft:a,paddingBottomRight:o.subtract(a)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Kr(t,e){return new Oe(t,e)}var zt=vt.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return S(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Ie=zt.extend({options:{fill:!0,radius:10},initialize:function(t,e){S(this,e),this._latlng=$(t),this._radius=this.options.radius},setLatLng:function(t){var e=this._latlng;return this._latlng=$(t),this.redraw(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return zt.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,o=this._clickTolerance(),a=[t+o,e+o];this._pxBounds=new K(this._point.subtract(a),this._point.add(a))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Xr(t,e){return new Ie(t,e)}var Mi=Ie.extend({initialize:function(t,e,o){if(typeof e=="number"&&(e=n({},o,{radius:e})),S(this,e),this._latlng=$(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new ht(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:zt.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,o=this._map,a=o.options.crs;if(a.distance===Ot.distance){var h=Math.PI/180,d=this._mRadius/Ot.R/h,_=o.project([e+d,t]),v=o.project([e-d,t]),y=_.add(v).divideBy(2),C=o.unproject(y).lat,b=Math.acos((Math.cos(d*h)-Math.sin(e*h)*Math.sin(C*h))/(Math.cos(e*h)*Math.cos(C*h)))/h;(isNaN(b)||b===0)&&(b=d/Math.cos(Math.PI/180*e)),this._point=y.subtract(o.getPixelOrigin()),this._radius=isNaN(b)?0:y.x-o.project([C,t-b]).x,this._radiusY=y.y-_.y}else{var R=a.unproject(a.project(this._latlng).subtract([this._mRadius,0]));this._point=o.latLngToLayerPoint(this._latlng),this._radius=this._point.x-o.latLngToLayerPoint(R).x}this._updateBounds()}});function Jr(t,e,o){return new Mi(t,e,o)}var Tt=zt.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){S(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e=1/0,o=null,a=pe,h,d,_=0,v=this._parts.length;_<v;_++)for(var y=this._parts[_],C=1,b=y.length;C<b;C++){h=y[C-1],d=y[C];var R=a(t,h,d,!0);R<e&&(e=R,o=a(t,h,d))}return o&&(o.distance=Math.sqrt(e)),o},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Gn(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=$(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new ht,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return _t(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],o=_t(t),a=0,h=t.length;a<h;a++)o?(e[a]=$(t[a]),this._bounds.extend(e[a])):e[a]=this._convertLatLngs(t[a]);return e},_project:function(){var t=new K;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),e=new B(t,t);this._rawPxBounds&&(this._pxBounds=new K([this._rawPxBounds.min.subtract(e),this._rawPxBounds.max.add(e)]))},_projectLatlngs:function(t,e,o){var a=t[0]instanceof W,h=t.length,d,_;if(a){for(_=[],d=0;d<h;d++)_[d]=this._map.latLngToLayerPoint(t[d]),o.extend(_[d]);e.push(_)}else for(d=0;d<h;d++)this._projectLatlngs(t[d],e,o)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}var e=this._parts,o,a,h,d,_,v,y;for(o=0,h=0,d=this._rings.length;o<d;o++)for(y=this._rings[o],a=0,_=y.length;a<_-1;a++)v=Zn(y[a],y[a+1],t,a,!0),v&&(e[h]=e[h]||[],e[h].push(v[0]),(v[1]!==y[a+1]||a===_-2)&&(e[h].push(v[1]),h++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,o=0,a=t.length;o<a;o++)t[o]=Fn(t[o],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var o,a,h,d,_,v,y=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(o=0,d=this._parts.length;o<d;o++)for(v=this._parts[o],a=0,_=v.length,h=_-1;a<_;h=a++)if(!(!e&&a===0)&&Bn(t,v[h],v[a])<=y)return!0;return!1}});function Qr(t,e){return new Tt(t,e)}Tt._flat=Nn;var Qt=Tt.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return An(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(t){var e=Tt.prototype._convertLatLngs.call(this,t),o=e.length;return o>=2&&e[0]instanceof W&&e[0].equals(e[o-1])&&e.pop(),e},_setLatLngs:function(t){Tt.prototype._setLatLngs.call(this,t),_t(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return _t(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,o=new B(e,e);if(t=new K(t.min.subtract(o),t.max.add(o)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}for(var a=0,h=this._rings.length,d;a<h;a++)d=zn(this._rings[a],t,!0),d.length&&this._parts.push(d)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e=!1,o,a,h,d,_,v,y,C;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(d=0,y=this._parts.length;d<y;d++)for(o=this._parts[d],_=0,C=o.length,v=C-1;_<C;v=_++)a=o[_],h=o[v],a.y>t.y!=h.y>t.y&&t.x<(h.x-a.x)*(t.y-a.y)/(h.y-a.y)+a.x&&(e=!e);return e||Tt.prototype._containsPoint.call(this,t,!0)}});function ts(t,e){return new Qt(t,e)}var Et=bt.extend({initialize:function(t,e){S(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e=D(t)?t:t.features,o,a,h;if(e){for(o=0,a=e.length;o<a;o++)h=e[o],(h.geometries||h.geometry||h.features||h.coordinates)&&this.addData(h);return this}var d=this.options;if(d.filter&&!d.filter(t))return this;var _=ze(t,d);return _?(_.feature=Be(t),_.defaultOptions=_.options,this.resetStyle(_),d.onEachFeature&&d.onEachFeature(t,_),this.addLayer(_)):this},resetStyle:function(t){return t===void 0?this.eachLayer(this.resetStyle,this):(t.options=n({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer(function(e){this._setLayerStyle(e,t)},this)},_setLayerStyle:function(t,e){t.setStyle&&(typeof e=="function"&&(e=e(t.feature)),t.setStyle(e))}});function ze(t,e){var o=t.type==="Feature"?t.geometry:t,a=o?o.coordinates:null,h=[],d=e&&e.pointToLayer,_=e&&e.coordsToLatLng||bi,v,y,C,b;if(!a&&!o)return null;switch(o.type){case"Point":return v=_(a),Un(d,t,v,e);case"MultiPoint":for(C=0,b=a.length;C<b;C++)v=_(a[C]),h.push(Un(d,t,v,e));return new bt(h);case"LineString":case"MultiLineString":return y=Ae(a,o.type==="LineString"?0:1,_),new Tt(y,e);case"Polygon":case"MultiPolygon":return y=Ae(a,o.type==="Polygon"?1:2,_),new Qt(y,e);case"GeometryCollection":for(C=0,b=o.geometries.length;C<b;C++){var R=ze({geometry:o.geometries[C],type:"Feature",properties:t.properties},e);R&&h.push(R)}return new bt(h);case"FeatureCollection":for(C=0,b=o.features.length;C<b;C++){var N=ze(o.features[C],e);N&&h.push(N)}return new bt(h);default:throw new Error("Invalid GeoJSON object.")}}function Un(t,e,o,a){return t?t(e,o):new Oe(o,a&&a.markersInheritOptions&&a)}function bi(t){return new W(t[1],t[0],t[2])}function Ae(t,e,o){for(var a=[],h=0,d=t.length,_;h<d;h++)_=e?Ae(t[h],e-1,o):(o||bi)(t[h]),a.push(_);return a}function Ti(t,e){return t=$(t),t.alt!==void 0?[x(t.lng,e),x(t.lat,e),x(t.alt,e)]:[x(t.lng,e),x(t.lat,e)]}function Fe(t,e,o,a){for(var h=[],d=0,_=t.length;d<_;d++)h.push(e?Fe(t[d],_t(t[d])?0:e-1,o,a):Ti(t[d],a));return!e&&o&&h.length>0&&h.push(h[0].slice()),h}function te(t,e){return t.feature?n({},t.feature,{geometry:e}):Be(e)}function Be(t){return t.type==="Feature"||t.type==="FeatureCollection"?t:{type:"Feature",properties:{},geometry:t}}var Ei={toGeoJSON:function(t){return te(this,{type:"Point",coordinates:Ti(this.getLatLng(),t)})}};Oe.include(Ei),Mi.include(Ei),Ie.include(Ei),Tt.include({toGeoJSON:function(t){var e=!_t(this._latlngs),o=Fe(this._latlngs,e?1:0,!1,t);return te(this,{type:(e?"Multi":"")+"LineString",coordinates:o})}}),Qt.include({toGeoJSON:function(t){var e=!_t(this._latlngs),o=e&&!_t(this._latlngs[0]),a=Fe(this._latlngs,o?2:e?1:0,!0,t);return e||(a=[a]),te(this,{type:(o?"Multi":"")+"Polygon",coordinates:a})}}),Xt.include({toMultiPoint:function(t){var e=[];return this.eachLayer(function(o){e.push(o.toGeoJSON(t).geometry.coordinates)}),te(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(t){var e=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(e==="MultiPoint")return this.toMultiPoint(t);var o=e==="GeometryCollection",a=[];return this.eachLayer(function(h){if(h.toGeoJSON){var d=h.toGeoJSON(t);if(o)a.push(d.geometry);else{var _=Be(d);_.type==="FeatureCollection"?a.push.apply(a,_.features):a.push(_)}}}),o?te(this,{geometries:a,type:"GeometryCollection"}):{type:"FeatureCollection",features:a}}});function jn(t,e){return new Et(t,e)}var es=jn,He=vt.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,o){this._url=t,this._bounds=tt(e),S(this,o)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Z(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){X(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&Yt(this._image),this},bringToBack:function(){return this._map&&Kt(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=tt(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._url.tagName==="IMG",e=this._image=t?this._url:j("img");if(Z(e,"leaflet-image-layer"),this._zoomAnimated&&Z(e,"leaflet-zoom-animated"),this.options.className&&Z(e,this.options.className),e.onselectstart=w,e.onmousemove=w,e.onload=c(this.fire,this,"load"),e.onerror=c(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(e.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t){this._url=e.src;return}e.src=this._url,e.alt=this.options.alt},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),o=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;Nt(this._image,o,e)},_reset:function(){var t=this._image,e=new K(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),o=e.getSize();et(t,e.min),t.style.width=o.x+"px",t.style.height=o.y+"px"},_updateOpacity:function(){pt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)},getCenter:function(){return this._bounds.getCenter()}}),is=function(t,e,o){return new He(t,e,o)},Wn=He.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var t=this._url.tagName==="VIDEO",e=this._image=t?this._url:j("video");if(Z(e,"leaflet-image-layer"),this._zoomAnimated&&Z(e,"leaflet-zoom-animated"),this.options.className&&Z(e,this.options.className),e.onselectstart=w,e.onmousemove=w,e.onloadeddata=c(this.fire,this,"load"),t){for(var o=e.getElementsByTagName("source"),a=[],h=0;h<o.length;h++)a.push(o[h].src);this._url=o.length>0?a:[e.src];return}D(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(e.style,"objectFit")&&(e.style.objectFit="fill"),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop,e.muted=!!this.options.muted,e.playsInline=!!this.options.playsInline;for(var d=0;d<this._url.length;d++){var _=j("source");_.src=this._url[d],e.appendChild(_)}}});function ns(t,e,o){return new Wn(t,e,o)}var qn=He.extend({_initImage:function(){var t=this._image=this._url;Z(t,"leaflet-image-layer"),this._zoomAnimated&&Z(t,"leaflet-zoom-animated"),this.options.className&&Z(t,this.options.className),t.onselectstart=w,t.onmousemove=w}});function os(t,e,o){return new qn(t,e,o)}var Pt=vt.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(t,e){t&&(t instanceof W||D(t))?(this._latlng=$(t),S(this,e)):(S(this,t),this._source=e),this.options.content&&(this._content=this.options.content)},openOn:function(t){return t=arguments.length?t:this._source._map,t.hasLayer(this)||t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(t){return this._map?this.close():(arguments.length?this._source=t:t=this._source,this._prepareOpen(),this.openOn(t._map)),this},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&pt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&pt(this._container,1),this.bringToFront(),this.options.interactive&&(Z(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(t){t._fadeAnimated?(pt(this._container,0),this._removeTimeout=setTimeout(c(X,void 0,this._container),200)):X(this._container),this.options.interactive&&(Q(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=$(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Yt(this._container),this},bringToBack:function(){return this._map&&Kt(this._container),this},_prepareOpen:function(t){var e=this._source;if(!e._map)return!1;if(e instanceof bt){e=null;var o=this._source._layers;for(var a in o)if(o[a]._map){e=o[a];break}if(!e)return!1;this._source=e}if(!t)if(e.getCenter)t=e.getCenter();else if(e.getLatLng)t=e.getLatLng();else if(e.getBounds)t=e.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(t),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var t=this._contentNode,e=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof e=="string")t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=A(this.options.offset),o=this._getAnchor();this._zoomAnimated?et(this._container,t.add(o)):e=e.add(t).add(o);var a=this._containerBottom=-e.y,h=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=a+"px",this._container.style.left=h+"px"}},_getAnchor:function(){return[0,0]}});U.include({_initOverlay:function(t,e,o,a){var h=e;return h instanceof t||(h=new t(a).setContent(e)),o&&h.setLatLng(o),h}}),vt.include({_initOverlay:function(t,e,o,a){var h=o;return h instanceof t?(S(h,a),h._source=this):(h=e&&!a?e:new t(a,this),h.setContent(o)),h}});var Ze=Pt.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t=arguments.length?t:this._source._map,!t.hasLayer(this)&&t._popup&&t._popup.options.autoClose&&t.removeLayer(t._popup),t._popup=this,Pt.prototype.openOn.call(this,t)},onAdd:function(t){Pt.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof zt||this._source.on("preclick",Vt))},onRemove:function(t){Pt.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof zt||this._source.off("preclick",Vt))},getEvents:function(){var t=Pt.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this.close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_initLayout:function(){var t="leaflet-popup",e=this._container=j("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),o=this._wrapper=j("div",t+"-content-wrapper",e);if(this._contentNode=j("div",t+"-content",o),de(e),vi(this._contentNode),H(e,"contextmenu",Vt),this._tipContainer=j("div",t+"-tip-container",e),this._tip=j("div",t+"-tip",this._tipContainer),this.options.closeButton){var a=this._closeButton=j("a",t+"-close-button",e);a.setAttribute("role","button"),a.setAttribute("aria-label","Close popup"),a.href="#close",a.innerHTML='<span aria-hidden="true">&#215;</span>',H(a,"click",function(h){st(h),this.close()},this)}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var o=t.offsetWidth;o=Math.min(o,this.options.maxWidth),o=Math.max(o,this.options.minWidth),e.width=o+1+"px",e.whiteSpace="",e.height="";var a=t.offsetHeight,h=this.options.maxHeight,d="leaflet-popup-scrolled";h&&a>h?(e.height=h+"px",Z(t,d)):Q(t,d),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),o=this._getAnchor();et(this._container,e.add(o))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var t=this._map,e=parseInt(le(this._container,"marginBottom"),10)||0,o=this._container.offsetHeight+e,a=this._containerWidth,h=new B(this._containerLeft,-o-this._containerBottom);h._add(Gt(this._container));var d=t.layerPointToContainerPoint(h),_=A(this.options.autoPanPadding),v=A(this.options.autoPanPaddingTopLeft||_),y=A(this.options.autoPanPaddingBottomRight||_),C=t.getSize(),b=0,R=0;d.x+a+y.x>C.x&&(b=d.x+a-C.x+y.x),d.x-b-v.x<0&&(b=d.x-v.x),d.y+o+y.y>C.y&&(R=d.y+o-C.y+y.y),d.y-R-v.y<0&&(R=d.y-v.y),(b||R)&&(this.options.keepInView&&(this._autopanning=!0),t.fire("autopanstart").panBy([b,R]))}},_getAnchor:function(){return A(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),rs=function(t,e){return new Ze(t,e)};U.mergeOptions({closePopupOnClick:!0}),U.include({openPopup:function(t,e,o){return this._initOverlay(Ze,t,e,o).openOn(this),this},closePopup:function(t){return t=arguments.length?t:this._popup,t&&t.close(),this}}),vt.include({bindPopup:function(t,e){return this._popup=this._initOverlay(Ze,this._popup,t,e),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t){return this._popup&&(this instanceof bt||(this._popup._source=this),this._popup._prepareOpen(t||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){if(!(!this._popup||!this._map)){$t(t);var e=t.layer||t.target;if(this._popup._source===e&&!(e instanceof zt)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(t.latlng);return}this._popup._source=e,this.openPopup(t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){t.originalEvent.keyCode===13&&this._openPopup(t)}});var Ne=Pt.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){Pt.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){Pt.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=Pt.prototype.getEvents.call(this);return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){var t="leaflet-tooltip",e=t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=j("div",e),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+p(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e,o,a=this._map,h=this._container,d=a.latLngToContainerPoint(a.getCenter()),_=a.layerPointToContainerPoint(t),v=this.options.direction,y=h.offsetWidth,C=h.offsetHeight,b=A(this.options.offset),R=this._getAnchor();v==="top"?(e=y/2,o=C):v==="bottom"?(e=y/2,o=0):v==="center"?(e=y/2,o=C/2):v==="right"?(e=0,o=C/2):v==="left"?(e=y,o=C/2):_.x<d.x?(v="right",e=0,o=C/2):(v="left",e=y+(b.x+R.x)*2,o=C/2),t=t.subtract(A(e,o,!0)).add(b).add(R),Q(h,"leaflet-tooltip-right"),Q(h,"leaflet-tooltip-left"),Q(h,"leaflet-tooltip-top"),Q(h,"leaflet-tooltip-bottom"),Z(h,"leaflet-tooltip-"+v),et(h,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&pt(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return A(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),ss=function(t,e){return new Ne(t,e)};U.include({openTooltip:function(t,e,o){return this._initOverlay(Ne,t,e,o).openOn(this),this},closeTooltip:function(t){return t.close(),this}}),vt.include({bindTooltip:function(t,e){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Ne,this._tooltip,t,e),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(!(!t&&this._tooltipHandlersAdded)){var e=t?"off":"on",o={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?o.add=this._openTooltip:(o.mouseover=this._openTooltip,o.mouseout=this.closeTooltip,o.click=this._openTooltip,this._map?this._addFocusListeners():o.add=this._addFocusListeners),this._tooltip.options.sticky&&(o.mousemove=this._moveTooltip),this[e](o),this._tooltipHandlersAdded=!t}},openTooltip:function(t){return this._tooltip&&(this instanceof bt||(this._tooltip._source=this),this._tooltip._prepareOpen(t)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(t){var e=typeof t.getElement=="function"&&t.getElement();e&&(H(e,"focus",function(){this._tooltip._source=t,this.openTooltip()},this),H(e,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(t){var e=typeof t.getElement=="function"&&t.getElement();e&&e.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(t){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var e=this;this._map.once("moveend",function(){e._openOnceFlag=!1,e._openTooltip(t)});return}this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0)}},_moveTooltip:function(t){var e=t.latlng,o,a;this._tooltip.options.sticky&&t.originalEvent&&(o=this._map.mouseEventToContainerPoint(t.originalEvent),a=this._map.containerPointToLayerPoint(o),e=this._map.layerPointToLatLng(a)),this._tooltip.setLatLng(e)}});var Yn=Jt.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&t.tagName==="DIV"?t:document.createElement("div"),o=this.options;if(o.html instanceof Element?(be(e),e.appendChild(o.html)):e.innerHTML=o.html!==!1?o.html:"",o.bgPos){var a=A(o.bgPos);e.style.backgroundPosition=-a.x+"px "+-a.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}});function as(t){return new Yn(t)}Jt.Default=_e;var ge=vt.extend({options:{tileSize:256,opacity:1,updateWhenIdle:k.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){S(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),X(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Yt(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Kt(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var t=this._clampZoom(this._map.getZoom());t!==this._tileZoom&&(this._tileZoom=t,this._updateLevels()),this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=g(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof B?t:new B(t,t)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e=this.getPane().children,o=-t(-1/0,1/0),a=0,h=e.length,d;a<h;a++)d=e[a].style.zIndex,e[a]!==this._container&&d&&(o=t(o,+d));isFinite(o)&&(this.options.zIndex=o+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!k.ielt9){pt(this._container,this.options.opacity);var t=+new Date,e=!1,o=!1;for(var a in this._tiles){var h=this._tiles[a];if(!(!h.current||!h.loaded)){var d=Math.min(1,(t-h.loaded)/200);pt(h.el,d),d<1?e=!0:(h.active?o=!0:this._onOpaqueTile(h),h.active=!0)}}o&&!this._noPrune&&this._pruneTiles(),e&&(ot(this._fadeFrame),this._fadeFrame=nt(this._updateOpacity,this))}},_onOpaqueTile:w,_initContainer:function(){this._container||(this._container=j("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(t!==void 0){for(var o in this._levels)o=Number(o),this._levels[o].el.children.length||o===t?(this._levels[o].el.style.zIndex=e-Math.abs(t-o),this._onUpdateLevel(o)):(X(this._levels[o].el),this._removeTilesAtZoom(o),this._onRemoveLevel(o),delete this._levels[o]);var a=this._levels[t],h=this._map;return a||(a=this._levels[t]={},a.el=j("div","leaflet-tile-container leaflet-zoom-animated",this._container),a.el.style.zIndex=e,a.origin=h.project(h.unproject(h.getPixelOrigin()),t).round(),a.zoom=t,this._setZoomTransform(a,h.getCenter(),h.getZoom()),w(a.el.offsetWidth),this._onCreateLevel(a)),this._level=a,a}},_onUpdateLevel:w,_onRemoveLevel:w,_onCreateLevel:w,_pruneTiles:function(){if(this._map){var t,e,o=this._map.getZoom();if(o>this.options.maxZoom||o<this.options.minZoom){this._removeAllTiles();return}for(t in this._tiles)e=this._tiles[t],e.retain=e.current;for(t in this._tiles)if(e=this._tiles[t],e.current&&!e.active){var a=e.coords;this._retainParent(a.x,a.y,a.z,a.z-5)||this._retainChildren(a.x,a.y,a.z,a.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)X(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,e,o,a){var h=Math.floor(t/2),d=Math.floor(e/2),_=o-1,v=new B(+h,+d);v.z=+_;var y=this._tileCoordsToKey(v),C=this._tiles[y];return C&&C.active?(C.retain=!0,!0):(C&&C.loaded&&(C.retain=!0),_>a?this._retainParent(h,d,_,a):!1)},_retainChildren:function(t,e,o,a){for(var h=2*t;h<2*t+2;h++)for(var d=2*e;d<2*e+2;d++){var _=new B(h,d);_.z=o+1;var v=this._tileCoordsToKey(_),y=this._tiles[v];if(y&&y.active){y.retain=!0;continue}else y&&y.loaded&&(y.retain=!0);o+1<a&&this._retainChildren(h,d,o+1,a)}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return e.minNativeZoom!==void 0&&t<e.minNativeZoom?e.minNativeZoom:e.maxNativeZoom!==void 0&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,o,a){var h=Math.round(e);this.options.maxZoom!==void 0&&h>this.options.maxZoom||this.options.minZoom!==void 0&&h<this.options.minZoom?h=void 0:h=this._clampZoom(h);var d=this.options.updateWhenZooming&&h!==this._tileZoom;(!a||d)&&(this._tileZoom=h,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),h!==void 0&&this._update(t),o||this._pruneTiles(),this._noPrune=!!o),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var o in this._levels)this._setZoomTransform(this._levels[o],t,e)},_setZoomTransform:function(t,e,o){var a=this._map.getZoomScale(o,t.zoom),h=t.origin.multiplyBy(a).subtract(this._map._getNewPixelOrigin(e,o)).round();k.any3d?Nt(t.el,h,a):et(t.el,h)},_resetGrid:function(){var t=this._map,e=t.options.crs,o=this._tileSize=this.getTileSize(),a=this._tileZoom,h=this._map.getPixelWorldBounds(this._tileZoom);h&&(this._globalTileRange=this._pxBoundsToTileRange(h)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],a).x/o.x),Math.ceil(t.project([0,e.wrapLng[1]],a).x/o.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],a).y/o.x),Math.ceil(t.project([e.wrapLat[1],0],a).y/o.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(t){var e=this._map,o=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),a=e.getZoomScale(o,this._tileZoom),h=e.project(t,this._tileZoom).floor(),d=e.getSize().divideBy(a*2);return new K(h.subtract(d),h.add(d))},_update:function(t){var e=this._map;if(e){var o=this._clampZoom(e.getZoom());if(t===void 0&&(t=e.getCenter()),this._tileZoom!==void 0){var a=this._getTiledPixelBounds(t),h=this._pxBoundsToTileRange(a),d=h.getCenter(),_=[],v=this.options.keepBuffer,y=new K(h.getBottomLeft().subtract([v,-v]),h.getTopRight().add([v,-v]));if(!(isFinite(h.min.x)&&isFinite(h.min.y)&&isFinite(h.max.x)&&isFinite(h.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var C in this._tiles){var b=this._tiles[C].coords;(b.z!==this._tileZoom||!y.contains(new B(b.x,b.y)))&&(this._tiles[C].current=!1)}if(Math.abs(o-this._tileZoom)>1){this._setView(t,o);return}for(var R=h.min.y;R<=h.max.y;R++)for(var N=h.min.x;N<=h.max.x;N++){var lt=new B(N,R);if(lt.z=this._tileZoom,!!this._isValidTile(lt)){var rt=this._tiles[this._tileCoordsToKey(lt)];rt?rt.current=!0:_.push(lt)}}if(_.sort(function(ct,ie){return ct.distanceTo(d)-ie.distanceTo(d)}),_.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var gt=document.createDocumentFragment();for(N=0;N<_.length;N++)this._addTile(_[N],gt);this._level.el.appendChild(gt)}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var o=this._globalTileRange;if(!e.wrapLng&&(t.x<o.min.x||t.x>o.max.x)||!e.wrapLat&&(t.y<o.min.y||t.y>o.max.y))return!1}if(!this.options.bounds)return!0;var a=this._tileCoordsToBounds(t);return tt(this.options.bounds).overlaps(a)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,o=this.getTileSize(),a=t.scaleBy(o),h=a.add(o),d=e.unproject(a,t.z),_=e.unproject(h,t.z);return[d,_]},_tileCoordsToBounds:function(t){var e=this._tileCoordsToNwSe(t),o=new ht(e[0],e[1]);return this.options.noWrap||(o=this._map.wrapLatLngBounds(o)),o},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),o=new B(+e[0],+e[1]);return o.z=+e[2],o},_removeTile:function(t){var e=this._tiles[t];e&&(X(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){Z(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=w,t.onmousemove=w,k.ielt9&&this.options.opacity<1&&pt(t,this.options.opacity)},_addTile:function(t,e){var o=this._getTilePos(t),a=this._tileCoordsToKey(t),h=this.createTile(this._wrapCoords(t),c(this._tileReady,this,t));this._initTile(h),this.createTile.length<2&&nt(c(this._tileReady,this,t,null,h)),et(h,o),this._tiles[a]={el:h,coords:t,current:!0},e.appendChild(h),this.fire("tileloadstart",{tile:h,coords:t})},_tileReady:function(t,e,o){e&&this.fire("tileerror",{error:e,tile:o,coords:t});var a=this._tileCoordsToKey(t);o=this._tiles[a],o&&(o.loaded=+new Date,this._map._fadeAnimated?(pt(o.el,0),ot(this._fadeFrame),this._fadeFrame=nt(this._updateOpacity,this)):(o.active=!0,this._pruneTiles()),e||(Z(o.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:o.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),k.ielt9||!this._map._fadeAnimated?nt(this._pruneTiles,this):setTimeout(c(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new B(this._wrapX?m(t.x,this._wrapX):t.x,this._wrapY?m(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new K(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function ls(t){return new ge(t)}var ee=ge.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,e){this._url=t,e=S(this,e),e.detectRetina&&k.retina&&e.maxZoom>0?(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom=Math.min(e.maxZoom,e.minZoom+1)):(e.zoomOffset++,e.maxZoom=Math.max(e.minZoom,e.maxZoom-1)),e.minZoom=Math.max(0,e.minZoom)):e.zoomReverse?e.minZoom=Math.min(e.maxZoom,e.minZoom):e.maxZoom=Math.max(e.minZoom,e.maxZoom),typeof e.subdomains=="string"&&(e.subdomains=e.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url===t&&e===void 0&&(e=!0),this._url=t,e||this.redraw(),this},createTile:function(t,e){var o=document.createElement("img");return H(o,"load",c(this._tileOnLoad,this,e,o)),H(o,"error",c(this._tileOnError,this,e,o)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(o.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(o.referrerPolicy=this.options.referrerPolicy),o.alt="",o.src=this.getTileUrl(t),o},getTileUrl:function(t){var e={r:k.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var o=this._globalTileRange.max.y-t.y;this.options.tms&&(e.y=o),e["-y"]=o}return V(this._url,n(e,this.options))},_tileOnLoad:function(t,e){k.ielt9?setTimeout(c(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,o){var a=this.options.errorTileUrl;a&&e.getAttribute("src")!==a&&(e.src=a),t(o,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom,o=this.options.zoomReverse,a=this.options.zoomOffset;return o&&(t=e-t),t+a},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)if(this._tiles[t].coords.z!==this._tileZoom&&(e=this._tiles[t].el,e.onload=w,e.onerror=w,!e.complete)){e.src=Y;var o=this._tiles[t].coords;X(e),delete this._tiles[t],this.fire("tileabort",{tile:e,coords:o})}},_removeTile:function(t){var e=this._tiles[t];if(e)return e.el.setAttribute("src",Y),ge.prototype._removeTile.call(this,t)},_tileReady:function(t,e,o){if(!(!this._map||o&&o.getAttribute("src")===Y))return ge.prototype._tileReady.call(this,t,e,o)}});function Kn(t,e){return new ee(t,e)}var Xn=ee.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,e){this._url=t;var o=n({},this.defaultWmsParams);for(var a in e)a in this.options||(o[a]=e[a]);e=S(this,e);var h=e.detectRetina&&k.retina?2:1,d=this.getTileSize();o.width=d.x*h,o.height=d.y*h,this.wmsParams=o},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,ee.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),o=this._crs,a=ut(o.project(e[0]),o.project(e[1])),h=a.min,d=a.max,_=(this._wmsVersion>=1.3&&this._crs===Vn?[h.y,h.x,d.y,d.x]:[h.x,h.y,d.x,d.y]).join(","),v=ee.prototype.getTileUrl.call(this,t);return v+O(this.wmsParams,v,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+_},setParams:function(t,e){return n(this.wmsParams,t),e||this.redraw(),this}});function us(t,e){return new Xn(t,e)}ee.WMS=Xn,Kn.wms=us;var kt=vt.extend({options:{padding:.1},initialize:function(t){S(this,t),p(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Z(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var o=this._map.getZoomScale(e,this._zoom),a=this._map.getSize().multiplyBy(.5+this.options.padding),h=this._map.project(this._center,e),d=a.multiplyBy(-o).add(h).subtract(this._map._getNewPixelOrigin(t,e));k.any3d?Nt(this._container,d,o):et(this._container,d)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),o=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new K(o,o.add(e.multiplyBy(1+t*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Jn=kt.extend({options:{tolerance:0},getEvents:function(){var t=kt.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){kt.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");H(t,"mousemove",this._onMouseMove,this),H(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),H(t,"mouseout",this._handleMouseOut,this),t._leaflet_disable_events=!0,this._ctx=t.getContext("2d")},_destroyContainer:function(){ot(this._redrawRequest),delete this._ctx,X(this._container),q(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var t;this._redrawBounds=null;for(var e in this._layers)t=this._layers[e],t._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){kt.prototype._update.call(this);var t=this._bounds,e=this._container,o=t.getSize(),a=k.retina?2:1;et(e,t.min),e.width=a*o.x,e.height=a*o.y,e.style.width=o.x+"px",e.style.height=o.y+"px",k.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){kt.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[p(t)]=t;var e=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,o=e.next,a=e.prev;o?o.prev=a:this._drawLast=a,a?a.next=o:this._drawFirst=o,delete t._order,delete this._layers[p(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(typeof t.options.dashArray=="string"){var e=t.options.dashArray.split(/[, ]+/),o=[],a,h;for(h=0;h<e.length;h++){if(a=Number(e[h]),isNaN(a))return;o.push(a)}t.options._dashArray=o}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||nt(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new K,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var o=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,o.x,o.y),this._ctx.clip()}this._drawing=!0;for(var a=this._drawFirst;a;a=a.next)t=a.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var o,a,h,d,_=t._parts,v=_.length,y=this._ctx;if(v){for(y.beginPath(),o=0;o<v;o++){for(a=0,h=_[o].length;a<h;a++)d=_[o][a],y[a?"lineTo":"moveTo"](d.x,d.y);e&&y.closePath()}this._fillStroke(y,t)}}},_updateCircle:function(t){if(!(!this._drawing||t._empty())){var e=t._point,o=this._ctx,a=Math.max(Math.round(t._radius),1),h=(Math.max(Math.round(t._radiusY),1)||a)/a;h!==1&&(o.save(),o.scale(1,h)),o.beginPath(),o.arc(e.x,e.y/h,a,0,Math.PI*2,!1),h!==1&&o.restore(),this._fillStroke(o,t)}},_fillStroke:function(t,e){var o=e.options;o.fill&&(t.globalAlpha=o.fillOpacity,t.fillStyle=o.fillColor||o.color,t.fill(o.fillRule||"evenodd")),o.stroke&&o.weight!==0&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=o.opacity,t.lineWidth=o.weight,t.strokeStyle=o.color,t.lineCap=o.lineCap,t.lineJoin=o.lineJoin,t.stroke())},_onClick:function(t){for(var e=this._map.mouseEventToLayerPoint(t),o,a,h=this._drawFirst;h;h=h.next)o=h.layer,o.options.interactive&&o._containsPoint(e)&&(!(t.type==="click"||t.type==="preclick")||!this._map._draggableMoved(o))&&(a=o);this._fireEvent(a?[a]:!1,t)},_onMouseMove:function(t){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(Q(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,e){if(!this._mouseHoverThrottled){for(var o,a,h=this._drawFirst;h;h=h.next)o=h.layer,o.options.interactive&&o._containsPoint(e)&&(a=o);a!==this._hoveredLayer&&(this._handleMouseOut(t),a&&(Z(this._container,"leaflet-interactive"),this._fireEvent([a],t,"mouseover"),this._hoveredLayer=a)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,t),this._mouseHoverThrottled=!0,setTimeout(c(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,e,o){this._map._fireDOMEvent(e,o||e.type,t)},_bringToFront:function(t){var e=t._order;if(e){var o=e.next,a=e.prev;if(o)o.prev=a;else return;a?a.next=o:o&&(this._drawFirst=o),e.prev=this._drawLast,this._drawLast.next=e,e.next=null,this._drawLast=e,this._requestRedraw(t)}},_bringToBack:function(t){var e=t._order;if(e){var o=e.next,a=e.prev;if(a)a.next=o;else return;o?o.prev=a:a&&(this._drawLast=a),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t)}}});function Qn(t){return k.canvas?new Jn(t):null}var me=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch{}return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),hs={_initContainer:function(){this._container=j("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(kt.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=me("shape");Z(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=me("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[p(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;X(e),t.removeInteractiveTarget(e),delete this._layers[p(t)]},_updateStyle:function(t){var e=t._stroke,o=t._fill,a=t.options,h=t._container;h.stroked=!!a.stroke,h.filled=!!a.fill,a.stroke?(e||(e=t._stroke=me("stroke")),h.appendChild(e),e.weight=a.weight+"px",e.color=a.color,e.opacity=a.opacity,a.dashArray?e.dashStyle=D(a.dashArray)?a.dashArray.join(" "):a.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=a.lineCap.replace("butt","flat"),e.joinstyle=a.lineJoin):e&&(h.removeChild(e),t._stroke=null),a.fill?(o||(o=t._fill=me("fill")),h.appendChild(o),o.color=a.fillColor||a.color,o.opacity=a.fillOpacity):o&&(h.removeChild(o),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),o=Math.round(t._radius),a=Math.round(t._radiusY||o);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+o+","+a+" 0,"+65535*360)},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){Yt(t._container)},_bringToBack:function(t){Kt(t._container)}},Ge=k.vml?me:nn,ve=kt.extend({_initContainer:function(){this._container=Ge("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Ge("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){X(this._container),q(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){kt.prototype._update.call(this);var t=this._bounds,e=t.getSize(),o=this._container;(!this._svgSize||!this._svgSize.equals(e))&&(this._svgSize=e,o.setAttribute("width",e.x),o.setAttribute("height",e.y)),et(o,t.min),o.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=Ge("path");t.options.className&&Z(e,t.options.className),t.options.interactive&&Z(e,"leaflet-interactive"),this._updateStyle(t),this._layers[p(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){X(t._path),t.removeInteractiveTarget(t._path),delete this._layers[p(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,o=t.options;e&&(o.stroke?(e.setAttribute("stroke",o.color),e.setAttribute("stroke-opacity",o.opacity),e.setAttribute("stroke-width",o.weight),e.setAttribute("stroke-linecap",o.lineCap),e.setAttribute("stroke-linejoin",o.lineJoin),o.dashArray?e.setAttribute("stroke-dasharray",o.dashArray):e.removeAttribute("stroke-dasharray"),o.dashOffset?e.setAttribute("stroke-dashoffset",o.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),o.fill?(e.setAttribute("fill",o.fillColor||o.color),e.setAttribute("fill-opacity",o.fillOpacity),e.setAttribute("fill-rule",o.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,on(t._parts,e))},_updateCircle:function(t){var e=t._point,o=Math.max(Math.round(t._radius),1),a=Math.max(Math.round(t._radiusY),1)||o,h="a"+o+","+a+" 0 1,0 ",d=t._empty()?"M0 0":"M"+(e.x-o)+","+e.y+h+o*2+",0 "+h+-o*2+",0 ";this._setPath(t,d)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){Yt(t._path)},_bringToBack:function(t){Kt(t._path)}});k.vml&&ve.include(hs);function to(t){return k.svg||k.vml?new ve(t):null}U.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this._createRenderer()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if(t==="overlayPane"||t===void 0)return!1;var e=this._paneRenderers[t];return e===void 0&&(e=this._createRenderer({pane:t}),this._paneRenderers[t]=e),e},_createRenderer:function(t){return this.options.preferCanvas&&Qn(t)||to(t)}});var eo=Qt.extend({initialize:function(t,e){Qt.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=tt(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function cs(t,e){return new eo(t,e)}ve.create=Ge,ve.pointsToPath=on,Et.geometryToLayer=ze,Et.coordsToLatLng=bi,Et.coordsToLatLngs=Ae,Et.latLngToCoords=Ti,Et.latLngsToCoords=Fe,Et.getFeature=te,Et.asFeature=Be,U.mergeOptions({boxZoom:!0});var io=xt.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){H(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){q(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){X(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||t.which!==1&&t.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),ue(),hi(),this._startPoint=this._map.mouseEventToContainerPoint(t),H(document,{contextmenu:$t,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=j("div","leaflet-zoom-box",this._container),Z(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new K(this._point,this._startPoint),o=e.getSize();et(this._box,e.min),this._box.style.width=o.x+"px",this._box.style.height=o.y+"px"},_finish:function(){this._moved&&(X(this._box),Q(this._container,"leaflet-crosshair")),he(),ci(),q(document,{contextmenu:$t,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if(!(t.which!==1&&t.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(c(this._resetState,this),0);var e=new ht(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){t.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});U.addInitHook("addHandler","boxZoom",io),U.mergeOptions({doubleClickZoom:!0});var no=xt.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,o=e.getZoom(),a=e.options.zoomDelta,h=t.originalEvent.shiftKey?o-a:o+a;e.options.doubleClickZoom==="center"?e.setZoom(h):e.setZoomAround(t.containerPoint,h)}});U.addInitHook("addHandler","doubleClickZoom",no),U.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var oo=xt.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new It(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}Z(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Q(this._map._container,"leaflet-grab"),Q(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=tt(this._map.options.maxBounds);this._offsetLimit=ut(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,o=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(o),this._times.push(e),this._prunePositions(e)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),o=this._initialWorldOffset,a=this._draggable._newPos.x,h=(a-e+o)%t+e-o,d=(a+e+o)%t-e-o,_=Math.abs(h+o)<Math.abs(d+o)?h:d;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=_},_onDragEnd:function(t){var e=this._map,o=e.options,a=!o.inertia||t.noInertia||this._times.length<2;if(e.fire("dragend",t),a)e.fire("moveend");else{this._prunePositions(+new Date);var h=this._lastPos.subtract(this._positions[0]),d=(this._lastTime-this._times[0])/1e3,_=o.easeLinearity,v=h.multiplyBy(_/d),y=v.distanceTo([0,0]),C=Math.min(o.inertiaMaxSpeed,y),b=v.multiplyBy(C/y),R=C/(o.inertiaDeceleration*_),N=b.multiplyBy(-R/2).round();!N.x&&!N.y?e.fire("moveend"):(N=e._limitOffset(N,e.options.maxBounds),nt(function(){e.panBy(N,{duration:R,easeLinearity:_,noMoveStart:!0,animate:!0})}))}}});U.addInitHook("addHandler","dragging",oo),U.mergeOptions({keyboard:!0,keyboardPanDelta:80});var ro=xt.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),H(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),q(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,e=document.documentElement,o=t.scrollTop||e.scrollTop,a=t.scrollLeft||e.scrollLeft;this._map._container.focus(),window.scrollTo(a,o)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e=this._panKeys={},o=this.keyCodes,a,h;for(a=0,h=o.left.length;a<h;a++)e[o.left[a]]=[-1*t,0];for(a=0,h=o.right.length;a<h;a++)e[o.right[a]]=[t,0];for(a=0,h=o.down.length;a<h;a++)e[o.down[a]]=[0,t];for(a=0,h=o.up.length;a<h;a++)e[o.up[a]]=[0,-1*t]},_setZoomDelta:function(t){var e=this._zoomKeys={},o=this.keyCodes,a,h;for(a=0,h=o.zoomIn.length;a<h;a++)e[o.zoomIn[a]]=t;for(a=0,h=o.zoomOut.length;a<h;a++)e[o.zoomOut[a]]=-t},_addHooks:function(){H(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){q(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e=t.keyCode,o=this._map,a;if(e in this._panKeys){if(!o._panAnim||!o._panAnim._inProgress)if(a=this._panKeys[e],t.shiftKey&&(a=A(a).multiplyBy(3)),o.options.maxBounds&&(a=o._limitOffset(A(a),o.options.maxBounds)),o.options.worldCopyJump){var h=o.wrapLatLng(o.unproject(o.project(o.getCenter()).add(a)));o.panTo(h)}else o.panBy(a)}else if(e in this._zoomKeys)o.setZoom(o.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[e]);else if(e===27&&o._popup&&o._popup.options.closeOnEscapeKey)o.closePopup();else return;$t(t)}}});U.addInitHook("addHandler","keyboard",ro),U.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var so=xt.extend({addHooks:function(){H(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){q(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=kn(t),o=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var a=Math.max(o-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(c(this._performZoom,this),a),$t(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),o=this._map.options.zoomSnap||0;t._stop();var a=this._delta/(this._map.options.wheelPxPerZoomLevel*4),h=4*Math.log(2/(1+Math.exp(-Math.abs(a))))/Math.LN2,d=o?Math.ceil(h/o)*o:h,_=t._limitZoom(e+(this._delta>0?d:-d))-e;this._delta=0,this._startTime=null,_&&(t.options.scrollWheelZoom==="center"?t.setZoom(e+_):t.setZoomAround(this._lastMousePos,e+_))}});U.addInitHook("addHandler","scrollWheelZoom",so);var ds=600;U.mergeOptions({tapHold:k.touchNative&&k.safari&&k.mobile,tapTolerance:15});var ao=xt.extend({addHooks:function(){H(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){q(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(clearTimeout(this._holdTimeout),t.touches.length===1){var e=t.touches[0];this._startPos=this._newPos=new B(e.clientX,e.clientY),this._holdTimeout=setTimeout(c(function(){this._cancel(),this._isTapValid()&&(H(document,"touchend",st),H(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",e))},this),ds),H(document,"touchend touchcancel contextmenu",this._cancel,this),H(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function t(){q(document,"touchend",st),q(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),q(document,"touchend touchcancel contextmenu",this._cancel,this),q(document,"touchmove",this._onMove,this)},_onMove:function(t){var e=t.touches[0];this._newPos=new B(e.clientX,e.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,e){var o=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY});o._simulated=!0,e.target.dispatchEvent(o)}});U.addInitHook("addHandler","tapHold",ao),U.mergeOptions({touchZoom:k.touch,bounceAtZoomLimits:!0});var lo=xt.extend({addHooks:function(){Z(this._map._container,"leaflet-touch-zoom"),H(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Q(this._map._container,"leaflet-touch-zoom"),q(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(!(!t.touches||t.touches.length!==2||e._animatingZoom||this._zooming)){var o=e.mouseEventToContainerPoint(t.touches[0]),a=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),e.options.touchZoom!=="center"&&(this._pinchStartLatLng=e.containerPointToLatLng(o.add(a)._divideBy(2))),this._startDist=o.distanceTo(a),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),H(document,"touchmove",this._onTouchMove,this),H(document,"touchend touchcancel",this._onTouchEnd,this),st(t)}},_onTouchMove:function(t){if(!(!t.touches||t.touches.length!==2||!this._zooming)){var e=this._map,o=e.mouseEventToContainerPoint(t.touches[0]),a=e.mouseEventToContainerPoint(t.touches[1]),h=o.distanceTo(a)/this._startDist;if(this._zoom=e.getScaleZoom(h,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&h<1||this._zoom>e.getMaxZoom()&&h>1)&&(this._zoom=e._limitZoom(this._zoom)),e.options.touchZoom==="center"){if(this._center=this._startLatLng,h===1)return}else{var d=o._add(a)._divideBy(2)._subtract(this._centerPoint);if(h===1&&d.x===0&&d.y===0)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(d),this._zoom)}this._moved||(e._moveStart(!0,!1),this._moved=!0),ot(this._animRequest);var _=c(e._move,e,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=nt(_,this,!0),st(t)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,ot(this._animRequest),q(document,"touchmove",this._onTouchMove,this),q(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});U.addInitHook("addHandler","touchZoom",lo),U.BoxZoom=io,U.DoubleClickZoom=no,U.Drag=oo,U.Keyboard=ro,U.ScrollWheelZoom=so,U.TapHold=ao,U.TouchZoom=lo,r.Bounds=K,r.Browser=k,r.CRS=Mt,r.Canvas=Jn,r.Circle=Mi,r.CircleMarker=Ie,r.Class=St,r.Control=mt,r.DivIcon=Yn,r.DivOverlay=Pt,r.DomEvent=kr,r.DomUtil=Tr,r.Draggable=It,r.Evented=oe,r.FeatureGroup=bt,r.GeoJSON=Et,r.GridLayer=ge,r.Handler=xt,r.Icon=Jt,r.ImageOverlay=He,r.LatLng=W,r.LatLngBounds=ht,r.Layer=vt,r.LayerGroup=Xt,r.LineUtil=Vr,r.Map=U,r.Marker=Oe,r.Mixin=Fr,r.Path=zt,r.Point=B,r.PolyUtil=Br,r.Polygon=Qt,r.Polyline=Tt,r.Popup=Ze,r.PosAnimation=Dn,r.Projection=$r,r.Rectangle=eo,r.Renderer=kt,r.SVG=ve,r.SVGOverlay=qn,r.TileLayer=ee,r.Tooltip=Ne,r.Transformation=Je,r.Util=Ko,r.VideoOverlay=Wn,r.bind=c,r.bounds=ut,r.canvas=Qn,r.circle=Jr,r.circleMarker=Xr,r.control=fe,r.divIcon=as,r.extend=n,r.featureGroup=qr,r.geoJSON=jn,r.geoJson=es,r.gridLayer=ls,r.icon=Yr,r.imageOverlay=is,r.latLng=$,r.latLngBounds=tt,r.layerGroup=Wr,r.map=Dr,r.marker=Kr,r.point=A,r.polygon=ts,r.polyline=Qr,r.popup=rs,r.rectangle=cs,r.setOptions=S,r.stamp=p,r.svg=to,r.svgOverlay=os,r.tileLayer=Kn,r.tooltip=ss,r.transformation=re,r.version=l,r.videoOverlay=ns;var fs=window.L;r.noConflict=function(){return window.L=fs,this},window.L=r})}(Le,Le.exports)),Le.exports}var Ct=$s();const Lo=Do(Ct);function ne(i,u,r){return Object.freeze({instance:i,context:u,container:r})}function Ye(i,u){return u==null?function(l,n){const s=F.useRef();return s.current||(s.current=i(l,n)),s}:function(l,n){const s=F.useRef();s.current||(s.current=i(l,n));const c=F.useRef(l),{instance:f}=s.current;return F.useEffect(function(){c.current!==l&&(u(f,l,c.current),c.current=l)},[f,l,n]),s}}function Bo(i,u){F.useEffect(function(){return(u.layerContainer??u.map).addLayer(i.instance),function(){var s;(s=u.layerContainer)==null||s.removeLayer(i.instance),u.map.removeLayer(i.instance)}},[u,i])}function Ho(i){return function(r){const l=Ce(),n=i(qe(r,l),l);return Io(l.map,r.attribution),Yi(n.current,r.eventHandlers),Bo(n.current,l),n}}function Us(i,u){const r=F.useRef();F.useEffect(function(){if(u.pathOptions!==r.current){const n=u.pathOptions??{};i.instance.setStyle(n),r.current=n}},[i,u])}function js(i){return function(r){const l=Ce(),n=i(qe(r,l),l);return Yi(n.current,r.eventHandlers),Bo(n.current,l),Us(n.current,r),n}}function Ws(i,u){const r=Ye(i,u),l=Ho(r);return Fo(l)}function qs(i,u){const r=Ye(i),l=Gs(r,u);return Zs(l)}function Ki(i,u){const r=Ye(i,u),l=js(r);return Fo(l)}function Ys(i,u){const r=Ye(i,u),l=Ho(r);return Ns(l)}function Ks(i,u,r){const{opacity:l,zIndex:n}=u;l!=null&&l!==r.opacity&&i.setOpacity(l),n!=null&&n!==r.zIndex&&i.setZIndex(n)}function Xs(){return Ce().map}function Js(i){const u=Xs();return F.useEffect(function(){return u.on(i),function(){u.off(i)}},[u,i]),u}const Qs=Ki(function({center:u,children:r,...l},n){const s=new Ct.CircleMarker(u,l);return ne(s,We(n,{overlayContainer:s}))},Fs),ta=Ki(function({children:u,...r},l){const n=new Ct.FeatureGroup([],r);return ne(n,We(l,{layerContainer:n,overlayContainer:n}))});function Vi(){return Vi=Object.assign||function(i){for(var u=1;u<arguments.length;u++){var r=arguments[u];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(i[l]=r[l])}return i},Vi.apply(this,arguments)}function ea({bounds:i,boundsOptions:u,center:r,children:l,className:n,id:s,placeholder:c,style:f,whenReady:p,zoom:g,...m},w){const[x]=F.useState({className:n,id:s,style:f}),[P,M]=F.useState(null);F.useImperativeHandle(w,()=>(P==null?void 0:P.map)??null,[P]);const S=F.useCallback(E=>{if(E!==null&&P===null){const V=new Ct.Map(E,m);r!=null&&g!=null?V.setView(r,g):i!=null&&V.fitBounds(i,u),p!=null&&V.whenReady(p),M(Hs(V))}},[]);F.useEffect(()=>()=>{P==null||P.map.remove()},[P]);const O=P?Pe.createElement(Ao,{value:P},l):c??null;return Pe.createElement("div",Vi({},x,{ref:S}),O)}const ia=F.forwardRef(ea),wo=Ws(function({position:u,...r},l){const n=new Ct.Marker(u,r);return ne(n,We(l,{overlayContainer:n}))},function(u,r,l){r.position!==l.position&&u.setLatLng(r.position),r.icon!=null&&r.icon!==l.icon&&u.setIcon(r.icon),r.zIndexOffset!=null&&r.zIndexOffset!==l.zIndexOffset&&u.setZIndexOffset(r.zIndexOffset),r.opacity!=null&&r.opacity!==l.opacity&&u.setOpacity(r.opacity),u.dragging!=null&&r.draggable!==l.draggable&&(r.draggable===!0?u.dragging.enable():u.dragging.disable())}),na=Ki(function({positions:u,...r},l){const n=new Ct.Polygon(u,r);return ne(n,We(l,{overlayContainer:n}))},function(u,r,l){r.positions!==l.positions&&u.setLatLngs(r.positions)}),xo=qs(function(u,r){const l=new Ct.Popup(u,r.overlayContainer);return ne(l,r)},function(u,r,{position:l},n){F.useEffect(function(){const{instance:c}=u;function f(g){g.popup===c&&(c.update(),n(!0))}function p(g){g.popup===c&&n(!1)}return r.map.on({popupopen:f,popupclose:p}),r.overlayContainer==null?(l!=null&&c.setLatLng(l),c.openOn(r.map)):r.overlayContainer.bindPopup(c),function(){var m;r.map.off({popupopen:f,popupclose:p}),(m=r.overlayContainer)==null||m.unbindPopup(),r.map.removeLayer(c)}},[u,r,n,l])}),oa=Ys(function({url:u,...r},l){const n=new Ct.TileLayer(u,qe(r,l));return ne(n,l)},function(u,r,l){Ks(u,r,l);const{url:n}=r;n!=null&&n!==l.url&&u.setUrl(n)});var Oi={exports:{}},Ii,Po;function ra(){if(Po)return Ii;Po=1;var i="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Ii=i,Ii}var zi,Co;function sa(){if(Co)return zi;Co=1;var i=ra();function u(){}function r(){}return r.resetWarningCache=u,zi=function(){function l(c,f,p,g,m,w){if(w!==i){var x=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw x.name="Invariant Violation",x}}l.isRequired=l;function n(){return l}var s={array:l,bigint:l,bool:l,func:l,number:l,object:l,string:l,symbol:l,any:l,arrayOf:n,element:l,elementType:l,instanceOf:n,node:l,objectOf:n,oneOf:n,oneOfType:n,shape:n,exact:n,checkPropTypes:r,resetWarningCache:u};return s.PropTypes=s,s},zi}var So;function aa(){return So||(So=1,Oi.exports=sa()()),Oi.exports}var G=aa();(function(i,u,r){function l(n,s){for(;(n=n.parentElement)&&!n.classList.contains(s););return n}L.drawVersion="1.0.4",L.Draw={},L.drawLocal={draw:{toolbar:{actions:{title:"Cancel drawing",text:"Cancel"},finish:{title:"Finish drawing",text:"Finish"},undo:{title:"Delete last point drawn",text:"Delete last point"},buttons:{polyline:"Draw a polyline",polygon:"Draw a polygon",rectangle:"Draw a rectangle",circle:"Draw a circle",marker:"Draw a marker",circlemarker:"Draw a circlemarker"}},handlers:{circle:{tooltip:{start:"Click and drag to draw circle."},radius:"Radius"},circlemarker:{tooltip:{start:"Click map to place circle marker."}},marker:{tooltip:{start:"Click map to place marker."}},polygon:{tooltip:{start:"Click to start drawing shape.",cont:"Click to continue drawing shape.",end:"Click first point to close this shape."}},polyline:{error:"<strong>Error:</strong> shape edges cannot cross!",tooltip:{start:"Click to start drawing line.",cont:"Click to continue drawing line.",end:"Click last point to finish line."}},rectangle:{tooltip:{start:"Click and drag to draw rectangle."}},simpleshape:{tooltip:{end:"Release mouse to finish drawing."}}}},edit:{toolbar:{actions:{save:{title:"Save changes",text:"Save"},cancel:{title:"Cancel editing, discards all changes",text:"Cancel"},clearAll:{title:"Clear all layers",text:"Clear All"}},buttons:{edit:"Edit layers",editDisabled:"No layers to edit",remove:"Delete layers",removeDisabled:"No layers to delete"}},handlers:{edit:{tooltip:{text:"Drag handles or markers to edit features.",subtext:"Click cancel to undo changes."}},remove:{tooltip:{text:"Click on a feature to remove."}}}}},L.Draw.Event={},L.Draw.Event.CREATED="draw:created",L.Draw.Event.EDITED="draw:edited",L.Draw.Event.DELETED="draw:deleted",L.Draw.Event.DRAWSTART="draw:drawstart",L.Draw.Event.DRAWSTOP="draw:drawstop",L.Draw.Event.DRAWVERTEX="draw:drawvertex",L.Draw.Event.EDITSTART="draw:editstart",L.Draw.Event.EDITMOVE="draw:editmove",L.Draw.Event.EDITRESIZE="draw:editresize",L.Draw.Event.EDITVERTEX="draw:editvertex",L.Draw.Event.EDITSTOP="draw:editstop",L.Draw.Event.DELETESTART="draw:deletestart",L.Draw.Event.DELETESTOP="draw:deletestop",L.Draw.Event.TOOLBAROPENED="draw:toolbaropened",L.Draw.Event.TOOLBARCLOSED="draw:toolbarclosed",L.Draw.Event.MARKERCONTEXT="draw:markercontext",L.Draw=L.Draw||{},L.Draw.Feature=L.Handler.extend({initialize:function(n,s){this._map=n,this._container=n._container,this._overlayPane=n._panes.overlayPane,this._popupPane=n._panes.popupPane,s&&s.shapeOptions&&(s.shapeOptions=L.Util.extend({},this.options.shapeOptions,s.shapeOptions)),L.setOptions(this,s);var c=L.version.split(".");parseInt(c[0],10)===1&&parseInt(c[1],10)>=2?L.Draw.Feature.include(L.Evented.prototype):L.Draw.Feature.include(L.Mixin.Events)},enable:function(){this._enabled||(L.Handler.prototype.enable.call(this),this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DRAWSTART,{layerType:this.type}))},disable:function(){this._enabled&&(L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DRAWSTOP,{layerType:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var n=this._map;n&&(L.DomUtil.disableTextSelection(),n.getContainer().focus(),this._tooltip=new L.Draw.Tooltip(this._map),L.DomEvent.on(this._container,"keyup",this._cancelDrawing,this))},removeHooks:function(){this._map&&(L.DomUtil.enableTextSelection(),this._tooltip.dispose(),this._tooltip=null,L.DomEvent.off(this._container,"keyup",this._cancelDrawing,this))},setOptions:function(n){L.setOptions(this,n)},_fireCreatedEvent:function(n){this._map.fire(L.Draw.Event.CREATED,{layer:n,layerType:this.type})},_cancelDrawing:function(n){n.keyCode===27&&(this._map.fire("draw:canceled",{layerType:this.type}),this.disable())}}),L.Draw.Polyline=L.Draw.Feature.extend({statics:{TYPE:"polyline"},Poly:L.Polyline,options:{allowIntersection:!0,repeatMode:!1,drawError:{color:"#b00b00",timeout:2500},icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),guidelineDistance:20,maxGuideLineLength:4e3,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!1,clickable:!0},metric:!0,feet:!0,nautic:!1,showLength:!0,zIndexOffset:2e3,factor:1,maxPoints:0},initialize:function(n,s){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this.options.drawError.message=L.drawLocal.draw.handlers.polyline.error,s&&s.drawError&&(s.drawError=L.Util.extend({},this.options.drawError,s.drawError)),this.type=L.Draw.Polyline.TYPE,L.Draw.Feature.prototype.initialize.call(this,n,s)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._markers=[],this._markerGroup=new L.LayerGroup,this._map.addLayer(this._markerGroup),this._poly=new L.Polyline([],this.options.shapeOptions),this._tooltip.updateContent(this._getTooltipText()),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("mouseout",this._onMouseOut,this).on("mousemove",this._onMouseMove,this).on("mousedown",this._onMouseDown,this).on("mouseup",this._onMouseUp,this).addTo(this._map),this._map.on("mouseup",this._onMouseUp,this).on("mousemove",this._onMouseMove,this).on("zoomlevelschange",this._onZoomEnd,this).on("touchstart",this._onTouch,this).on("zoomend",this._onZoomEnd,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._clearHideErrorTimeout(),this._cleanUpShape(),this._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers,this._map.removeLayer(this._poly),delete this._poly,this._mouseMarker.off("mousedown",this._onMouseDown,this).off("mouseout",this._onMouseOut,this).off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._clearGuides(),this._map.off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this).off("zoomlevelschange",this._onZoomEnd,this).off("zoomend",this._onZoomEnd,this).off("touchstart",this._onTouch,this).off("click",this._onTouch,this)},deleteLastVertex:function(){if(!(this._markers.length<=1)){var n=this._markers.pop(),s=this._poly,c=s.getLatLngs(),f=c.splice(-1,1)[0];this._poly.setLatLngs(c),this._markerGroup.removeLayer(n),s.getLatLngs().length<2&&this._map.removeLayer(s),this._vertexChanged(f,!1)}},addVertex:function(n){if(this._markers.length>=2&&!this.options.allowIntersection&&this._poly.newLatLngIntersects(n))return void this._showErrorTooltip();this._errorShown&&this._hideErrorTooltip(),this._markers.push(this._createMarker(n)),this._poly.addLatLng(n),this._poly.getLatLngs().length===2&&this._map.addLayer(this._poly),this._vertexChanged(n,!0)},completeShape:function(){this._markers.length<=1||!this._shapeIsValid()||(this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable())},_finishShape:function(){var n=this._poly._defaultShape?this._poly._defaultShape():this._poly.getLatLngs(),s=this._poly.newLatLngIntersects(n[n.length-1]);if(!this.options.allowIntersection&&s||!this._shapeIsValid())return void this._showErrorTooltip();this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_shapeIsValid:function(){return!0},_onZoomEnd:function(){this._markers!==null&&this._updateGuide()},_onMouseMove:function(n){var s=this._map.mouseEventToLayerPoint(n.originalEvent),c=this._map.layerPointToLatLng(s);this._currentLatLng=c,this._updateTooltip(c),this._updateGuide(s),this._mouseMarker.setLatLng(c),L.DomEvent.preventDefault(n.originalEvent)},_vertexChanged:function(n,s){this._map.fire(L.Draw.Event.DRAWVERTEX,{layers:this._markerGroup}),this._updateFinishHandler(),this._updateRunningMeasure(n,s),this._clearGuides(),this._updateTooltip()},_onMouseDown:function(n){if(!this._clickHandled&&!this._touchHandled&&!this._disableMarkers){this._onMouseMove(n),this._clickHandled=!0,this._disableNewMarkers();var s=n.originalEvent,c=s.clientX,f=s.clientY;this._startPoint.call(this,c,f)}},_startPoint:function(n,s){this._mouseDownOrigin=L.point(n,s)},_onMouseUp:function(n){var s=n.originalEvent,c=s.clientX,f=s.clientY;this._endPoint.call(this,c,f,n),this._clickHandled=null},_endPoint:function(n,s,c){if(this._mouseDownOrigin){var f=L.point(n,s).distanceTo(this._mouseDownOrigin),p=this._calculateFinishDistance(c.latlng);this.options.maxPoints>1&&this.options.maxPoints==this._markers.length+1?(this.addVertex(c.latlng),this._finishShape()):p<10&&L.Browser.touch?this._finishShape():Math.abs(f)<9*(i.devicePixelRatio||1)&&this.addVertex(c.latlng),this._enableNewMarkers()}this._mouseDownOrigin=null},_onTouch:function(n){var s,c,f=n.originalEvent;!f.touches||!f.touches[0]||this._clickHandled||this._touchHandled||this._disableMarkers||(s=f.touches[0].clientX,c=f.touches[0].clientY,this._disableNewMarkers(),this._touchHandled=!0,this._startPoint.call(this,s,c),this._endPoint.call(this,s,c,n),this._touchHandled=null),this._clickHandled=null},_onMouseOut:function(){this._tooltip&&this._tooltip._onMouseOut.call(this._tooltip)},_calculateFinishDistance:function(n){var s;if(this._markers.length>0){var c;if(this.type===L.Draw.Polyline.TYPE)c=this._markers[this._markers.length-1];else{if(this.type!==L.Draw.Polygon.TYPE)return 1/0;c=this._markers[0]}var f=this._map.latLngToContainerPoint(c.getLatLng()),p=new L.Marker(n,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset}),g=this._map.latLngToContainerPoint(p.getLatLng());s=f.distanceTo(g)}else s=1/0;return s},_updateFinishHandler:function(){var n=this._markers.length;n>1&&this._markers[n-1].on("click",this._finishShape,this),n>2&&this._markers[n-2].off("click",this._finishShape,this)},_createMarker:function(n){var s=new L.Marker(n,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset});return this._markerGroup.addLayer(s),s},_updateGuide:function(n){var s=this._markers?this._markers.length:0;s>0&&(n=n||this._map.latLngToLayerPoint(this._currentLatLng),this._clearGuides(),this._drawGuide(this._map.latLngToLayerPoint(this._markers[s-1].getLatLng()),n))},_updateTooltip:function(n){var s=this._getTooltipText();n&&this._tooltip.updatePosition(n),this._errorShown||this._tooltip.updateContent(s)},_drawGuide:function(n,s){var c,f,p,g=Math.floor(Math.sqrt(Math.pow(s.x-n.x,2)+Math.pow(s.y-n.y,2))),m=this.options.guidelineDistance,w=this.options.maxGuideLineLength,x=g>w?g-w:m;for(this._guidesContainer||(this._guidesContainer=L.DomUtil.create("div","leaflet-draw-guides",this._overlayPane));x<g;x+=this.options.guidelineDistance)c=x/g,f={x:Math.floor(n.x*(1-c)+c*s.x),y:Math.floor(n.y*(1-c)+c*s.y)},p=L.DomUtil.create("div","leaflet-draw-guide-dash",this._guidesContainer),p.style.backgroundColor=this._errorShown?this.options.drawError.color:this.options.shapeOptions.color,L.DomUtil.setPosition(p,f)},_updateGuideColor:function(n){if(this._guidesContainer)for(var s=0,c=this._guidesContainer.childNodes.length;s<c;s++)this._guidesContainer.childNodes[s].style.backgroundColor=n},_clearGuides:function(){if(this._guidesContainer)for(;this._guidesContainer.firstChild;)this._guidesContainer.removeChild(this._guidesContainer.firstChild)},_getTooltipText:function(){var n,s,c=this.options.showLength;return this._markers.length===0?n={text:L.drawLocal.draw.handlers.polyline.tooltip.start}:(s=c?this._getMeasurementString():"",n=this._markers.length===1?{text:L.drawLocal.draw.handlers.polyline.tooltip.cont,subtext:s}:{text:L.drawLocal.draw.handlers.polyline.tooltip.end,subtext:s}),n},_updateRunningMeasure:function(n,s){var c,f,p=this._markers.length;this._markers.length===1?this._measurementRunningTotal=0:(c=p-(s?2:1),f=L.GeometryUtil.isVersion07x()?n.distanceTo(this._markers[c].getLatLng())*(this.options.factor||1):this._map.distance(n,this._markers[c].getLatLng())*(this.options.factor||1),this._measurementRunningTotal+=f*(s?1:-1))},_getMeasurementString:function(){var n,s=this._currentLatLng,c=this._markers[this._markers.length-1].getLatLng();return n=L.GeometryUtil.isVersion07x()?c&&s&&s.distanceTo?this._measurementRunningTotal+s.distanceTo(c)*(this.options.factor||1):this._measurementRunningTotal||0:c&&s?this._measurementRunningTotal+this._map.distance(s,c)*(this.options.factor||1):this._measurementRunningTotal||0,L.GeometryUtil.readableDistance(n,this.options.metric,this.options.feet,this.options.nautic,this.options.precision)},_showErrorTooltip:function(){this._errorShown=!0,this._tooltip.showAsError().updateContent({text:this.options.drawError.message}),this._updateGuideColor(this.options.drawError.color),this._poly.setStyle({color:this.options.drawError.color}),this._clearHideErrorTimeout(),this._hideErrorTimeout=setTimeout(L.Util.bind(this._hideErrorTooltip,this),this.options.drawError.timeout)},_hideErrorTooltip:function(){this._errorShown=!1,this._clearHideErrorTimeout(),this._tooltip.removeError().updateContent(this._getTooltipText()),this._updateGuideColor(this.options.shapeOptions.color),this._poly.setStyle({color:this.options.shapeOptions.color})},_clearHideErrorTimeout:function(){this._hideErrorTimeout&&(clearTimeout(this._hideErrorTimeout),this._hideErrorTimeout=null)},_disableNewMarkers:function(){this._disableMarkers=!0},_enableNewMarkers:function(){setTimeout((function(){this._disableMarkers=!1}).bind(this),50)},_cleanUpShape:function(){this._markers.length>1&&this._markers[this._markers.length-1].off("click",this._finishShape,this)},_fireCreatedEvent:function(){var n=new this.Poly(this._poly.getLatLngs(),this.options.shapeOptions);L.Draw.Feature.prototype._fireCreatedEvent.call(this,n)}}),L.Draw.Polygon=L.Draw.Polyline.extend({statics:{TYPE:"polygon"},Poly:L.Polygon,options:{showArea:!1,showLength:!1,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},metric:!0,feet:!0,nautic:!1,precision:{}},initialize:function(n,s){L.Draw.Polyline.prototype.initialize.call(this,n,s),this.type=L.Draw.Polygon.TYPE},_updateFinishHandler:function(){var n=this._markers.length;n===1&&this._markers[0].on("click",this._finishShape,this),n>2&&(this._markers[n-1].on("dblclick",this._finishShape,this),n>3&&this._markers[n-2].off("dblclick",this._finishShape,this))},_getTooltipText:function(){var n,s;return this._markers.length===0?n=L.drawLocal.draw.handlers.polygon.tooltip.start:this._markers.length<3?(n=L.drawLocal.draw.handlers.polygon.tooltip.cont,s=this._getMeasurementString()):(n=L.drawLocal.draw.handlers.polygon.tooltip.end,s=this._getMeasurementString()),{text:n,subtext:s}},_getMeasurementString:function(){var n=this._area,s="";return n||this.options.showLength?(this.options.showLength&&(s=L.Draw.Polyline.prototype._getMeasurementString.call(this)),n&&(s+="<br>"+L.GeometryUtil.readableArea(n,this.options.metric,this.options.precision)),s):null},_shapeIsValid:function(){return this._markers.length>=3},_vertexChanged:function(n,s){var c;!this.options.allowIntersection&&this.options.showArea&&(c=this._poly.getLatLngs(),this._area=L.GeometryUtil.geodesicArea(c)),L.Draw.Polyline.prototype._vertexChanged.call(this,n,s)},_cleanUpShape:function(){var n=this._markers.length;n>0&&(this._markers[0].off("click",this._finishShape,this),n>2&&this._markers[n-1].off("dblclick",this._finishShape,this))}}),L.SimpleShape={},L.Draw.SimpleShape=L.Draw.Feature.extend({options:{repeatMode:!1},initialize:function(n,s){this._endLabelText=L.drawLocal.draw.handlers.simpleshape.tooltip.end,L.Draw.Feature.prototype.initialize.call(this,n,s)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._mapDraggable=this._map.dragging.enabled(),this._mapDraggable&&this._map.dragging.disable(),this._container.style.cursor="crosshair",this._tooltip.updateContent({text:this._initialLabelText}),this._map.on("mousedown",this._onMouseDown,this).on("mousemove",this._onMouseMove,this).on("touchstart",this._onMouseDown,this).on("touchmove",this._onMouseMove,this),u.addEventListener("touchstart",L.DomEvent.preventDefault,{passive:!1}))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._mapDraggable&&this._map.dragging.enable(),this._container.style.cursor="",this._map.off("mousedown",this._onMouseDown,this).off("mousemove",this._onMouseMove,this).off("touchstart",this._onMouseDown,this).off("touchmove",this._onMouseMove,this),L.DomEvent.off(u,"mouseup",this._onMouseUp,this),L.DomEvent.off(u,"touchend",this._onMouseUp,this),u.removeEventListener("touchstart",L.DomEvent.preventDefault),this._shape&&(this._map.removeLayer(this._shape),delete this._shape)),this._isDrawing=!1},_getTooltipText:function(){return{text:this._endLabelText}},_onMouseDown:function(n){this._isDrawing=!0,this._startLatLng=n.latlng,L.DomEvent.on(u,"mouseup",this._onMouseUp,this).on(u,"touchend",this._onMouseUp,this).preventDefault(n.originalEvent)},_onMouseMove:function(n){var s=n.latlng;this._tooltip.updatePosition(s),this._isDrawing&&(this._tooltip.updateContent(this._getTooltipText()),this._drawShape(s))},_onMouseUp:function(){this._shape&&this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()}}),L.Draw.Rectangle=L.Draw.SimpleShape.extend({statics:{TYPE:"rectangle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showArea:!0,metric:!0},initialize:function(n,s){this.type=L.Draw.Rectangle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.rectangle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,n,s)},disable:function(){this._enabled&&(this._isCurrentlyTwoClickDrawing=!1,L.Draw.SimpleShape.prototype.disable.call(this))},_onMouseUp:function(n){if(!this._shape&&!this._isCurrentlyTwoClickDrawing)return void(this._isCurrentlyTwoClickDrawing=!0);this._isCurrentlyTwoClickDrawing&&!l(n.target,"leaflet-pane")||L.Draw.SimpleShape.prototype._onMouseUp.call(this)},_drawShape:function(n){this._shape?this._shape.setBounds(new L.LatLngBounds(this._startLatLng,n)):(this._shape=new L.Rectangle(new L.LatLngBounds(this._startLatLng,n),this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var n=new L.Rectangle(this._shape.getBounds(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,n)},_getTooltipText:function(){var n,s,c,f=L.Draw.SimpleShape.prototype._getTooltipText.call(this),p=this._shape,g=this.options.showArea;return p&&(n=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),s=L.GeometryUtil.geodesicArea(n),c=g?L.GeometryUtil.readableArea(s,this.options.metric):""),{text:f.text,subtext:c}}}),L.Draw.Marker=L.Draw.Feature.extend({statics:{TYPE:"marker"},options:{icon:new L.Icon.Default,repeatMode:!1,zIndexOffset:2e3},initialize:function(n,s){this.type=L.Draw.Marker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.marker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,n,s)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._tooltip.updateContent({text:this._initialLabelText}),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("click",this._onClick,this).addTo(this._map),this._map.on("mousemove",this._onMouseMove,this),this._map.on("click",this._onTouch,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._map.off("click",this._onClick,this).off("click",this._onTouch,this),this._marker&&(this._marker.off("click",this._onClick,this),this._map.removeLayer(this._marker),delete this._marker),this._mouseMarker.off("click",this._onClick,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._map.off("mousemove",this._onMouseMove,this))},_onMouseMove:function(n){var s=n.latlng;this._tooltip.updatePosition(s),this._mouseMarker.setLatLng(s),this._marker?(s=this._mouseMarker.getLatLng(),this._marker.setLatLng(s)):(this._marker=this._createMarker(s),this._marker.on("click",this._onClick,this),this._map.on("click",this._onClick,this).addLayer(this._marker))},_createMarker:function(n){return new L.Marker(n,{icon:this.options.icon,zIndexOffset:this.options.zIndexOffset})},_onClick:function(){this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_onTouch:function(n){this._onMouseMove(n),this._onClick()},_fireCreatedEvent:function(){var n=new L.Marker.Touch(this._marker.getLatLng(),{icon:this.options.icon});L.Draw.Feature.prototype._fireCreatedEvent.call(this,n)}}),L.Draw.CircleMarker=L.Draw.Marker.extend({statics:{TYPE:"circlemarker"},options:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0,zIndexOffset:2e3},initialize:function(n,s){this.type=L.Draw.CircleMarker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circlemarker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,n,s)},_fireCreatedEvent:function(){var n=new L.CircleMarker(this._marker.getLatLng(),this.options);L.Draw.Feature.prototype._fireCreatedEvent.call(this,n)},_createMarker:function(n){return new L.CircleMarker(n,this.options)}}),L.Draw.Circle=L.Draw.SimpleShape.extend({statics:{TYPE:"circle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showRadius:!0,metric:!0,feet:!0,nautic:!1},initialize:function(n,s){this.type=L.Draw.Circle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,n,s)},_drawShape:function(n){if(L.GeometryUtil.isVersion07x())var s=this._startLatLng.distanceTo(n);else var s=this._map.distance(this._startLatLng,n);this._shape?this._shape.setRadius(s):(this._shape=new L.Circle(this._startLatLng,s,this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var n=new L.Circle(this._startLatLng,this._shape.getRadius(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,n)},_onMouseMove:function(n){var s,c=n.latlng,f=this.options.showRadius,p=this.options.metric;if(this._tooltip.updatePosition(c),this._isDrawing){this._drawShape(c),s=this._shape.getRadius().toFixed(1);var g="";f&&(g=L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(s,p,this.options.feet,this.options.nautic)),this._tooltip.updateContent({text:this._endLabelText,subtext:g})}}}),L.Edit=L.Edit||{},L.Edit.Marker=L.Handler.extend({initialize:function(n,s){this._marker=n,L.setOptions(this,s)},addHooks:function(){var n=this._marker;n.dragging.enable(),n.on("dragend",this._onDragEnd,n),this._toggleMarkerHighlight()},removeHooks:function(){var n=this._marker;n.dragging.disable(),n.off("dragend",this._onDragEnd,n),this._toggleMarkerHighlight()},_onDragEnd:function(n){var s=n.target;s.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:s})},_toggleMarkerHighlight:function(){var n=this._marker._icon;n&&(n.style.display="none",L.DomUtil.hasClass(n,"leaflet-edit-marker-selected")?(L.DomUtil.removeClass(n,"leaflet-edit-marker-selected"),this._offsetMarker(n,-4)):(L.DomUtil.addClass(n,"leaflet-edit-marker-selected"),this._offsetMarker(n,4)),n.style.display="")},_offsetMarker:function(n,s){var c=parseInt(n.style.marginTop,10)-s,f=parseInt(n.style.marginLeft,10)-s;n.style.marginTop=c+"px",n.style.marginLeft=f+"px"}}),L.Marker.addInitHook(function(){L.Edit.Marker&&(this.editing=new L.Edit.Marker(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.Poly=L.Handler.extend({initialize:function(n){this.latlngs=[n._latlngs],n._holes&&(this.latlngs=this.latlngs.concat(n._holes)),this._poly=n,this._poly.on("revert-edited",this._updateLatLngs,this)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._poly._latlngs)?this._poly._latlngs:this._poly._latlngs[0]:this._poly._latlngs},_eachVertexHandler:function(n){for(var s=0;s<this._verticesHandlers.length;s++)n(this._verticesHandlers[s])},addHooks:function(){this._initHandlers(),this._eachVertexHandler(function(n){n.addHooks()})},removeHooks:function(){this._eachVertexHandler(function(n){n.removeHooks()})},updateMarkers:function(){this._eachVertexHandler(function(n){n.updateMarkers()})},_initHandlers:function(){this._verticesHandlers=[];for(var n=0;n<this.latlngs.length;n++)this._verticesHandlers.push(new L.Edit.PolyVerticesEdit(this._poly,this.latlngs[n],this._poly.options.poly))},_updateLatLngs:function(n){this.latlngs=[n.layer._latlngs],n.layer._holes&&(this.latlngs=this.latlngs.concat(n.layer._holes))}}),L.Edit.PolyVerticesEdit=L.Handler.extend({options:{icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),drawError:{color:"#b00b00",timeout:1e3}},initialize:function(n,s,c){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this._poly=n,c&&c.drawError&&(c.drawError=L.Util.extend({},this.options.drawError,c.drawError)),this._latlngs=s,L.setOptions(this,c)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._latlngs)?this._latlngs:this._latlngs[0]:this._latlngs},addHooks:function(){var n=this._poly,s=n._path;n instanceof L.Polygon||(n.options.fill=!1,n.options.editing&&(n.options.editing.fill=!1)),s&&n.options.editing&&n.options.editing.className&&(n.options.original.className&&n.options.original.className.split(" ").forEach(function(c){L.DomUtil.removeClass(s,c)}),n.options.editing.className.split(" ").forEach(function(c){L.DomUtil.addClass(s,c)})),n.setStyle(n.options.editing),this._poly._map&&(this._map=this._poly._map,this._markerGroup||this._initMarkers(),this._poly._map.addLayer(this._markerGroup))},removeHooks:function(){var n=this._poly,s=n._path;s&&n.options.editing&&n.options.editing.className&&(n.options.editing.className.split(" ").forEach(function(c){L.DomUtil.removeClass(s,c)}),n.options.original.className&&n.options.original.className.split(" ").forEach(function(c){L.DomUtil.addClass(s,c)})),n.setStyle(n.options.original),n._map&&(n._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers)},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._markers=[];var n,s,c,f,p=this._defaultShape();for(n=0,c=p.length;n<c;n++)f=this._createMarker(p[n],n),f.on("click",this._onMarkerClick,this),f.on("contextmenu",this._onContextMenu,this),this._markers.push(f);var g,m;for(n=0,s=c-1;n<c;s=n++)(n!==0||L.Polygon&&this._poly instanceof L.Polygon)&&(g=this._markers[s],m=this._markers[n],this._createMiddleMarker(g,m),this._updatePrevNext(g,m))},_createMarker:function(n,s){var c=new L.Marker.Touch(n,{draggable:!0,icon:this.options.icon});return c._origLatLng=n,c._index=s,c.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._fireEdit,this).on("touchmove",this._onTouchMove,this).on("touchend",this._fireEdit,this).on("MSPointerMove",this._onTouchMove,this).on("MSPointerUp",this._fireEdit,this),this._markerGroup.addLayer(c),c},_onMarkerDragStart:function(){this._poly.fire("editstart")},_spliceLatLngs:function(){var n=this._defaultShape(),s=[].splice.apply(n,arguments);return this._poly._convertLatLngs(n,!0),this._poly.redraw(),s},_removeMarker:function(n){var s=n._index;this._markerGroup.removeLayer(n),this._markers.splice(s,1),this._spliceLatLngs(s,1),this._updateIndexes(s,-1),n.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._fireEdit,this).off("touchmove",this._onMarkerDrag,this).off("touchend",this._fireEdit,this).off("click",this._onMarkerClick,this).off("MSPointerMove",this._onTouchMove,this).off("MSPointerUp",this._fireEdit,this)},_fireEdit:function(){this._poly.edited=!0,this._poly.fire("edit"),this._poly._map.fire(L.Draw.Event.EDITVERTEX,{layers:this._markerGroup,poly:this._poly})},_onMarkerDrag:function(n){var s=n.target,c=this._poly,f=L.LatLngUtil.cloneLatLng(s._origLatLng);if(L.extend(s._origLatLng,s._latlng),c.options.poly){var p=c._map._editTooltip;if(!c.options.poly.allowIntersection&&c.intersects()){L.extend(s._origLatLng,f),s.setLatLng(f);var g=c.options.color;c.setStyle({color:this.options.drawError.color}),p&&p.updateContent({text:L.drawLocal.draw.handlers.polyline.error}),setTimeout(function(){c.setStyle({color:g}),p&&p.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext})},1e3)}}s._middleLeft&&s._middleLeft.setLatLng(this._getMiddleLatLng(s._prev,s)),s._middleRight&&s._middleRight.setLatLng(this._getMiddleLatLng(s,s._next)),this._poly._bounds._southWest=L.latLng(1/0,1/0),this._poly._bounds._northEast=L.latLng(-1/0,-1/0);var m=this._poly.getLatLngs();this._poly._convertLatLngs(m,!0),this._poly.redraw(),this._poly.fire("editdrag")},_onMarkerClick:function(n){var s=L.Polygon&&this._poly instanceof L.Polygon?4:3,c=n.target;this._defaultShape().length<s||(this._removeMarker(c),this._updatePrevNext(c._prev,c._next),c._middleLeft&&this._markerGroup.removeLayer(c._middleLeft),c._middleRight&&this._markerGroup.removeLayer(c._middleRight),c._prev&&c._next?this._createMiddleMarker(c._prev,c._next):c._prev?c._next||(c._prev._middleRight=null):c._next._middleLeft=null,this._fireEdit())},_onContextMenu:function(n){var s=n.target;this._poly,this._poly._map.fire(L.Draw.Event.MARKERCONTEXT,{marker:s,layers:this._markerGroup,poly:this._poly}),L.DomEvent.stopPropagation},_onTouchMove:function(n){var s=this._map.mouseEventToLayerPoint(n.originalEvent.touches[0]),c=this._map.layerPointToLatLng(s),f=n.target;L.extend(f._origLatLng,c),f._middleLeft&&f._middleLeft.setLatLng(this._getMiddleLatLng(f._prev,f)),f._middleRight&&f._middleRight.setLatLng(this._getMiddleLatLng(f,f._next)),this._poly.redraw(),this.updateMarkers()},_updateIndexes:function(n,s){this._markerGroup.eachLayer(function(c){c._index>n&&(c._index+=s)})},_createMiddleMarker:function(n,s){var c,f,p,g=this._getMiddleLatLng(n,s),m=this._createMarker(g);m.setOpacity(.6),n._middleRight=s._middleLeft=m,f=function(){m.off("touchmove",f,this);var w=s._index;m._index=w,m.off("click",c,this).on("click",this._onMarkerClick,this),g.lat=m.getLatLng().lat,g.lng=m.getLatLng().lng,this._spliceLatLngs(w,0,g),this._markers.splice(w,0,m),m.setOpacity(1),this._updateIndexes(w,1),s._index++,this._updatePrevNext(n,m),this._updatePrevNext(m,s),this._poly.fire("editstart")},p=function(){m.off("dragstart",f,this),m.off("dragend",p,this),m.off("touchmove",f,this),this._createMiddleMarker(n,m),this._createMiddleMarker(m,s)},c=function(){f.call(this),p.call(this),this._fireEdit()},m.on("click",c,this).on("dragstart",f,this).on("dragend",p,this).on("touchmove",f,this),this._markerGroup.addLayer(m)},_updatePrevNext:function(n,s){n&&(n._next=s),s&&(s._prev=n)},_getMiddleLatLng:function(n,s){var c=this._poly._map,f=c.project(n.getLatLng()),p=c.project(s.getLatLng());return c.unproject(f._add(p)._divideBy(2))}}),L.Polyline.addInitHook(function(){this.editing||(L.Edit.Poly&&(this.editing=new L.Edit.Poly(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()}))}),L.Edit=L.Edit||{},L.Edit.SimpleShape=L.Handler.extend({options:{moveIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move"}),resizeIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize"}),touchMoveIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move leaflet-touch-icon"}),touchResizeIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize leaflet-touch-icon"})},initialize:function(n,s){L.Browser.touch&&(this.options.moveIcon=this.options.touchMoveIcon,this.options.resizeIcon=this.options.touchResizeIcon),this._shape=n,L.Util.setOptions(this,s)},addHooks:function(){var n=this._shape;this._shape._map&&(this._map=this._shape._map,n.setStyle(n.options.editing),n._map&&(this._map=n._map,this._markerGroup||this._initMarkers(),this._map.addLayer(this._markerGroup)))},removeHooks:function(){var n=this._shape;if(n.setStyle(n.options.original),n._map){this._unbindMarker(this._moveMarker);for(var s=0,c=this._resizeMarkers.length;s<c;s++)this._unbindMarker(this._resizeMarkers[s]);this._resizeMarkers=null,this._map.removeLayer(this._markerGroup),delete this._markerGroup}this._map=null},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._createMoveMarker(),this._createResizeMarker()},_createMoveMarker:function(){},_createResizeMarker:function(){},_createMarker:function(n,s){var c=new L.Marker.Touch(n,{draggable:!0,icon:s,zIndexOffset:10});return this._bindMarker(c),this._markerGroup.addLayer(c),c},_bindMarker:function(n){n.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._onMarkerDragEnd,this).on("touchstart",this._onTouchStart,this).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onTouchEnd,this).on("MSPointerUp",this._onTouchEnd,this)},_unbindMarker:function(n){n.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._onMarkerDragEnd,this).off("touchstart",this._onTouchStart,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onTouchEnd,this).off("MSPointerUp",this._onTouchEnd,this)},_onMarkerDragStart:function(n){n.target.setOpacity(0),this._shape.fire("editstart")},_fireEdit:function(){this._shape.edited=!0,this._shape.fire("edit")},_onMarkerDrag:function(n){var s=n.target,c=s.getLatLng();s===this._moveMarker?this._move(c):this._resize(c),this._shape.redraw(),this._shape.fire("editdrag")},_onMarkerDragEnd:function(n){n.target.setOpacity(1),this._fireEdit()},_onTouchStart:function(n){if(L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,n),typeof this._getCorners=="function"){var s=this._getCorners(),c=n.target,f=c._cornerIndex;c.setOpacity(0),this._oppositeCorner=s[(f+2)%4],this._toggleCornerMarkers(0,f)}this._shape.fire("editstart")},_onTouchMove:function(n){var s=this._map.mouseEventToLayerPoint(n.originalEvent.touches[0]),c=this._map.layerPointToLatLng(s);return n.target===this._moveMarker?this._move(c):this._resize(c),this._shape.redraw(),!1},_onTouchEnd:function(n){n.target.setOpacity(1),this.updateMarkers(),this._fireEdit()},_move:function(){},_resize:function(){}}),L.Edit=L.Edit||{},L.Edit.Rectangle=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var n=this._shape.getBounds(),s=n.getCenter();this._moveMarker=this._createMarker(s,this.options.moveIcon)},_createResizeMarker:function(){var n=this._getCorners();this._resizeMarkers=[];for(var s=0,c=n.length;s<c;s++)this._resizeMarkers.push(this._createMarker(n[s],this.options.resizeIcon)),this._resizeMarkers[s]._cornerIndex=s},_onMarkerDragStart:function(n){L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,n);var s=this._getCorners(),c=n.target,f=c._cornerIndex;this._oppositeCorner=s[(f+2)%4],this._toggleCornerMarkers(0,f)},_onMarkerDragEnd:function(n){var s,c,f=n.target;f===this._moveMarker&&(s=this._shape.getBounds(),c=s.getCenter(),f.setLatLng(c)),this._toggleCornerMarkers(1),this._repositionCornerMarkers(),L.Edit.SimpleShape.prototype._onMarkerDragEnd.call(this,n)},_move:function(n){for(var s,c=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),f=this._shape.getBounds(),p=f.getCenter(),g=[],m=0,w=c.length;m<w;m++)s=[c[m].lat-p.lat,c[m].lng-p.lng],g.push([n.lat+s[0],n.lng+s[1]]);this._shape.setLatLngs(g),this._repositionCornerMarkers(),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})},_resize:function(n){var s;this._shape.setBounds(L.latLngBounds(n,this._oppositeCorner)),s=this._shape.getBounds(),this._moveMarker.setLatLng(s.getCenter()),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})},_getCorners:function(){var n=this._shape.getBounds();return[n.getNorthWest(),n.getNorthEast(),n.getSouthEast(),n.getSouthWest()]},_toggleCornerMarkers:function(n){for(var s=0,c=this._resizeMarkers.length;s<c;s++)this._resizeMarkers[s].setOpacity(n)},_repositionCornerMarkers:function(){for(var n=this._getCorners(),s=0,c=this._resizeMarkers.length;s<c;s++)this._resizeMarkers[s].setLatLng(n[s])}}),L.Rectangle.addInitHook(function(){L.Edit.Rectangle&&(this.editing=new L.Edit.Rectangle(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.CircleMarker=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var n=this._shape.getLatLng();this._moveMarker=this._createMarker(n,this.options.moveIcon)},_createResizeMarker:function(){this._resizeMarkers=[]},_move:function(n){if(this._resizeMarkers.length){var s=this._getResizeMarkerPoint(n);this._resizeMarkers[0].setLatLng(s)}this._shape.setLatLng(n),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})}}),L.CircleMarker.addInitHook(function(){L.Edit.CircleMarker&&(this.editing=new L.Edit.CircleMarker(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()})}),L.Edit=L.Edit||{},L.Edit.Circle=L.Edit.CircleMarker.extend({_createResizeMarker:function(){var n=this._shape.getLatLng(),s=this._getResizeMarkerPoint(n);this._resizeMarkers=[],this._resizeMarkers.push(this._createMarker(s,this.options.resizeIcon))},_getResizeMarkerPoint:function(n){var s=this._shape._radius*Math.cos(Math.PI/4),c=this._map.project(n);return this._map.unproject([c.x+s,c.y-s])},_resize:function(n){var s=this._moveMarker.getLatLng();L.GeometryUtil.isVersion07x()?radius=s.distanceTo(n):radius=this._map.distance(s,n),this._shape.setRadius(radius),this._map.editTooltip&&this._map._editTooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.subtext+"<br />"+L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(radius,!0,this.options.feet,this.options.nautic)}),this._shape.setRadius(radius),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})}}),L.Circle.addInitHook(function(){L.Edit.Circle&&(this.editing=new L.Edit.Circle(this),this.options.editable&&this.editing.enable())}),L.Map.mergeOptions({touchExtend:!0}),L.Map.TouchExtend=L.Handler.extend({initialize:function(n){this._map=n,this._container=n._container,this._pane=n._panes.overlayPane},addHooks:function(){L.DomEvent.on(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.on(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.on(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.on(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.on(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.on(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.on(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.on(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.on(this._container,"touchleave",this._onTouchLeave,this))},removeHooks:function(){L.DomEvent.off(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.off(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.off(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.off(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.off(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.off(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.off(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.off(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.off(this._container,"touchleave",this._onTouchLeave,this))},_touchEvent:function(n,s){var c={};if(n.touches!==void 0){if(!n.touches.length)return;c=n.touches[0]}else if(n.pointerType!=="touch"||(c=n,!this._filterClick(n)))return;var f=this._map.mouseEventToContainerPoint(c),p=this._map.mouseEventToLayerPoint(c),g=this._map.layerPointToLatLng(p);this._map.fire(s,{latlng:g,layerPoint:p,containerPoint:f,pageX:c.pageX,pageY:c.pageY,originalEvent:n})},_filterClick:function(n){var s=n.timeStamp||n.originalEvent.timeStamp,c=L.DomEvent._lastClick&&s-L.DomEvent._lastClick;return c&&c>100&&c<500||n.target._simulatedClick&&!n._simulated?(L.DomEvent.stop(n),!1):(L.DomEvent._lastClick=s,!0)},_onTouchStart:function(n){this._map._loaded&&this._touchEvent(n,"touchstart")},_onTouchEnd:function(n){this._map._loaded&&this._touchEvent(n,"touchend")},_onTouchCancel:function(n){if(this._map._loaded){var s="touchcancel";this._detectIE()&&(s="pointercancel"),this._touchEvent(n,s)}},_onTouchLeave:function(n){this._map._loaded&&this._touchEvent(n,"touchleave")},_onTouchMove:function(n){this._map._loaded&&this._touchEvent(n,"touchmove")},_detectIE:function(){var n=i.navigator.userAgent,s=n.indexOf("MSIE ");if(s>0)return parseInt(n.substring(s+5,n.indexOf(".",s)),10);if(n.indexOf("Trident/")>0){var c=n.indexOf("rv:");return parseInt(n.substring(c+3,n.indexOf(".",c)),10)}var f=n.indexOf("Edge/");return f>0&&parseInt(n.substring(f+5,n.indexOf(".",f)),10)}}),L.Map.addInitHook("addHandler","touchExtend",L.Map.TouchExtend),L.Marker.Touch=L.Marker.extend({_initInteraction:function(){return this.addInteractiveTarget?L.Marker.prototype._initInteraction.apply(this):this._initInteractionLegacy()},_initInteractionLegacy:function(){if(this.options.clickable){var n=this._icon,s=["dblclick","mousedown","mouseover","mouseout","contextmenu","touchstart","touchend","touchmove"];this._detectIE?s.concat(["MSPointerDown","MSPointerUp","MSPointerMove","MSPointerCancel"]):s.concat(["touchcancel"]),L.DomUtil.addClass(n,"leaflet-clickable"),L.DomEvent.on(n,"click",this._onMouseClick,this),L.DomEvent.on(n,"keypress",this._onKeyPress,this);for(var c=0;c<s.length;c++)L.DomEvent.on(n,s[c],this._fireMouseEvent,this);L.Handler.MarkerDrag&&(this.dragging=new L.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_detectIE:function(){var n=i.navigator.userAgent,s=n.indexOf("MSIE ");if(s>0)return parseInt(n.substring(s+5,n.indexOf(".",s)),10);if(n.indexOf("Trident/")>0){var c=n.indexOf("rv:");return parseInt(n.substring(c+3,n.indexOf(".",c)),10)}var f=n.indexOf("Edge/");return f>0&&parseInt(n.substring(f+5,n.indexOf(".",f)),10)}}),L.LatLngUtil={cloneLatLngs:function(n){for(var s=[],c=0,f=n.length;c<f;c++)Array.isArray(n[c])?s.push(L.LatLngUtil.cloneLatLngs(n[c])):s.push(this.cloneLatLng(n[c]));return s},cloneLatLng:function(n){return L.latLng(n.lat,n.lng)}},function(){var n={km:2,ha:2,m:0,mi:2,ac:2,yd:0,ft:0,nm:2};L.GeometryUtil=L.extend(L.GeometryUtil||{},{geodesicArea:function(s){var c,f,p=s.length,g=0,m=Math.PI/180;if(p>2){for(var w=0;w<p;w++)c=s[w],f=s[(w+1)%p],g+=(f.lng-c.lng)*m*(2+Math.sin(c.lat*m)+Math.sin(f.lat*m));g=6378137*g*6378137/2}return Math.abs(g)},formattedNumber:function(s,c){var f=parseFloat(s).toFixed(c),p=L.drawLocal.format&&L.drawLocal.format.numeric,g=p&&p.delimiters,m=g&&g.thousands,w=g&&g.decimal;if(m||w){var x=f.split(".");f=m?x[0].replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+m):x[0],w=w||".",x.length>1&&(f=f+w+x[1])}return f},readableArea:function(s,c,m){var p,g,m=L.Util.extend({},n,m);return c?(g=["ha","m"],type=typeof c,type==="string"?g=[c]:type!=="boolean"&&(g=c),p=s>=1e6&&g.indexOf("km")!==-1?L.GeometryUtil.formattedNumber(1e-6*s,m.km)+" km²":s>=1e4&&g.indexOf("ha")!==-1?L.GeometryUtil.formattedNumber(1e-4*s,m.ha)+" ha":L.GeometryUtil.formattedNumber(s,m.m)+" m²"):(s/=.836127,p=s>=3097600?L.GeometryUtil.formattedNumber(s/3097600,m.mi)+" mi²":s>=4840?L.GeometryUtil.formattedNumber(s/4840,m.ac)+" acres":L.GeometryUtil.formattedNumber(s,m.yd)+" yd²"),p},readableDistance:function(s,c,f,p,w){var m,w=L.Util.extend({},n,w);switch(c?typeof c=="string"?c:"metric":f?"feet":p?"nauticalMile":"yards"){case"metric":m=s>1e3?L.GeometryUtil.formattedNumber(s/1e3,w.km)+" km":L.GeometryUtil.formattedNumber(s,w.m)+" m";break;case"feet":s*=3.28083,m=L.GeometryUtil.formattedNumber(s,w.ft)+" ft";break;case"nauticalMile":s*=.53996,m=L.GeometryUtil.formattedNumber(s/1e3,w.nm)+" nm";break;case"yards":default:s*=1.09361,m=s>1760?L.GeometryUtil.formattedNumber(s/1760,w.mi)+" miles":L.GeometryUtil.formattedNumber(s,w.yd)+" yd"}return m},isVersion07x:function(){var s=L.version.split(".");return parseInt(s[0],10)===0&&parseInt(s[1],10)===7}})}(),L.Util.extend(L.LineUtil,{segmentsIntersect:function(n,s,c,f){return this._checkCounterclockwise(n,c,f)!==this._checkCounterclockwise(s,c,f)&&this._checkCounterclockwise(n,s,c)!==this._checkCounterclockwise(n,s,f)},_checkCounterclockwise:function(n,s,c){return(c.y-n.y)*(s.x-n.x)>(s.y-n.y)*(c.x-n.x)}}),L.Polyline.include({intersects:function(){var n,s,c,f=this._getProjectedPoints(),p=f?f.length:0;if(this._tooFewPointsForIntersection())return!1;for(n=p-1;n>=3;n--)if(s=f[n-1],c=f[n],this._lineSegmentsIntersectsRange(s,c,n-2))return!0;return!1},newLatLngIntersects:function(n,s){return!!this._map&&this.newPointIntersects(this._map.latLngToLayerPoint(n),s)},newPointIntersects:function(n,s){var c=this._getProjectedPoints(),f=c?c.length:0,p=c?c[f-1]:null,g=f-2;return!this._tooFewPointsForIntersection(1)&&this._lineSegmentsIntersectsRange(p,n,g,s?1:0)},_tooFewPointsForIntersection:function(n){var s=this._getProjectedPoints(),c=s?s.length:0;return c+=n||0,!s||c<=3},_lineSegmentsIntersectsRange:function(n,s,c,f){var p,g,m=this._getProjectedPoints();f=f||0;for(var w=c;w>f;w--)if(p=m[w-1],g=m[w],L.LineUtil.segmentsIntersect(n,s,p,g))return!0;return!1},_getProjectedPoints:function(){if(!this._defaultShape)return this._originalPoints;for(var n=[],s=this._defaultShape(),c=0;c<s.length;c++)n.push(this._map.latLngToLayerPoint(s[c]));return n}}),L.Polygon.include({intersects:function(){var n,s,c,f,p=this._getProjectedPoints();return!this._tooFewPointsForIntersection()&&(!!L.Polyline.prototype.intersects.call(this)||(n=p.length,s=p[0],c=p[n-1],f=n-2,this._lineSegmentsIntersectsRange(c,s,f,1)))}}),L.Control.Draw=L.Control.extend({options:{position:"topleft",draw:{},edit:!1},initialize:function(n){if(L.version<"0.7")throw new Error("Leaflet.draw 0.2.3+ requires Leaflet 0.7.0+. Download latest from https://github.com/Leaflet/Leaflet/");L.Control.prototype.initialize.call(this,n);var s;this._toolbars={},L.DrawToolbar&&this.options.draw&&(s=new L.DrawToolbar(this.options.draw),this._toolbars[L.DrawToolbar.TYPE]=s,this._toolbars[L.DrawToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.EditToolbar&&this.options.edit&&(s=new L.EditToolbar(this.options.edit),this._toolbars[L.EditToolbar.TYPE]=s,this._toolbars[L.EditToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.toolbar=this},onAdd:function(n){var s,c=L.DomUtil.create("div","leaflet-draw"),f=!1;for(var p in this._toolbars)this._toolbars.hasOwnProperty(p)&&(s=this._toolbars[p].addToolbar(n))&&(f||(L.DomUtil.hasClass(s,"leaflet-draw-toolbar-top")||L.DomUtil.addClass(s.childNodes[0],"leaflet-draw-toolbar-top"),f=!0),c.appendChild(s));return c},onRemove:function(){for(var n in this._toolbars)this._toolbars.hasOwnProperty(n)&&this._toolbars[n].removeToolbar()},setDrawingOptions:function(n){for(var s in this._toolbars)this._toolbars[s]instanceof L.DrawToolbar&&this._toolbars[s].setOptions(n)},_toolbarEnabled:function(n){var s=n.target;for(var c in this._toolbars)this._toolbars[c]!==s&&this._toolbars[c].disable()}}),L.Map.mergeOptions({drawControlTooltips:!0,drawControl:!1}),L.Map.addInitHook(function(){this.options.drawControl&&(this.drawControl=new L.Control.Draw,this.addControl(this.drawControl))}),L.Toolbar=L.Class.extend({initialize:function(n){L.setOptions(this,n),this._modes={},this._actionButtons=[],this._activeMode=null;var s=L.version.split(".");parseInt(s[0],10)===1&&parseInt(s[1],10)>=2?L.Toolbar.include(L.Evented.prototype):L.Toolbar.include(L.Mixin.Events)},enabled:function(){return this._activeMode!==null},disable:function(){this.enabled()&&this._activeMode.handler.disable()},addToolbar:function(n){var s,c=L.DomUtil.create("div","leaflet-draw-section"),f=0,p=this._toolbarClass||"",g=this.getModeHandlers(n);for(this._toolbarContainer=L.DomUtil.create("div","leaflet-draw-toolbar leaflet-bar"),this._map=n,s=0;s<g.length;s++)g[s].enabled&&this._initModeHandler(g[s].handler,this._toolbarContainer,f++,p,g[s].title);if(f)return this._lastButtonIndex=--f,this._actionsContainer=L.DomUtil.create("ul","leaflet-draw-actions"),c.appendChild(this._toolbarContainer),c.appendChild(this._actionsContainer),c},removeToolbar:function(){for(var n in this._modes)this._modes.hasOwnProperty(n)&&(this._disposeButton(this._modes[n].button,this._modes[n].handler.enable,this._modes[n].handler),this._modes[n].handler.disable(),this._modes[n].handler.off("enabled",this._handlerActivated,this).off("disabled",this._handlerDeactivated,this));this._modes={};for(var s=0,c=this._actionButtons.length;s<c;s++)this._disposeButton(this._actionButtons[s].button,this._actionButtons[s].callback,this);this._actionButtons=[],this._actionsContainer=null},_initModeHandler:function(n,s,c,f,p){var g=n.type;this._modes[g]={},this._modes[g].handler=n,this._modes[g].button=this._createButton({type:g,title:p,className:f+"-"+g,container:s,callback:this._modes[g].handler.enable,context:this._modes[g].handler}),this._modes[g].buttonIndex=c,this._modes[g].handler.on("enabled",this._handlerActivated,this).on("disabled",this._handlerDeactivated,this)},_detectIOS:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!i.MSStream},_createButton:function(n){var s=L.DomUtil.create("a",n.className||"",n.container),c=L.DomUtil.create("span","sr-only",n.container);s.href="#",s.appendChild(c),n.title&&(s.title=n.title,c.innerHTML=n.title),n.text&&(s.innerHTML=n.text,c.innerHTML=n.text);var f=this._detectIOS()?"touchstart":"click";return L.DomEvent.on(s,"click",L.DomEvent.stopPropagation).on(s,"mousedown",L.DomEvent.stopPropagation).on(s,"dblclick",L.DomEvent.stopPropagation).on(s,"touchstart",L.DomEvent.stopPropagation).on(s,"click",L.DomEvent.preventDefault).on(s,f,n.callback,n.context),s},_disposeButton:function(n,s){var c=this._detectIOS()?"touchstart":"click";L.DomEvent.off(n,"click",L.DomEvent.stopPropagation).off(n,"mousedown",L.DomEvent.stopPropagation).off(n,"dblclick",L.DomEvent.stopPropagation).off(n,"touchstart",L.DomEvent.stopPropagation).off(n,"click",L.DomEvent.preventDefault).off(n,c,s)},_handlerActivated:function(n){this.disable(),this._activeMode=this._modes[n.handler],L.DomUtil.addClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._showActionsToolbar(),this.fire("enable")},_handlerDeactivated:function(){this._hideActionsToolbar(),L.DomUtil.removeClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._activeMode=null,this.fire("disable")},_createActions:function(n){var s,c,f,p,g=this._actionsContainer,m=this.getActions(n),w=m.length;for(c=0,f=this._actionButtons.length;c<f;c++)this._disposeButton(this._actionButtons[c].button,this._actionButtons[c].callback);for(this._actionButtons=[];g.firstChild;)g.removeChild(g.firstChild);for(var x=0;x<w;x++)"enabled"in m[x]&&!m[x].enabled||(s=L.DomUtil.create("li","",g),p=this._createButton({title:m[x].title,text:m[x].text,container:s,callback:m[x].callback,context:m[x].context}),this._actionButtons.push({button:p,callback:m[x].callback}))},_showActionsToolbar:function(){var n=this._activeMode.buttonIndex,s=this._lastButtonIndex,c=this._activeMode.button.offsetTop-1;this._createActions(this._activeMode.handler),this._actionsContainer.style.top=c+"px",n===0&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-top")),n===s&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-bottom")),this._actionsContainer.style.display="block",this._map.fire(L.Draw.Event.TOOLBAROPENED)},_hideActionsToolbar:function(){this._actionsContainer.style.display="none",L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-top"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-bottom"),this._map.fire(L.Draw.Event.TOOLBARCLOSED)}}),L.Draw=L.Draw||{},L.Draw.Tooltip=L.Class.extend({initialize:function(n){this._map=n,this._popupPane=n._panes.popupPane,this._visible=!1,this._container=n.options.drawControlTooltips?L.DomUtil.create("div","leaflet-draw-tooltip",this._popupPane):null,this._singleLineLabel=!1,this._map.on("mouseout",this._onMouseOut,this)},dispose:function(){this._map.off("mouseout",this._onMouseOut,this),this._container&&(this._popupPane.removeChild(this._container),this._container=null)},updateContent:function(n){return this._container?(n.subtext=n.subtext||"",n.subtext.length!==0||this._singleLineLabel?n.subtext.length>0&&this._singleLineLabel&&(L.DomUtil.removeClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!1):(L.DomUtil.addClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!0),this._container.innerHTML=(n.subtext.length>0?'<span class="leaflet-draw-tooltip-subtext">'+n.subtext+"</span><br />":"")+"<span>"+n.text+"</span>",n.text||n.subtext?(this._visible=!0,this._container.style.visibility="inherit"):(this._visible=!1,this._container.style.visibility="hidden"),this):this},updatePosition:function(n){var s=this._map.latLngToLayerPoint(n),c=this._container;return this._container&&(this._visible&&(c.style.visibility="inherit"),L.DomUtil.setPosition(c,s)),this},showAsError:function(){return this._container&&L.DomUtil.addClass(this._container,"leaflet-error-draw-tooltip"),this},removeError:function(){return this._container&&L.DomUtil.removeClass(this._container,"leaflet-error-draw-tooltip"),this},_onMouseOut:function(){this._container&&(this._container.style.visibility="hidden")}}),L.DrawToolbar=L.Toolbar.extend({statics:{TYPE:"draw"},options:{polyline:{},polygon:{},rectangle:{},circle:{},marker:{},circlemarker:{}},initialize:function(n){for(var s in this.options)this.options.hasOwnProperty(s)&&n[s]&&(n[s]=L.extend({},this.options[s],n[s]));this._toolbarClass="leaflet-draw-draw",L.Toolbar.prototype.initialize.call(this,n)},getModeHandlers:function(n){return[{enabled:this.options.polyline,handler:new L.Draw.Polyline(n,this.options.polyline),title:L.drawLocal.draw.toolbar.buttons.polyline},{enabled:this.options.polygon,handler:new L.Draw.Polygon(n,this.options.polygon),title:L.drawLocal.draw.toolbar.buttons.polygon},{enabled:this.options.rectangle,handler:new L.Draw.Rectangle(n,this.options.rectangle),title:L.drawLocal.draw.toolbar.buttons.rectangle},{enabled:this.options.circle,handler:new L.Draw.Circle(n,this.options.circle),title:L.drawLocal.draw.toolbar.buttons.circle},{enabled:this.options.marker,handler:new L.Draw.Marker(n,this.options.marker),title:L.drawLocal.draw.toolbar.buttons.marker},{enabled:this.options.circlemarker,handler:new L.Draw.CircleMarker(n,this.options.circlemarker),title:L.drawLocal.draw.toolbar.buttons.circlemarker}]},getActions:function(n){return[{enabled:n.completeShape,title:L.drawLocal.draw.toolbar.finish.title,text:L.drawLocal.draw.toolbar.finish.text,callback:n.completeShape,context:n},{enabled:n.deleteLastVertex,title:L.drawLocal.draw.toolbar.undo.title,text:L.drawLocal.draw.toolbar.undo.text,callback:n.deleteLastVertex,context:n},{title:L.drawLocal.draw.toolbar.actions.title,text:L.drawLocal.draw.toolbar.actions.text,callback:this.disable,context:this}]},setOptions:function(n){L.setOptions(this,n);for(var s in this._modes)this._modes.hasOwnProperty(s)&&n.hasOwnProperty(s)&&this._modes[s].handler.setOptions(n[s])}}),L.EditToolbar=L.Toolbar.extend({statics:{TYPE:"edit"},options:{edit:{selectedPathOptions:{dashArray:"10, 10",fill:!0,fillColor:"#fe57a1",fillOpacity:.1,maintainColor:!1}},remove:{},poly:null,featureGroup:null},initialize:function(n){n.edit&&(n.edit.selectedPathOptions===void 0&&(n.edit.selectedPathOptions=this.options.edit.selectedPathOptions),n.edit.selectedPathOptions=L.extend({},this.options.edit.selectedPathOptions,n.edit.selectedPathOptions)),n.remove&&(n.remove=L.extend({},this.options.remove,n.remove)),n.poly&&(n.poly=L.extend({},this.options.poly,n.poly)),this._toolbarClass="leaflet-draw-edit",L.Toolbar.prototype.initialize.call(this,n),this._selectedFeatureCount=0},getModeHandlers:function(n){var s=this.options.featureGroup;return[{enabled:this.options.edit,handler:new L.EditToolbar.Edit(n,{featureGroup:s,selectedPathOptions:this.options.edit.selectedPathOptions,poly:this.options.poly}),title:L.drawLocal.edit.toolbar.buttons.edit},{enabled:this.options.remove,handler:new L.EditToolbar.Delete(n,{featureGroup:s}),title:L.drawLocal.edit.toolbar.buttons.remove}]},getActions:function(n){var s=[{title:L.drawLocal.edit.toolbar.actions.save.title,text:L.drawLocal.edit.toolbar.actions.save.text,callback:this._save,context:this},{title:L.drawLocal.edit.toolbar.actions.cancel.title,text:L.drawLocal.edit.toolbar.actions.cancel.text,callback:this.disable,context:this}];return n.removeAllLayers&&s.push({title:L.drawLocal.edit.toolbar.actions.clearAll.title,text:L.drawLocal.edit.toolbar.actions.clearAll.text,callback:this._clearAllLayers,context:this}),s},addToolbar:function(n){var s=L.Toolbar.prototype.addToolbar.call(this,n);return this._checkDisabled(),this.options.featureGroup.on("layeradd layerremove",this._checkDisabled,this),s},removeToolbar:function(){this.options.featureGroup.off("layeradd layerremove",this._checkDisabled,this),L.Toolbar.prototype.removeToolbar.call(this)},disable:function(){this.enabled()&&(this._activeMode.handler.revertLayers(),L.Toolbar.prototype.disable.call(this))},_save:function(){this._activeMode.handler.save(),this._activeMode&&this._activeMode.handler.disable()},_clearAllLayers:function(){this._activeMode.handler.removeAllLayers(),this._activeMode&&this._activeMode.handler.disable()},_checkDisabled:function(){var n,s=this.options.featureGroup,c=s.getLayers().length!==0;this.options.edit&&(n=this._modes[L.EditToolbar.Edit.TYPE].button,c?L.DomUtil.removeClass(n,"leaflet-disabled"):L.DomUtil.addClass(n,"leaflet-disabled"),n.setAttribute("title",c?L.drawLocal.edit.toolbar.buttons.edit:L.drawLocal.edit.toolbar.buttons.editDisabled)),this.options.remove&&(n=this._modes[L.EditToolbar.Delete.TYPE].button,c?L.DomUtil.removeClass(n,"leaflet-disabled"):L.DomUtil.addClass(n,"leaflet-disabled"),n.setAttribute("title",c?L.drawLocal.edit.toolbar.buttons.remove:L.drawLocal.edit.toolbar.buttons.removeDisabled))}}),L.EditToolbar.Edit=L.Handler.extend({statics:{TYPE:"edit"},initialize:function(n,s){if(L.Handler.prototype.initialize.call(this,n),L.setOptions(this,s),this._featureGroup=s.featureGroup,!(this._featureGroup instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this._uneditedLayerProps={},this.type=L.EditToolbar.Edit.TYPE;var c=L.version.split(".");parseInt(c[0],10)===1&&parseInt(c[1],10)>=2?L.EditToolbar.Edit.include(L.Evented.prototype):L.EditToolbar.Edit.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.EDITSTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._featureGroup.on("layeradd",this._enableLayerEdit,this).on("layerremove",this._disableLayerEdit,this))},disable:function(){this._enabled&&(this._featureGroup.off("layeradd",this._enableLayerEdit,this).off("layerremove",this._disableLayerEdit,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.EDITSTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var n=this._map;n&&(n.getContainer().focus(),this._featureGroup.eachLayer(this._enableLayerEdit,this),this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}),n._editTooltip=this._tooltip,this._updateTooltip(),this._map.on("mousemove",this._onMouseMove,this).on("touchmove",this._onMouseMove,this).on("MSPointerMove",this._onMouseMove,this).on(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},removeHooks:function(){this._map&&(this._featureGroup.eachLayer(this._disableLayerEdit,this),this._uneditedLayerProps={},this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this).off("touchmove",this._onMouseMove,this).off("MSPointerMove",this._onMouseMove,this).off(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},revertLayers:function(){this._featureGroup.eachLayer(function(n){this._revertLayer(n)},this)},save:function(){var n=new L.LayerGroup;this._featureGroup.eachLayer(function(s){s.edited&&(n.addLayer(s),s.edited=!1)}),this._map.fire(L.Draw.Event.EDITED,{layers:n})},_backupLayer:function(n){var s=L.Util.stamp(n);this._uneditedLayerProps[s]||(n instanceof L.Polyline||n instanceof L.Polygon||n instanceof L.Rectangle?this._uneditedLayerProps[s]={latlngs:L.LatLngUtil.cloneLatLngs(n.getLatLngs())}:n instanceof L.Circle?this._uneditedLayerProps[s]={latlng:L.LatLngUtil.cloneLatLng(n.getLatLng()),radius:n.getRadius()}:(n instanceof L.Marker||n instanceof L.CircleMarker)&&(this._uneditedLayerProps[s]={latlng:L.LatLngUtil.cloneLatLng(n.getLatLng())}))},_getTooltipText:function(){return{text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}},_updateTooltip:function(){this._tooltip.updateContent(this._getTooltipText())},_revertLayer:function(n){var s=L.Util.stamp(n);n.edited=!1,this._uneditedLayerProps.hasOwnProperty(s)&&(n instanceof L.Polyline||n instanceof L.Polygon||n instanceof L.Rectangle?n.setLatLngs(this._uneditedLayerProps[s].latlngs):n instanceof L.Circle?(n.setLatLng(this._uneditedLayerProps[s].latlng),n.setRadius(this._uneditedLayerProps[s].radius)):(n instanceof L.Marker||n instanceof L.CircleMarker)&&n.setLatLng(this._uneditedLayerProps[s].latlng),n.fire("revert-edited",{layer:n}))},_enableLayerEdit:function(n){var s,c,f=n.layer||n.target||n;this._backupLayer(f),this.options.poly&&(c=L.Util.extend({},this.options.poly),f.options.poly=c),this.options.selectedPathOptions&&(s=L.Util.extend({},this.options.selectedPathOptions),s.maintainColor&&(s.color=f.options.color,s.fillColor=f.options.fillColor),f.options.original=L.extend({},f.options),f.options.editing=s),f instanceof L.Marker?(f.editing&&f.editing.enable(),f.dragging.enable(),f.on("dragend",this._onMarkerDragEnd).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onMarkerDragEnd,this).on("MSPointerUp",this._onMarkerDragEnd,this)):f.editing.enable()},_disableLayerEdit:function(n){var s=n.layer||n.target||n;s.edited=!1,s.editing&&s.editing.disable(),delete s.options.editing,delete s.options.original,this._selectedPathOptions&&(s instanceof L.Marker?this._toggleMarkerHighlight(s):(s.setStyle(s.options.previousOptions),delete s.options.previousOptions)),s instanceof L.Marker?(s.dragging.disable(),s.off("dragend",this._onMarkerDragEnd,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onMarkerDragEnd,this).off("MSPointerUp",this._onMarkerDragEnd,this)):s.editing.disable()},_onMouseMove:function(n){this._tooltip.updatePosition(n.latlng)},_onMarkerDragEnd:function(n){var s=n.target;s.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:s})},_onTouchMove:function(n){var s=n.originalEvent.changedTouches[0],c=this._map.mouseEventToLayerPoint(s),f=this._map.layerPointToLatLng(c);n.target.setLatLng(f)},_hasAvailableLayers:function(){return this._featureGroup.getLayers().length!==0}}),L.EditToolbar.Delete=L.Handler.extend({statics:{TYPE:"remove"},initialize:function(n,s){if(L.Handler.prototype.initialize.call(this,n),L.Util.setOptions(this,s),this._deletableLayers=this.options.featureGroup,!(this._deletableLayers instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this.type=L.EditToolbar.Delete.TYPE;var c=L.version.split(".");parseInt(c[0],10)===1&&parseInt(c[1],10)>=2?L.EditToolbar.Delete.include(L.Evented.prototype):L.EditToolbar.Delete.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DELETESTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._deletableLayers.on("layeradd",this._enableLayerDelete,this).on("layerremove",this._disableLayerDelete,this))},disable:function(){this._enabled&&(this._deletableLayers.off("layeradd",this._enableLayerDelete,this).off("layerremove",this._disableLayerDelete,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DELETESTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var n=this._map;n&&(n.getContainer().focus(),this._deletableLayers.eachLayer(this._enableLayerDelete,this),this._deletedLayers=new L.LayerGroup,this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.remove.tooltip.text}),this._map.on("mousemove",this._onMouseMove,this))},removeHooks:function(){this._map&&(this._deletableLayers.eachLayer(this._disableLayerDelete,this),this._deletedLayers=null,this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this))},revertLayers:function(){this._deletedLayers.eachLayer(function(n){this._deletableLayers.addLayer(n),n.fire("revert-deleted",{layer:n})},this)},save:function(){this._map.fire(L.Draw.Event.DELETED,{layers:this._deletedLayers})},removeAllLayers:function(){this._deletableLayers.eachLayer(function(n){this._removeLayer({layer:n})},this),this.save()},_enableLayerDelete:function(n){(n.layer||n.target||n).on("click",this._removeLayer,this)},_disableLayerDelete:function(n){var s=n.layer||n.target||n;s.off("click",this._removeLayer,this),this._deletedLayers.removeLayer(s)},_removeLayer:function(n){var s=n.layer||n.target||n;this._deletableLayers.removeLayer(s),this._deletedLayers.addLayer(s),s.fire("deleted")},_onMouseMove:function(n){this._tooltip.updatePosition(n.latlng)},_hasAvailableLayers:function(){return this._deletableLayers.getLayers().length!==0}})})(window,document);function Mo(i,u){var r=Object.keys(i);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(i);u&&(l=l.filter(function(n){return Object.getOwnPropertyDescriptor(i,n).enumerable})),r.push.apply(r,l)}return r}function we(i){for(var u=1;u<arguments.length;u++){var r=arguments[u]!=null?arguments[u]:{};u%2?Mo(Object(r),!0).forEach(function(l){la(i,l,r[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(r)):Mo(Object(r)).forEach(function(l){Object.defineProperty(i,l,Object.getOwnPropertyDescriptor(r,l))})}return i}function la(i,u,r){return u in i?Object.defineProperty(i,u,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[u]=r,i}var jt={onEdited:"draw:edited",onDrawStart:"draw:drawstart",onDrawStop:"draw:drawstop",onDrawVertex:"draw:drawvertex",onEditStart:"draw:editstart",onEditMove:"draw:editmove",onEditResize:"draw:editresize",onEditVertex:"draw:editvertex",onEditStop:"draw:editstop",onDeleted:"draw:deleted",onDeleteStart:"draw:deletestart",onDeleteStop:"draw:deletestop"};function Zo(i){var u=Ce(),r=F.useRef(),l=F.useRef(i),n=function(c){var f=i.onCreated,p=u.layerContainer||u.map;p.addLayer(c.layer),f&&f(c)};return Pe.useEffect(function(){var s=u.map,c=i.onMounted;for(var f in jt)s.on(jt[f],function(p){var g=Object.keys(jt).filter(function(w){return jt[w]===p.type});if(g.length===1){var m=g[0];i[m]&&i[m](p)}});return s.on(Lo.Draw.Event.CREATED,n),r.current=bo(i,u),s.addControl(r.current),c&&c(r.current),function(){s.off(Lo.Draw.Event.CREATED,n);for(var p in jt)i[p]&&s.off(jt[p],i[p]);r.current.remove(s)}},[i.onCreated,i.onDeleted,i.onEdited]),Pe.useEffect(function(){if(!(vo(i.draw,l.current.draw)&&vo(i.edit,l.current.edit)&&i.position===l.current.position)){var s=u.map;r.current.remove(s),r.current=bo(i,u),r.current.addTo(s);var c=i.onMounted;return c&&c(r.current),function(){r.current.remove(s)}}},[i.draw,i.edit,i.position,i.onCreated,i.onDeleted,i.onEdited]),null}function bo(i,u){var r=u.layerContainer,l=i.draw,n=i.edit,s=i.position,c={edit:we(we({},n),{},{featureGroup:r})};return l&&(c.draw=we({},l)),s&&(c.position=s),new Ct.Control.Draw(c)}Zo.propTypes=we(we({},Object.keys(jt).reduce(function(i,u){return i[u]=G.PropTypes.func,i},{})),{},{onCreated:G.PropTypes.func,onMounted:G.PropTypes.func,draw:G.PropTypes.shape({polyline:G.PropTypes.oneOfType([G.PropTypes.object,G.PropTypes.bool]),polygon:G.PropTypes.oneOfType([G.PropTypes.object,G.PropTypes.bool]),rectangle:G.PropTypes.oneOfType([G.PropTypes.object,G.PropTypes.bool]),circle:G.PropTypes.oneOfType([G.PropTypes.object,G.PropTypes.bool]),marker:G.PropTypes.oneOfType([G.PropTypes.object,G.PropTypes.bool])}),edit:G.PropTypes.shape({edit:G.PropTypes.oneOfType([G.PropTypes.object,G.PropTypes.bool]),remove:G.PropTypes.oneOfType([G.PropTypes.object,G.PropTypes.bool]),poly:G.PropTypes.oneOfType([G.PropTypes.object,G.PropTypes.bool]),allowIntersection:G.PropTypes.bool}),position:G.PropTypes.oneOf(["topright","topleft","bottomright","bottomleft"]),leaflet:G.PropTypes.shape({map:G.PropTypes.instanceOf(Ct.Map),layerContainer:G.PropTypes.shape({addLayer:G.PropTypes.func.isRequired,removeLayer:G.PropTypes.func.isRequired})})});const ua=({setFormCoordinates:i,setFieldAccessPoint:u,setRobotHome:r,mode:l,setMode:n,setLocationInfo:s})=>{const[c,f]=F.useState([]),[p,g]=F.useState(),[m,w]=F.useState();if(typeof window>"u")return null;const x=async(S,O)=>{try{return(await Ms.get(`https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${S}&lon=${O}`)).data.display_name}catch(E){return console.error("Reverse geocode error:",E),null}},P=async S=>{const{layerType:O,layer:E}=S;if(console.log("layerType:",O),O==="polygon"||O==="rectangle"){const D=E.getLatLngs()[0].map(ot=>({lat:ot.lat,lng:ot.lng}));i(D),f(D),console.log(D);const J=[...D,D[0]],Y=Ts([J.map(ot=>[ot.lng,ot.lat])]),Bt=Ds(Y)/4046.86,Ht=As(Y),[Zt,Wt]=Ht.geometry.coordinates,nt=await x(Wt,Zt);s({location:nt,area:Bt.toFixed(2)}),console.log(D)}},M=()=>(Js({click(S){const{lat:O,lng:E}=S.latlng;if(l==="field_access_point"){const V={lat:O,lng:E};g(V),u(V),n("idle")}else if(l==="robot_home"){const V={lat:O,lng:E};w(V),r(V),n("idle")}}}),null);return T.jsx("div",{children:T.jsxs(ia,{center:[17.385,78.4867],zoom:13,style:{height:"550px",width:"80%"},children:[T.jsx(oa,{url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}"}),T.jsx(M,{}),T.jsxs(ta,{children:[T.jsx(Zo,{position:"topleft",onCreated:P,onDeleted:()=>{f([]),i([]),g(void 0),w(void 0),u(null),r(null),s(null)},draw:{rectangle:!0,circle:!1,circlemarker:!1,polygon:!0,marker:!1,polyline:!1}}),c.length>0&&T.jsx(na,{positions:c,pathOptions:{color:"white",weight:1,fillColor:"rgba(144, 222, 144, 0.5)",fillOpacity:.5}}),c.map((S,O)=>T.jsx(Qs,{center:[S.lat,S.lng],radius:4,pathOptions:{color:"green",fillColor:"green",fillOpacity:1}},O))]}),p&&T.jsx(wo,{position:[p.lat,p.lng],children:T.jsx(xo,{children:"Field Access Point"})}),m&&T.jsx(wo,{position:[m.lat,m.lng],children:T.jsx(xo,{children:"Robot Home"})})]})})};/**
   * table-core
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function At(i,u){return typeof i=="function"?i(u):i}function ft(i,u){return r=>{u.setState(l=>({...l,[i]:At(r,l[i])}))}}function Ke(i){return i instanceof Function}function ha(i){return Array.isArray(i)&&i.every(u=>typeof u=="number")}function ca(i,u){const r=[],l=n=>{n.forEach(s=>{r.push(s);const c=u(s);c!=null&&c.length&&l(c)})};return l(i),r}function I(i,u,r){let l=[],n;return s=>{let c;r.key&&r.debug&&(c=Date.now());const f=i(s);if(!(f.length!==l.length||f.some((m,w)=>l[w]!==m)))return n;l=f;let g;if(r.key&&r.debug&&(g=Date.now()),n=u(...f),r==null||r.onChange==null||r.onChange(n),r.key&&r.debug&&r!=null&&r.debug()){const m=Math.round((Date.now()-c)*100)/100,w=Math.round((Date.now()-g)*100)/100,x=w/16,P=(M,S)=>{for(M=String(M);M.length<S;)M=" "+M;return M};console.info(`%c⏱ ${P(w,5)} /${P(m,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*x,120))}deg 100% 31%);`,r==null?void 0:r.key)}return n}}function z(i,u,r,l){return{debug:()=>{var n;return(n=i==null?void 0:i.debugAll)!=null?n:i[u]},key:!1,onChange:l}}function da(i,u,r,l){const n=()=>{var c;return(c=s.getValue())!=null?c:i.options.renderFallbackValue},s={id:`${u.id}_${r.id}`,row:u,column:r,getValue:()=>u.getValue(l),renderValue:n,getContext:I(()=>[i,r,u,s],(c,f,p,g)=>({table:c,column:f,row:p,cell:g,getValue:g.getValue,renderValue:g.renderValue}),z(i.options,"debugCells"))};return i._features.forEach(c=>{c.createCell==null||c.createCell(s,r,u,i)},{}),s}function fa(i,u,r,l){var n,s;const f={...i._getDefaultColumnDef(),...u},p=f.accessorKey;let g=(n=(s=f.id)!=null?s:p?typeof String.prototype.replaceAll=="function"?p.replaceAll(".","_"):p.replace(/\./g,"_"):void 0)!=null?n:typeof f.header=="string"?f.header:void 0,m;if(f.accessorFn?m=f.accessorFn:p&&(p.includes(".")?m=x=>{let P=x;for(const S of p.split(".")){var M;P=(M=P)==null?void 0:M[S]}return P}:m=x=>x[f.accessorKey]),!g)throw new Error;let w={id:`${String(g)}`,accessorFn:m,parent:l,depth:r,columnDef:f,columns:[],getFlatColumns:I(()=>[!0],()=>{var x;return[w,...(x=w.columns)==null?void 0:x.flatMap(P=>P.getFlatColumns())]},z(i.options,"debugColumns")),getLeafColumns:I(()=>[i._getOrderColumnsFn()],x=>{var P;if((P=w.columns)!=null&&P.length){let M=w.columns.flatMap(S=>S.getLeafColumns());return x(M)}return[w]},z(i.options,"debugColumns"))};for(const x of i._features)x.createColumn==null||x.createColumn(w,i);return w}const at="debugHeaders";function To(i,u,r){var l;let s={id:(l=r.id)!=null?l:u.id,column:u,index:r.index,isPlaceholder:!!r.isPlaceholder,placeholderId:r.placeholderId,depth:r.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{const c=[],f=p=>{p.subHeaders&&p.subHeaders.length&&p.subHeaders.map(f),c.push(p)};return f(s),c},getContext:()=>({table:i,header:s,column:u})};return i._features.forEach(c=>{c.createHeader==null||c.createHeader(s,i)}),s}const pa={createTable:i=>{i.getHeaderGroups=I(()=>[i.getAllColumns(),i.getVisibleLeafColumns(),i.getState().columnPinning.left,i.getState().columnPinning.right],(u,r,l,n)=>{var s,c;const f=(s=l==null?void 0:l.map(w=>r.find(x=>x.id===w)).filter(Boolean))!=null?s:[],p=(c=n==null?void 0:n.map(w=>r.find(x=>x.id===w)).filter(Boolean))!=null?c:[],g=r.filter(w=>!(l!=null&&l.includes(w.id))&&!(n!=null&&n.includes(w.id)));return $e(u,[...f,...g,...p],i)},z(i.options,at)),i.getCenterHeaderGroups=I(()=>[i.getAllColumns(),i.getVisibleLeafColumns(),i.getState().columnPinning.left,i.getState().columnPinning.right],(u,r,l,n)=>(r=r.filter(s=>!(l!=null&&l.includes(s.id))&&!(n!=null&&n.includes(s.id))),$e(u,r,i,"center")),z(i.options,at)),i.getLeftHeaderGroups=I(()=>[i.getAllColumns(),i.getVisibleLeafColumns(),i.getState().columnPinning.left],(u,r,l)=>{var n;const s=(n=l==null?void 0:l.map(c=>r.find(f=>f.id===c)).filter(Boolean))!=null?n:[];return $e(u,s,i,"left")},z(i.options,at)),i.getRightHeaderGroups=I(()=>[i.getAllColumns(),i.getVisibleLeafColumns(),i.getState().columnPinning.right],(u,r,l)=>{var n;const s=(n=l==null?void 0:l.map(c=>r.find(f=>f.id===c)).filter(Boolean))!=null?n:[];return $e(u,s,i,"right")},z(i.options,at)),i.getFooterGroups=I(()=>[i.getHeaderGroups()],u=>[...u].reverse(),z(i.options,at)),i.getLeftFooterGroups=I(()=>[i.getLeftHeaderGroups()],u=>[...u].reverse(),z(i.options,at)),i.getCenterFooterGroups=I(()=>[i.getCenterHeaderGroups()],u=>[...u].reverse(),z(i.options,at)),i.getRightFooterGroups=I(()=>[i.getRightHeaderGroups()],u=>[...u].reverse(),z(i.options,at)),i.getFlatHeaders=I(()=>[i.getHeaderGroups()],u=>u.map(r=>r.headers).flat(),z(i.options,at)),i.getLeftFlatHeaders=I(()=>[i.getLeftHeaderGroups()],u=>u.map(r=>r.headers).flat(),z(i.options,at)),i.getCenterFlatHeaders=I(()=>[i.getCenterHeaderGroups()],u=>u.map(r=>r.headers).flat(),z(i.options,at)),i.getRightFlatHeaders=I(()=>[i.getRightHeaderGroups()],u=>u.map(r=>r.headers).flat(),z(i.options,at)),i.getCenterLeafHeaders=I(()=>[i.getCenterFlatHeaders()],u=>u.filter(r=>{var l;return!((l=r.subHeaders)!=null&&l.length)}),z(i.options,at)),i.getLeftLeafHeaders=I(()=>[i.getLeftFlatHeaders()],u=>u.filter(r=>{var l;return!((l=r.subHeaders)!=null&&l.length)}),z(i.options,at)),i.getRightLeafHeaders=I(()=>[i.getRightFlatHeaders()],u=>u.filter(r=>{var l;return!((l=r.subHeaders)!=null&&l.length)}),z(i.options,at)),i.getLeafHeaders=I(()=>[i.getLeftHeaderGroups(),i.getCenterHeaderGroups(),i.getRightHeaderGroups()],(u,r,l)=>{var n,s,c,f,p,g;return[...(n=(s=u[0])==null?void 0:s.headers)!=null?n:[],...(c=(f=r[0])==null?void 0:f.headers)!=null?c:[],...(p=(g=l[0])==null?void 0:g.headers)!=null?p:[]].map(m=>m.getLeafHeaders()).flat()},z(i.options,at))}};function $e(i,u,r,l){var n,s;let c=0;const f=function(x,P){P===void 0&&(P=1),c=Math.max(c,P),x.filter(M=>M.getIsVisible()).forEach(M=>{var S;(S=M.columns)!=null&&S.length&&f(M.columns,P+1)},0)};f(i);let p=[];const g=(x,P)=>{const M={depth:P,id:[l,`${P}`].filter(Boolean).join("_"),headers:[]},S=[];x.forEach(O=>{const E=[...S].reverse()[0],V=O.column.depth===M.depth;let D,J=!1;if(V&&O.column.parent?D=O.column.parent:(D=O.column,J=!0),E&&(E==null?void 0:E.column)===D)E.subHeaders.push(O);else{const Y=To(r,D,{id:[l,P,D.id,O==null?void 0:O.id].filter(Boolean).join("_"),isPlaceholder:J,placeholderId:J?`${S.filter(Rt=>Rt.column===D).length}`:void 0,depth:P,index:S.length});Y.subHeaders.push(O),S.push(Y)}M.headers.push(O),O.headerGroup=M}),p.push(M),P>0&&g(S,P-1)},m=u.map((x,P)=>To(r,x,{depth:c,index:P}));g(m,c-1),p.reverse();const w=x=>x.filter(M=>M.column.getIsVisible()).map(M=>{let S=0,O=0,E=[0];M.subHeaders&&M.subHeaders.length?(E=[],w(M.subHeaders).forEach(D=>{let{colSpan:J,rowSpan:Y}=D;S+=J,E.push(Y)})):S=1;const V=Math.min(...E);return O=O+V,M.colSpan=S,M.rowSpan=O,{colSpan:S,rowSpan:O}});return w((n=(s=p[0])==null?void 0:s.headers)!=null?n:[]),p}const _a=(i,u,r,l,n,s,c)=>{let f={id:u,index:l,original:r,depth:n,parentId:c,_valuesCache:{},_uniqueValuesCache:{},getValue:p=>{if(f._valuesCache.hasOwnProperty(p))return f._valuesCache[p];const g=i.getColumn(p);if(g!=null&&g.accessorFn)return f._valuesCache[p]=g.accessorFn(f.original,l),f._valuesCache[p]},getUniqueValues:p=>{if(f._uniqueValuesCache.hasOwnProperty(p))return f._uniqueValuesCache[p];const g=i.getColumn(p);if(g!=null&&g.accessorFn)return g.columnDef.getUniqueValues?(f._uniqueValuesCache[p]=g.columnDef.getUniqueValues(f.original,l),f._uniqueValuesCache[p]):(f._uniqueValuesCache[p]=[f.getValue(p)],f._uniqueValuesCache[p])},renderValue:p=>{var g;return(g=f.getValue(p))!=null?g:i.options.renderFallbackValue},subRows:[],getLeafRows:()=>ca(f.subRows,p=>p.subRows),getParentRow:()=>f.parentId?i.getRow(f.parentId,!0):void 0,getParentRows:()=>{let p=[],g=f;for(;;){const m=g.getParentRow();if(!m)break;p.push(m),g=m}return p.reverse()},getAllCells:I(()=>[i.getAllLeafColumns()],p=>p.map(g=>da(i,f,g,g.id)),z(i.options,"debugRows")),_getAllCellsByColumnId:I(()=>[f.getAllCells()],p=>p.reduce((g,m)=>(g[m.column.id]=m,g),{}),z(i.options,"debugRows"))};for(let p=0;p<i._features.length;p++){const g=i._features[p];g==null||g.createRow==null||g.createRow(f,i)}return f},ga={createColumn:(i,u)=>{i._getFacetedRowModel=u.options.getFacetedRowModel&&u.options.getFacetedRowModel(u,i.id),i.getFacetedRowModel=()=>i._getFacetedRowModel?i._getFacetedRowModel():u.getPreFilteredRowModel(),i._getFacetedUniqueValues=u.options.getFacetedUniqueValues&&u.options.getFacetedUniqueValues(u,i.id),i.getFacetedUniqueValues=()=>i._getFacetedUniqueValues?i._getFacetedUniqueValues():new Map,i._getFacetedMinMaxValues=u.options.getFacetedMinMaxValues&&u.options.getFacetedMinMaxValues(u,i.id),i.getFacetedMinMaxValues=()=>{if(i._getFacetedMinMaxValues)return i._getFacetedMinMaxValues()}}},No=(i,u,r)=>{var l,n;const s=r==null||(l=r.toString())==null?void 0:l.toLowerCase();return!!(!((n=i.getValue(u))==null||(n=n.toString())==null||(n=n.toLowerCase())==null)&&n.includes(s))};No.autoRemove=i=>yt(i);const Go=(i,u,r)=>{var l;return!!(!((l=i.getValue(u))==null||(l=l.toString())==null)&&l.includes(r))};Go.autoRemove=i=>yt(i);const Vo=(i,u,r)=>{var l;return((l=i.getValue(u))==null||(l=l.toString())==null?void 0:l.toLowerCase())===(r==null?void 0:r.toLowerCase())};Vo.autoRemove=i=>yt(i);const $o=(i,u,r)=>{var l;return(l=i.getValue(u))==null?void 0:l.includes(r)};$o.autoRemove=i=>yt(i);const Uo=(i,u,r)=>!r.some(l=>{var n;return!((n=i.getValue(u))!=null&&n.includes(l))});Uo.autoRemove=i=>yt(i)||!(i!=null&&i.length);const jo=(i,u,r)=>r.some(l=>{var n;return(n=i.getValue(u))==null?void 0:n.includes(l)});jo.autoRemove=i=>yt(i)||!(i!=null&&i.length);const Wo=(i,u,r)=>i.getValue(u)===r;Wo.autoRemove=i=>yt(i);const qo=(i,u,r)=>i.getValue(u)==r;qo.autoRemove=i=>yt(i);const Xi=(i,u,r)=>{let[l,n]=r;const s=i.getValue(u);return s>=l&&s<=n};Xi.resolveFilterValue=i=>{let[u,r]=i,l=typeof u!="number"?parseFloat(u):u,n=typeof r!="number"?parseFloat(r):r,s=u===null||Number.isNaN(l)?-1/0:l,c=r===null||Number.isNaN(n)?1/0:n;if(s>c){const f=s;s=c,c=f}return[s,c]};Xi.autoRemove=i=>yt(i)||yt(i[0])&&yt(i[1]);const Dt={includesString:No,includesStringSensitive:Go,equalsString:Vo,arrIncludes:$o,arrIncludesAll:Uo,arrIncludesSome:jo,equals:Wo,weakEquals:qo,inNumberRange:Xi};function yt(i){return i==null||i===""}const ma={getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:i=>({columnFilters:[],...i}),getDefaultOptions:i=>({onColumnFiltersChange:ft("columnFilters",i),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(i,u)=>{i.getAutoFilterFn=()=>{const r=u.getCoreRowModel().flatRows[0],l=r==null?void 0:r.getValue(i.id);return typeof l=="string"?Dt.includesString:typeof l=="number"?Dt.inNumberRange:typeof l=="boolean"||l!==null&&typeof l=="object"?Dt.equals:Array.isArray(l)?Dt.arrIncludes:Dt.weakEquals},i.getFilterFn=()=>{var r,l;return Ke(i.columnDef.filterFn)?i.columnDef.filterFn:i.columnDef.filterFn==="auto"?i.getAutoFilterFn():(r=(l=u.options.filterFns)==null?void 0:l[i.columnDef.filterFn])!=null?r:Dt[i.columnDef.filterFn]},i.getCanFilter=()=>{var r,l,n;return((r=i.columnDef.enableColumnFilter)!=null?r:!0)&&((l=u.options.enableColumnFilters)!=null?l:!0)&&((n=u.options.enableFilters)!=null?n:!0)&&!!i.accessorFn},i.getIsFiltered=()=>i.getFilterIndex()>-1,i.getFilterValue=()=>{var r;return(r=u.getState().columnFilters)==null||(r=r.find(l=>l.id===i.id))==null?void 0:r.value},i.getFilterIndex=()=>{var r,l;return(r=(l=u.getState().columnFilters)==null?void 0:l.findIndex(n=>n.id===i.id))!=null?r:-1},i.setFilterValue=r=>{u.setColumnFilters(l=>{const n=i.getFilterFn(),s=l==null?void 0:l.find(m=>m.id===i.id),c=At(r,s?s.value:void 0);if(Eo(n,c,i)){var f;return(f=l==null?void 0:l.filter(m=>m.id!==i.id))!=null?f:[]}const p={id:i.id,value:c};if(s){var g;return(g=l==null?void 0:l.map(m=>m.id===i.id?p:m))!=null?g:[]}return l!=null&&l.length?[...l,p]:[p]})}},createRow:(i,u)=>{i.columnFilters={},i.columnFiltersMeta={}},createTable:i=>{i.setColumnFilters=u=>{const r=i.getAllLeafColumns(),l=n=>{var s;return(s=At(u,n))==null?void 0:s.filter(c=>{const f=r.find(p=>p.id===c.id);if(f){const p=f.getFilterFn();if(Eo(p,c.value,f))return!1}return!0})};i.options.onColumnFiltersChange==null||i.options.onColumnFiltersChange(l)},i.resetColumnFilters=u=>{var r,l;i.setColumnFilters(u?[]:(r=(l=i.initialState)==null?void 0:l.columnFilters)!=null?r:[])},i.getPreFilteredRowModel=()=>i.getCoreRowModel(),i.getFilteredRowModel=()=>(!i._getFilteredRowModel&&i.options.getFilteredRowModel&&(i._getFilteredRowModel=i.options.getFilteredRowModel(i)),i.options.manualFiltering||!i._getFilteredRowModel?i.getPreFilteredRowModel():i._getFilteredRowModel())}};function Eo(i,u,r){return(i&&i.autoRemove?i.autoRemove(u,r):!1)||typeof u>"u"||typeof u=="string"&&!u}const va=(i,u,r)=>r.reduce((l,n)=>{const s=n.getValue(i);return l+(typeof s=="number"?s:0)},0),ya=(i,u,r)=>{let l;return r.forEach(n=>{const s=n.getValue(i);s!=null&&(l>s||l===void 0&&s>=s)&&(l=s)}),l},La=(i,u,r)=>{let l;return r.forEach(n=>{const s=n.getValue(i);s!=null&&(l<s||l===void 0&&s>=s)&&(l=s)}),l},wa=(i,u,r)=>{let l,n;return r.forEach(s=>{const c=s.getValue(i);c!=null&&(l===void 0?c>=c&&(l=n=c):(l>c&&(l=c),n<c&&(n=c)))}),[l,n]},xa=(i,u)=>{let r=0,l=0;if(u.forEach(n=>{let s=n.getValue(i);s!=null&&(s=+s)>=s&&(++r,l+=s)}),r)return l/r},Pa=(i,u)=>{if(!u.length)return;const r=u.map(s=>s.getValue(i));if(!ha(r))return;if(r.length===1)return r[0];const l=Math.floor(r.length/2),n=r.sort((s,c)=>s-c);return r.length%2!==0?n[l]:(n[l-1]+n[l])/2},Ca=(i,u)=>Array.from(new Set(u.map(r=>r.getValue(i))).values()),Sa=(i,u)=>new Set(u.map(r=>r.getValue(i))).size,Ma=(i,u)=>u.length,Ai={sum:va,min:ya,max:La,extent:wa,mean:xa,median:Pa,unique:Ca,uniqueCount:Sa,count:Ma},ba={getDefaultColumnDef:()=>({aggregatedCell:i=>{var u,r;return(u=(r=i.getValue())==null||r.toString==null?void 0:r.toString())!=null?u:null},aggregationFn:"auto"}),getInitialState:i=>({grouping:[],...i}),getDefaultOptions:i=>({onGroupingChange:ft("grouping",i),groupedColumnMode:"reorder"}),createColumn:(i,u)=>{i.toggleGrouping=()=>{u.setGrouping(r=>r!=null&&r.includes(i.id)?r.filter(l=>l!==i.id):[...r??[],i.id])},i.getCanGroup=()=>{var r,l;return((r=i.columnDef.enableGrouping)!=null?r:!0)&&((l=u.options.enableGrouping)!=null?l:!0)&&(!!i.accessorFn||!!i.columnDef.getGroupingValue)},i.getIsGrouped=()=>{var r;return(r=u.getState().grouping)==null?void 0:r.includes(i.id)},i.getGroupedIndex=()=>{var r;return(r=u.getState().grouping)==null?void 0:r.indexOf(i.id)},i.getToggleGroupingHandler=()=>{const r=i.getCanGroup();return()=>{r&&i.toggleGrouping()}},i.getAutoAggregationFn=()=>{const r=u.getCoreRowModel().flatRows[0],l=r==null?void 0:r.getValue(i.id);if(typeof l=="number")return Ai.sum;if(Object.prototype.toString.call(l)==="[object Date]")return Ai.extent},i.getAggregationFn=()=>{var r,l;if(!i)throw new Error;return Ke(i.columnDef.aggregationFn)?i.columnDef.aggregationFn:i.columnDef.aggregationFn==="auto"?i.getAutoAggregationFn():(r=(l=u.options.aggregationFns)==null?void 0:l[i.columnDef.aggregationFn])!=null?r:Ai[i.columnDef.aggregationFn]}},createTable:i=>{i.setGrouping=u=>i.options.onGroupingChange==null?void 0:i.options.onGroupingChange(u),i.resetGrouping=u=>{var r,l;i.setGrouping(u?[]:(r=(l=i.initialState)==null?void 0:l.grouping)!=null?r:[])},i.getPreGroupedRowModel=()=>i.getFilteredRowModel(),i.getGroupedRowModel=()=>(!i._getGroupedRowModel&&i.options.getGroupedRowModel&&(i._getGroupedRowModel=i.options.getGroupedRowModel(i)),i.options.manualGrouping||!i._getGroupedRowModel?i.getPreGroupedRowModel():i._getGroupedRowModel())},createRow:(i,u)=>{i.getIsGrouped=()=>!!i.groupingColumnId,i.getGroupingValue=r=>{if(i._groupingValuesCache.hasOwnProperty(r))return i._groupingValuesCache[r];const l=u.getColumn(r);return l!=null&&l.columnDef.getGroupingValue?(i._groupingValuesCache[r]=l.columnDef.getGroupingValue(i.original),i._groupingValuesCache[r]):i.getValue(r)},i._groupingValuesCache={}},createCell:(i,u,r,l)=>{i.getIsGrouped=()=>u.getIsGrouped()&&u.id===r.groupingColumnId,i.getIsPlaceholder=()=>!i.getIsGrouped()&&u.getIsGrouped(),i.getIsAggregated=()=>{var n;return!i.getIsGrouped()&&!i.getIsPlaceholder()&&!!((n=r.subRows)!=null&&n.length)}}};function Ta(i,u,r){if(!(u!=null&&u.length)||!r)return i;const l=i.filter(s=>!u.includes(s.id));return r==="remove"?l:[...u.map(s=>i.find(c=>c.id===s)).filter(Boolean),...l]}const Ea={getInitialState:i=>({columnOrder:[],...i}),getDefaultOptions:i=>({onColumnOrderChange:ft("columnOrder",i)}),createColumn:(i,u)=>{i.getIndex=I(r=>[xe(u,r)],r=>r.findIndex(l=>l.id===i.id),z(u.options,"debugColumns")),i.getIsFirstColumn=r=>{var l;return((l=xe(u,r)[0])==null?void 0:l.id)===i.id},i.getIsLastColumn=r=>{var l;const n=xe(u,r);return((l=n[n.length-1])==null?void 0:l.id)===i.id}},createTable:i=>{i.setColumnOrder=u=>i.options.onColumnOrderChange==null?void 0:i.options.onColumnOrderChange(u),i.resetColumnOrder=u=>{var r;i.setColumnOrder(u?[]:(r=i.initialState.columnOrder)!=null?r:[])},i._getOrderColumnsFn=I(()=>[i.getState().columnOrder,i.getState().grouping,i.options.groupedColumnMode],(u,r,l)=>n=>{let s=[];if(!(u!=null&&u.length))s=n;else{const c=[...u],f=[...n];for(;f.length&&c.length;){const p=c.shift(),g=f.findIndex(m=>m.id===p);g>-1&&s.push(f.splice(g,1)[0])}s=[...s,...f]}return Ta(s,r,l)},z(i.options,"debugTable"))}},Fi=()=>({left:[],right:[]}),ka={getInitialState:i=>({columnPinning:Fi(),...i}),getDefaultOptions:i=>({onColumnPinningChange:ft("columnPinning",i)}),createColumn:(i,u)=>{i.pin=r=>{const l=i.getLeafColumns().map(n=>n.id).filter(Boolean);u.setColumnPinning(n=>{var s,c;if(r==="right"){var f,p;return{left:((f=n==null?void 0:n.left)!=null?f:[]).filter(w=>!(l!=null&&l.includes(w))),right:[...((p=n==null?void 0:n.right)!=null?p:[]).filter(w=>!(l!=null&&l.includes(w))),...l]}}if(r==="left"){var g,m;return{left:[...((g=n==null?void 0:n.left)!=null?g:[]).filter(w=>!(l!=null&&l.includes(w))),...l],right:((m=n==null?void 0:n.right)!=null?m:[]).filter(w=>!(l!=null&&l.includes(w)))}}return{left:((s=n==null?void 0:n.left)!=null?s:[]).filter(w=>!(l!=null&&l.includes(w))),right:((c=n==null?void 0:n.right)!=null?c:[]).filter(w=>!(l!=null&&l.includes(w)))}})},i.getCanPin=()=>i.getLeafColumns().some(l=>{var n,s,c;return((n=l.columnDef.enablePinning)!=null?n:!0)&&((s=(c=u.options.enableColumnPinning)!=null?c:u.options.enablePinning)!=null?s:!0)}),i.getIsPinned=()=>{const r=i.getLeafColumns().map(f=>f.id),{left:l,right:n}=u.getState().columnPinning,s=r.some(f=>l==null?void 0:l.includes(f)),c=r.some(f=>n==null?void 0:n.includes(f));return s?"left":c?"right":!1},i.getPinnedIndex=()=>{var r,l;const n=i.getIsPinned();return n?(r=(l=u.getState().columnPinning)==null||(l=l[n])==null?void 0:l.indexOf(i.id))!=null?r:-1:0}},createRow:(i,u)=>{i.getCenterVisibleCells=I(()=>[i._getAllVisibleCells(),u.getState().columnPinning.left,u.getState().columnPinning.right],(r,l,n)=>{const s=[...l??[],...n??[]];return r.filter(c=>!s.includes(c.column.id))},z(u.options,"debugRows")),i.getLeftVisibleCells=I(()=>[i._getAllVisibleCells(),u.getState().columnPinning.left],(r,l)=>(l??[]).map(s=>r.find(c=>c.column.id===s)).filter(Boolean).map(s=>({...s,position:"left"})),z(u.options,"debugRows")),i.getRightVisibleCells=I(()=>[i._getAllVisibleCells(),u.getState().columnPinning.right],(r,l)=>(l??[]).map(s=>r.find(c=>c.column.id===s)).filter(Boolean).map(s=>({...s,position:"right"})),z(u.options,"debugRows"))},createTable:i=>{i.setColumnPinning=u=>i.options.onColumnPinningChange==null?void 0:i.options.onColumnPinningChange(u),i.resetColumnPinning=u=>{var r,l;return i.setColumnPinning(u?Fi():(r=(l=i.initialState)==null?void 0:l.columnPinning)!=null?r:Fi())},i.getIsSomeColumnsPinned=u=>{var r;const l=i.getState().columnPinning;if(!u){var n,s;return!!((n=l.left)!=null&&n.length||(s=l.right)!=null&&s.length)}return!!((r=l[u])!=null&&r.length)},i.getLeftLeafColumns=I(()=>[i.getAllLeafColumns(),i.getState().columnPinning.left],(u,r)=>(r??[]).map(l=>u.find(n=>n.id===l)).filter(Boolean),z(i.options,"debugColumns")),i.getRightLeafColumns=I(()=>[i.getAllLeafColumns(),i.getState().columnPinning.right],(u,r)=>(r??[]).map(l=>u.find(n=>n.id===l)).filter(Boolean),z(i.options,"debugColumns")),i.getCenterLeafColumns=I(()=>[i.getAllLeafColumns(),i.getState().columnPinning.left,i.getState().columnPinning.right],(u,r,l)=>{const n=[...r??[],...l??[]];return u.filter(s=>!n.includes(s.id))},z(i.options,"debugColumns"))}};function Da(i){return i||(typeof document<"u"?document:null)}const Ue={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},Bi=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),Ra={getDefaultColumnDef:()=>Ue,getInitialState:i=>({columnSizing:{},columnSizingInfo:Bi(),...i}),getDefaultOptions:i=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:ft("columnSizing",i),onColumnSizingInfoChange:ft("columnSizingInfo",i)}),createColumn:(i,u)=>{i.getSize=()=>{var r,l,n;const s=u.getState().columnSizing[i.id];return Math.min(Math.max((r=i.columnDef.minSize)!=null?r:Ue.minSize,(l=s??i.columnDef.size)!=null?l:Ue.size),(n=i.columnDef.maxSize)!=null?n:Ue.maxSize)},i.getStart=I(r=>[r,xe(u,r),u.getState().columnSizing],(r,l)=>l.slice(0,i.getIndex(r)).reduce((n,s)=>n+s.getSize(),0),z(u.options,"debugColumns")),i.getAfter=I(r=>[r,xe(u,r),u.getState().columnSizing],(r,l)=>l.slice(i.getIndex(r)+1).reduce((n,s)=>n+s.getSize(),0),z(u.options,"debugColumns")),i.resetSize=()=>{u.setColumnSizing(r=>{let{[i.id]:l,...n}=r;return n})},i.getCanResize=()=>{var r,l;return((r=i.columnDef.enableResizing)!=null?r:!0)&&((l=u.options.enableColumnResizing)!=null?l:!0)},i.getIsResizing=()=>u.getState().columnSizingInfo.isResizingColumn===i.id},createHeader:(i,u)=>{i.getSize=()=>{let r=0;const l=n=>{if(n.subHeaders.length)n.subHeaders.forEach(l);else{var s;r+=(s=n.column.getSize())!=null?s:0}};return l(i),r},i.getStart=()=>{if(i.index>0){const r=i.headerGroup.headers[i.index-1];return r.getStart()+r.getSize()}return 0},i.getResizeHandler=r=>{const l=u.getColumn(i.column.id),n=l==null?void 0:l.getCanResize();return s=>{if(!l||!n||(s.persist==null||s.persist(),Hi(s)&&s.touches&&s.touches.length>1))return;const c=i.getSize(),f=i?i.getLeafHeaders().map(E=>[E.column.id,E.column.getSize()]):[[l.id,l.getSize()]],p=Hi(s)?Math.round(s.touches[0].clientX):s.clientX,g={},m=(E,V)=>{typeof V=="number"&&(u.setColumnSizingInfo(D=>{var J,Y;const Rt=u.options.columnResizeDirection==="rtl"?-1:1,Bt=(V-((J=D==null?void 0:D.startOffset)!=null?J:0))*Rt,Ht=Math.max(Bt/((Y=D==null?void 0:D.startSize)!=null?Y:0),-.999999);return D.columnSizingStart.forEach(Zt=>{let[Wt,nt]=Zt;g[Wt]=Math.round(Math.max(nt+nt*Ht,0)*100)/100}),{...D,deltaOffset:Bt,deltaPercentage:Ht}}),(u.options.columnResizeMode==="onChange"||E==="end")&&u.setColumnSizing(D=>({...D,...g})))},w=E=>m("move",E),x=E=>{m("end",E),u.setColumnSizingInfo(V=>({...V,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},P=Da(r),M={moveHandler:E=>w(E.clientX),upHandler:E=>{P==null||P.removeEventListener("mousemove",M.moveHandler),P==null||P.removeEventListener("mouseup",M.upHandler),x(E.clientX)}},S={moveHandler:E=>(E.cancelable&&(E.preventDefault(),E.stopPropagation()),w(E.touches[0].clientX),!1),upHandler:E=>{var V;P==null||P.removeEventListener("touchmove",S.moveHandler),P==null||P.removeEventListener("touchend",S.upHandler),E.cancelable&&(E.preventDefault(),E.stopPropagation()),x((V=E.touches[0])==null?void 0:V.clientX)}},O=Oa()?{passive:!1}:!1;Hi(s)?(P==null||P.addEventListener("touchmove",S.moveHandler,O),P==null||P.addEventListener("touchend",S.upHandler,O)):(P==null||P.addEventListener("mousemove",M.moveHandler,O),P==null||P.addEventListener("mouseup",M.upHandler,O)),u.setColumnSizingInfo(E=>({...E,startOffset:p,startSize:c,deltaOffset:0,deltaPercentage:0,columnSizingStart:f,isResizingColumn:l.id}))}}},createTable:i=>{i.setColumnSizing=u=>i.options.onColumnSizingChange==null?void 0:i.options.onColumnSizingChange(u),i.setColumnSizingInfo=u=>i.options.onColumnSizingInfoChange==null?void 0:i.options.onColumnSizingInfoChange(u),i.resetColumnSizing=u=>{var r;i.setColumnSizing(u?{}:(r=i.initialState.columnSizing)!=null?r:{})},i.resetHeaderSizeInfo=u=>{var r;i.setColumnSizingInfo(u?Bi():(r=i.initialState.columnSizingInfo)!=null?r:Bi())},i.getTotalSize=()=>{var u,r;return(u=(r=i.getHeaderGroups()[0])==null?void 0:r.headers.reduce((l,n)=>l+n.getSize(),0))!=null?u:0},i.getLeftTotalSize=()=>{var u,r;return(u=(r=i.getLeftHeaderGroups()[0])==null?void 0:r.headers.reduce((l,n)=>l+n.getSize(),0))!=null?u:0},i.getCenterTotalSize=()=>{var u,r;return(u=(r=i.getCenterHeaderGroups()[0])==null?void 0:r.headers.reduce((l,n)=>l+n.getSize(),0))!=null?u:0},i.getRightTotalSize=()=>{var u,r;return(u=(r=i.getRightHeaderGroups()[0])==null?void 0:r.headers.reduce((l,n)=>l+n.getSize(),0))!=null?u:0}}};let je=null;function Oa(){if(typeof je=="boolean")return je;let i=!1;try{const u={get passive(){return i=!0,!1}},r=()=>{};window.addEventListener("test",r,u),window.removeEventListener("test",r)}catch{i=!1}return je=i,je}function Hi(i){return i.type==="touchstart"}const Ia={getInitialState:i=>({columnVisibility:{},...i}),getDefaultOptions:i=>({onColumnVisibilityChange:ft("columnVisibility",i)}),createColumn:(i,u)=>{i.toggleVisibility=r=>{i.getCanHide()&&u.setColumnVisibility(l=>({...l,[i.id]:r??!i.getIsVisible()}))},i.getIsVisible=()=>{var r,l;const n=i.columns;return(r=n.length?n.some(s=>s.getIsVisible()):(l=u.getState().columnVisibility)==null?void 0:l[i.id])!=null?r:!0},i.getCanHide=()=>{var r,l;return((r=i.columnDef.enableHiding)!=null?r:!0)&&((l=u.options.enableHiding)!=null?l:!0)},i.getToggleVisibilityHandler=()=>r=>{i.toggleVisibility==null||i.toggleVisibility(r.target.checked)}},createRow:(i,u)=>{i._getAllVisibleCells=I(()=>[i.getAllCells(),u.getState().columnVisibility],r=>r.filter(l=>l.column.getIsVisible()),z(u.options,"debugRows")),i.getVisibleCells=I(()=>[i.getLeftVisibleCells(),i.getCenterVisibleCells(),i.getRightVisibleCells()],(r,l,n)=>[...r,...l,...n],z(u.options,"debugRows"))},createTable:i=>{const u=(r,l)=>I(()=>[l(),l().filter(n=>n.getIsVisible()).map(n=>n.id).join("_")],n=>n.filter(s=>s.getIsVisible==null?void 0:s.getIsVisible()),z(i.options,"debugColumns"));i.getVisibleFlatColumns=u("getVisibleFlatColumns",()=>i.getAllFlatColumns()),i.getVisibleLeafColumns=u("getVisibleLeafColumns",()=>i.getAllLeafColumns()),i.getLeftVisibleLeafColumns=u("getLeftVisibleLeafColumns",()=>i.getLeftLeafColumns()),i.getRightVisibleLeafColumns=u("getRightVisibleLeafColumns",()=>i.getRightLeafColumns()),i.getCenterVisibleLeafColumns=u("getCenterVisibleLeafColumns",()=>i.getCenterLeafColumns()),i.setColumnVisibility=r=>i.options.onColumnVisibilityChange==null?void 0:i.options.onColumnVisibilityChange(r),i.resetColumnVisibility=r=>{var l;i.setColumnVisibility(r?{}:(l=i.initialState.columnVisibility)!=null?l:{})},i.toggleAllColumnsVisible=r=>{var l;r=(l=r)!=null?l:!i.getIsAllColumnsVisible(),i.setColumnVisibility(i.getAllLeafColumns().reduce((n,s)=>({...n,[s.id]:r||!(s.getCanHide!=null&&s.getCanHide())}),{}))},i.getIsAllColumnsVisible=()=>!i.getAllLeafColumns().some(r=>!(r.getIsVisible!=null&&r.getIsVisible())),i.getIsSomeColumnsVisible=()=>i.getAllLeafColumns().some(r=>r.getIsVisible==null?void 0:r.getIsVisible()),i.getToggleAllColumnsVisibilityHandler=()=>r=>{var l;i.toggleAllColumnsVisible((l=r.target)==null?void 0:l.checked)}}};function xe(i,u){return u?u==="center"?i.getCenterVisibleLeafColumns():u==="left"?i.getLeftVisibleLeafColumns():i.getRightVisibleLeafColumns():i.getVisibleLeafColumns()}const za={createTable:i=>{i._getGlobalFacetedRowModel=i.options.getFacetedRowModel&&i.options.getFacetedRowModel(i,"__global__"),i.getGlobalFacetedRowModel=()=>i.options.manualFiltering||!i._getGlobalFacetedRowModel?i.getPreFilteredRowModel():i._getGlobalFacetedRowModel(),i._getGlobalFacetedUniqueValues=i.options.getFacetedUniqueValues&&i.options.getFacetedUniqueValues(i,"__global__"),i.getGlobalFacetedUniqueValues=()=>i._getGlobalFacetedUniqueValues?i._getGlobalFacetedUniqueValues():new Map,i._getGlobalFacetedMinMaxValues=i.options.getFacetedMinMaxValues&&i.options.getFacetedMinMaxValues(i,"__global__"),i.getGlobalFacetedMinMaxValues=()=>{if(i._getGlobalFacetedMinMaxValues)return i._getGlobalFacetedMinMaxValues()}}},Aa={getInitialState:i=>({globalFilter:void 0,...i}),getDefaultOptions:i=>({onGlobalFilterChange:ft("globalFilter",i),globalFilterFn:"auto",getColumnCanGlobalFilter:u=>{var r;const l=(r=i.getCoreRowModel().flatRows[0])==null||(r=r._getAllCellsByColumnId()[u.id])==null?void 0:r.getValue();return typeof l=="string"||typeof l=="number"}}),createColumn:(i,u)=>{i.getCanGlobalFilter=()=>{var r,l,n,s;return((r=i.columnDef.enableGlobalFilter)!=null?r:!0)&&((l=u.options.enableGlobalFilter)!=null?l:!0)&&((n=u.options.enableFilters)!=null?n:!0)&&((s=u.options.getColumnCanGlobalFilter==null?void 0:u.options.getColumnCanGlobalFilter(i))!=null?s:!0)&&!!i.accessorFn}},createTable:i=>{i.getGlobalAutoFilterFn=()=>Dt.includesString,i.getGlobalFilterFn=()=>{var u,r;const{globalFilterFn:l}=i.options;return Ke(l)?l:l==="auto"?i.getGlobalAutoFilterFn():(u=(r=i.options.filterFns)==null?void 0:r[l])!=null?u:Dt[l]},i.setGlobalFilter=u=>{i.options.onGlobalFilterChange==null||i.options.onGlobalFilterChange(u)},i.resetGlobalFilter=u=>{i.setGlobalFilter(u?void 0:i.initialState.globalFilter)}}},Fa={getInitialState:i=>({expanded:{},...i}),getDefaultOptions:i=>({onExpandedChange:ft("expanded",i),paginateExpandedRows:!0}),createTable:i=>{let u=!1,r=!1;i._autoResetExpanded=()=>{var l,n;if(!u){i._queue(()=>{u=!0});return}if((l=(n=i.options.autoResetAll)!=null?n:i.options.autoResetExpanded)!=null?l:!i.options.manualExpanding){if(r)return;r=!0,i._queue(()=>{i.resetExpanded(),r=!1})}},i.setExpanded=l=>i.options.onExpandedChange==null?void 0:i.options.onExpandedChange(l),i.toggleAllRowsExpanded=l=>{l??!i.getIsAllRowsExpanded()?i.setExpanded(!0):i.setExpanded({})},i.resetExpanded=l=>{var n,s;i.setExpanded(l?{}:(n=(s=i.initialState)==null?void 0:s.expanded)!=null?n:{})},i.getCanSomeRowsExpand=()=>i.getPrePaginationRowModel().flatRows.some(l=>l.getCanExpand()),i.getToggleAllRowsExpandedHandler=()=>l=>{l.persist==null||l.persist(),i.toggleAllRowsExpanded()},i.getIsSomeRowsExpanded=()=>{const l=i.getState().expanded;return l===!0||Object.values(l).some(Boolean)},i.getIsAllRowsExpanded=()=>{const l=i.getState().expanded;return typeof l=="boolean"?l===!0:!(!Object.keys(l).length||i.getRowModel().flatRows.some(n=>!n.getIsExpanded()))},i.getExpandedDepth=()=>{let l=0;return(i.getState().expanded===!0?Object.keys(i.getRowModel().rowsById):Object.keys(i.getState().expanded)).forEach(s=>{const c=s.split(".");l=Math.max(l,c.length)}),l},i.getPreExpandedRowModel=()=>i.getSortedRowModel(),i.getExpandedRowModel=()=>(!i._getExpandedRowModel&&i.options.getExpandedRowModel&&(i._getExpandedRowModel=i.options.getExpandedRowModel(i)),i.options.manualExpanding||!i._getExpandedRowModel?i.getPreExpandedRowModel():i._getExpandedRowModel())},createRow:(i,u)=>{i.toggleExpanded=r=>{u.setExpanded(l=>{var n;const s=l===!0?!0:!!(l!=null&&l[i.id]);let c={};if(l===!0?Object.keys(u.getRowModel().rowsById).forEach(f=>{c[f]=!0}):c=l,r=(n=r)!=null?n:!s,!s&&r)return{...c,[i.id]:!0};if(s&&!r){const{[i.id]:f,...p}=c;return p}return l})},i.getIsExpanded=()=>{var r;const l=u.getState().expanded;return!!((r=u.options.getIsRowExpanded==null?void 0:u.options.getIsRowExpanded(i))!=null?r:l===!0||l!=null&&l[i.id])},i.getCanExpand=()=>{var r,l,n;return(r=u.options.getRowCanExpand==null?void 0:u.options.getRowCanExpand(i))!=null?r:((l=u.options.enableExpanding)!=null?l:!0)&&!!((n=i.subRows)!=null&&n.length)},i.getIsAllParentsExpanded=()=>{let r=!0,l=i;for(;r&&l.parentId;)l=u.getRow(l.parentId,!0),r=l.getIsExpanded();return r},i.getToggleExpandedHandler=()=>{const r=i.getCanExpand();return()=>{r&&i.toggleExpanded()}}}},$i=0,Ui=10,Zi=()=>({pageIndex:$i,pageSize:Ui}),Ba={getInitialState:i=>({...i,pagination:{...Zi(),...i==null?void 0:i.pagination}}),getDefaultOptions:i=>({onPaginationChange:ft("pagination",i)}),createTable:i=>{let u=!1,r=!1;i._autoResetPageIndex=()=>{var l,n;if(!u){i._queue(()=>{u=!0});return}if((l=(n=i.options.autoResetAll)!=null?n:i.options.autoResetPageIndex)!=null?l:!i.options.manualPagination){if(r)return;r=!0,i._queue(()=>{i.resetPageIndex(),r=!1})}},i.setPagination=l=>{const n=s=>At(l,s);return i.options.onPaginationChange==null?void 0:i.options.onPaginationChange(n)},i.resetPagination=l=>{var n;i.setPagination(l?Zi():(n=i.initialState.pagination)!=null?n:Zi())},i.setPageIndex=l=>{i.setPagination(n=>{let s=At(l,n.pageIndex);const c=typeof i.options.pageCount>"u"||i.options.pageCount===-1?Number.MAX_SAFE_INTEGER:i.options.pageCount-1;return s=Math.max(0,Math.min(s,c)),{...n,pageIndex:s}})},i.resetPageIndex=l=>{var n,s;i.setPageIndex(l?$i:(n=(s=i.initialState)==null||(s=s.pagination)==null?void 0:s.pageIndex)!=null?n:$i)},i.resetPageSize=l=>{var n,s;i.setPageSize(l?Ui:(n=(s=i.initialState)==null||(s=s.pagination)==null?void 0:s.pageSize)!=null?n:Ui)},i.setPageSize=l=>{i.setPagination(n=>{const s=Math.max(1,At(l,n.pageSize)),c=n.pageSize*n.pageIndex,f=Math.floor(c/s);return{...n,pageIndex:f,pageSize:s}})},i.setPageCount=l=>i.setPagination(n=>{var s;let c=At(l,(s=i.options.pageCount)!=null?s:-1);return typeof c=="number"&&(c=Math.max(-1,c)),{...n,pageCount:c}}),i.getPageOptions=I(()=>[i.getPageCount()],l=>{let n=[];return l&&l>0&&(n=[...new Array(l)].fill(null).map((s,c)=>c)),n},z(i.options,"debugTable")),i.getCanPreviousPage=()=>i.getState().pagination.pageIndex>0,i.getCanNextPage=()=>{const{pageIndex:l}=i.getState().pagination,n=i.getPageCount();return n===-1?!0:n===0?!1:l<n-1},i.previousPage=()=>i.setPageIndex(l=>l-1),i.nextPage=()=>i.setPageIndex(l=>l+1),i.firstPage=()=>i.setPageIndex(0),i.lastPage=()=>i.setPageIndex(i.getPageCount()-1),i.getPrePaginationRowModel=()=>i.getExpandedRowModel(),i.getPaginationRowModel=()=>(!i._getPaginationRowModel&&i.options.getPaginationRowModel&&(i._getPaginationRowModel=i.options.getPaginationRowModel(i)),i.options.manualPagination||!i._getPaginationRowModel?i.getPrePaginationRowModel():i._getPaginationRowModel()),i.getPageCount=()=>{var l;return(l=i.options.pageCount)!=null?l:Math.ceil(i.getRowCount()/i.getState().pagination.pageSize)},i.getRowCount=()=>{var l;return(l=i.options.rowCount)!=null?l:i.getPrePaginationRowModel().rows.length}}},Ni=()=>({top:[],bottom:[]}),Ha={getInitialState:i=>({rowPinning:Ni(),...i}),getDefaultOptions:i=>({onRowPinningChange:ft("rowPinning",i)}),createRow:(i,u)=>{i.pin=(r,l,n)=>{const s=l?i.getLeafRows().map(p=>{let{id:g}=p;return g}):[],c=n?i.getParentRows().map(p=>{let{id:g}=p;return g}):[],f=new Set([...c,i.id,...s]);u.setRowPinning(p=>{var g,m;if(r==="bottom"){var w,x;return{top:((w=p==null?void 0:p.top)!=null?w:[]).filter(S=>!(f!=null&&f.has(S))),bottom:[...((x=p==null?void 0:p.bottom)!=null?x:[]).filter(S=>!(f!=null&&f.has(S))),...Array.from(f)]}}if(r==="top"){var P,M;return{top:[...((P=p==null?void 0:p.top)!=null?P:[]).filter(S=>!(f!=null&&f.has(S))),...Array.from(f)],bottom:((M=p==null?void 0:p.bottom)!=null?M:[]).filter(S=>!(f!=null&&f.has(S)))}}return{top:((g=p==null?void 0:p.top)!=null?g:[]).filter(S=>!(f!=null&&f.has(S))),bottom:((m=p==null?void 0:p.bottom)!=null?m:[]).filter(S=>!(f!=null&&f.has(S)))}})},i.getCanPin=()=>{var r;const{enableRowPinning:l,enablePinning:n}=u.options;return typeof l=="function"?l(i):(r=l??n)!=null?r:!0},i.getIsPinned=()=>{const r=[i.id],{top:l,bottom:n}=u.getState().rowPinning,s=r.some(f=>l==null?void 0:l.includes(f)),c=r.some(f=>n==null?void 0:n.includes(f));return s?"top":c?"bottom":!1},i.getPinnedIndex=()=>{var r,l;const n=i.getIsPinned();if(!n)return-1;const s=(r=n==="top"?u.getTopRows():u.getBottomRows())==null?void 0:r.map(c=>{let{id:f}=c;return f});return(l=s==null?void 0:s.indexOf(i.id))!=null?l:-1}},createTable:i=>{i.setRowPinning=u=>i.options.onRowPinningChange==null?void 0:i.options.onRowPinningChange(u),i.resetRowPinning=u=>{var r,l;return i.setRowPinning(u?Ni():(r=(l=i.initialState)==null?void 0:l.rowPinning)!=null?r:Ni())},i.getIsSomeRowsPinned=u=>{var r;const l=i.getState().rowPinning;if(!u){var n,s;return!!((n=l.top)!=null&&n.length||(s=l.bottom)!=null&&s.length)}return!!((r=l[u])!=null&&r.length)},i._getPinnedRows=(u,r,l)=>{var n;return((n=i.options.keepPinnedRows)==null||n?(r??[]).map(c=>{const f=i.getRow(c,!0);return f.getIsAllParentsExpanded()?f:null}):(r??[]).map(c=>u.find(f=>f.id===c))).filter(Boolean).map(c=>({...c,position:l}))},i.getTopRows=I(()=>[i.getRowModel().rows,i.getState().rowPinning.top],(u,r)=>i._getPinnedRows(u,r,"top"),z(i.options,"debugRows")),i.getBottomRows=I(()=>[i.getRowModel().rows,i.getState().rowPinning.bottom],(u,r)=>i._getPinnedRows(u,r,"bottom"),z(i.options,"debugRows")),i.getCenterRows=I(()=>[i.getRowModel().rows,i.getState().rowPinning.top,i.getState().rowPinning.bottom],(u,r,l)=>{const n=new Set([...r??[],...l??[]]);return u.filter(s=>!n.has(s.id))},z(i.options,"debugRows"))}},Za={getInitialState:i=>({rowSelection:{},...i}),getDefaultOptions:i=>({onRowSelectionChange:ft("rowSelection",i),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:i=>{i.setRowSelection=u=>i.options.onRowSelectionChange==null?void 0:i.options.onRowSelectionChange(u),i.resetRowSelection=u=>{var r;return i.setRowSelection(u?{}:(r=i.initialState.rowSelection)!=null?r:{})},i.toggleAllRowsSelected=u=>{i.setRowSelection(r=>{u=typeof u<"u"?u:!i.getIsAllRowsSelected();const l={...r},n=i.getPreGroupedRowModel().flatRows;return u?n.forEach(s=>{s.getCanSelect()&&(l[s.id]=!0)}):n.forEach(s=>{delete l[s.id]}),l})},i.toggleAllPageRowsSelected=u=>i.setRowSelection(r=>{const l=typeof u<"u"?u:!i.getIsAllPageRowsSelected(),n={...r};return i.getRowModel().rows.forEach(s=>{ji(n,s.id,l,!0,i)}),n}),i.getPreSelectedRowModel=()=>i.getCoreRowModel(),i.getSelectedRowModel=I(()=>[i.getState().rowSelection,i.getCoreRowModel()],(u,r)=>Object.keys(u).length?Gi(i,r):{rows:[],flatRows:[],rowsById:{}},z(i.options,"debugTable")),i.getFilteredSelectedRowModel=I(()=>[i.getState().rowSelection,i.getFilteredRowModel()],(u,r)=>Object.keys(u).length?Gi(i,r):{rows:[],flatRows:[],rowsById:{}},z(i.options,"debugTable")),i.getGroupedSelectedRowModel=I(()=>[i.getState().rowSelection,i.getSortedRowModel()],(u,r)=>Object.keys(u).length?Gi(i,r):{rows:[],flatRows:[],rowsById:{}},z(i.options,"debugTable")),i.getIsAllRowsSelected=()=>{const u=i.getFilteredRowModel().flatRows,{rowSelection:r}=i.getState();let l=!!(u.length&&Object.keys(r).length);return l&&u.some(n=>n.getCanSelect()&&!r[n.id])&&(l=!1),l},i.getIsAllPageRowsSelected=()=>{const u=i.getPaginationRowModel().flatRows.filter(n=>n.getCanSelect()),{rowSelection:r}=i.getState();let l=!!u.length;return l&&u.some(n=>!r[n.id])&&(l=!1),l},i.getIsSomeRowsSelected=()=>{var u;const r=Object.keys((u=i.getState().rowSelection)!=null?u:{}).length;return r>0&&r<i.getFilteredRowModel().flatRows.length},i.getIsSomePageRowsSelected=()=>{const u=i.getPaginationRowModel().flatRows;return i.getIsAllPageRowsSelected()?!1:u.filter(r=>r.getCanSelect()).some(r=>r.getIsSelected()||r.getIsSomeSelected())},i.getToggleAllRowsSelectedHandler=()=>u=>{i.toggleAllRowsSelected(u.target.checked)},i.getToggleAllPageRowsSelectedHandler=()=>u=>{i.toggleAllPageRowsSelected(u.target.checked)}},createRow:(i,u)=>{i.toggleSelected=(r,l)=>{const n=i.getIsSelected();u.setRowSelection(s=>{var c;if(r=typeof r<"u"?r:!n,i.getCanSelect()&&n===r)return s;const f={...s};return ji(f,i.id,r,(c=l==null?void 0:l.selectChildren)!=null?c:!0,u),f})},i.getIsSelected=()=>{const{rowSelection:r}=u.getState();return Ji(i,r)},i.getIsSomeSelected=()=>{const{rowSelection:r}=u.getState();return Wi(i,r)==="some"},i.getIsAllSubRowsSelected=()=>{const{rowSelection:r}=u.getState();return Wi(i,r)==="all"},i.getCanSelect=()=>{var r;return typeof u.options.enableRowSelection=="function"?u.options.enableRowSelection(i):(r=u.options.enableRowSelection)!=null?r:!0},i.getCanSelectSubRows=()=>{var r;return typeof u.options.enableSubRowSelection=="function"?u.options.enableSubRowSelection(i):(r=u.options.enableSubRowSelection)!=null?r:!0},i.getCanMultiSelect=()=>{var r;return typeof u.options.enableMultiRowSelection=="function"?u.options.enableMultiRowSelection(i):(r=u.options.enableMultiRowSelection)!=null?r:!0},i.getToggleSelectedHandler=()=>{const r=i.getCanSelect();return l=>{var n;r&&i.toggleSelected((n=l.target)==null?void 0:n.checked)}}}},ji=(i,u,r,l,n)=>{var s;const c=n.getRow(u,!0);r?(c.getCanMultiSelect()||Object.keys(i).forEach(f=>delete i[f]),c.getCanSelect()&&(i[u]=!0)):delete i[u],l&&(s=c.subRows)!=null&&s.length&&c.getCanSelectSubRows()&&c.subRows.forEach(f=>ji(i,f.id,r,l,n))};function Gi(i,u){const r=i.getState().rowSelection,l=[],n={},s=function(c,f){return c.map(p=>{var g;const m=Ji(p,r);if(m&&(l.push(p),n[p.id]=p),(g=p.subRows)!=null&&g.length&&(p={...p,subRows:s(p.subRows)}),m)return p}).filter(Boolean)};return{rows:s(u.rows),flatRows:l,rowsById:n}}function Ji(i,u){var r;return(r=u[i.id])!=null?r:!1}function Wi(i,u,r){var l;if(!((l=i.subRows)!=null&&l.length))return!1;let n=!0,s=!1;return i.subRows.forEach(c=>{if(!(s&&!n)&&(c.getCanSelect()&&(Ji(c,u)?s=!0:n=!1),c.subRows&&c.subRows.length)){const f=Wi(c,u);f==="all"?s=!0:(f==="some"&&(s=!0),n=!1)}}),n?"all":s?"some":!1}const qi=/([0-9]+)/gm,Na=(i,u,r)=>Yo(Ft(i.getValue(r)).toLowerCase(),Ft(u.getValue(r)).toLowerCase()),Ga=(i,u,r)=>Yo(Ft(i.getValue(r)),Ft(u.getValue(r))),Va=(i,u,r)=>Qi(Ft(i.getValue(r)).toLowerCase(),Ft(u.getValue(r)).toLowerCase()),$a=(i,u,r)=>Qi(Ft(i.getValue(r)),Ft(u.getValue(r))),Ua=(i,u,r)=>{const l=i.getValue(r),n=u.getValue(r);return l>n?1:l<n?-1:0},ja=(i,u,r)=>Qi(i.getValue(r),u.getValue(r));function Qi(i,u){return i===u?0:i>u?1:-1}function Ft(i){return typeof i=="number"?isNaN(i)||i===1/0||i===-1/0?"":String(i):typeof i=="string"?i:""}function Yo(i,u){const r=i.split(qi).filter(Boolean),l=u.split(qi).filter(Boolean);for(;r.length&&l.length;){const n=r.shift(),s=l.shift(),c=parseInt(n,10),f=parseInt(s,10),p=[c,f].sort();if(isNaN(p[0])){if(n>s)return 1;if(s>n)return-1;continue}if(isNaN(p[1]))return isNaN(c)?-1:1;if(c>f)return 1;if(f>c)return-1}return r.length-l.length}const ye={alphanumeric:Na,alphanumericCaseSensitive:Ga,text:Va,textCaseSensitive:$a,datetime:Ua,basic:ja},Wa={getInitialState:i=>({sorting:[],...i}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:i=>({onSortingChange:ft("sorting",i),isMultiSortEvent:u=>u.shiftKey}),createColumn:(i,u)=>{i.getAutoSortingFn=()=>{const r=u.getFilteredRowModel().flatRows.slice(10);let l=!1;for(const n of r){const s=n==null?void 0:n.getValue(i.id);if(Object.prototype.toString.call(s)==="[object Date]")return ye.datetime;if(typeof s=="string"&&(l=!0,s.split(qi).length>1))return ye.alphanumeric}return l?ye.text:ye.basic},i.getAutoSortDir=()=>{const r=u.getFilteredRowModel().flatRows[0];return typeof(r==null?void 0:r.getValue(i.id))=="string"?"asc":"desc"},i.getSortingFn=()=>{var r,l;if(!i)throw new Error;return Ke(i.columnDef.sortingFn)?i.columnDef.sortingFn:i.columnDef.sortingFn==="auto"?i.getAutoSortingFn():(r=(l=u.options.sortingFns)==null?void 0:l[i.columnDef.sortingFn])!=null?r:ye[i.columnDef.sortingFn]},i.toggleSorting=(r,l)=>{const n=i.getNextSortingOrder(),s=typeof r<"u"&&r!==null;u.setSorting(c=>{const f=c==null?void 0:c.find(P=>P.id===i.id),p=c==null?void 0:c.findIndex(P=>P.id===i.id);let g=[],m,w=s?r:n==="desc";if(c!=null&&c.length&&i.getCanMultiSort()&&l?f?m="toggle":m="add":c!=null&&c.length&&p!==c.length-1?m="replace":f?m="toggle":m="replace",m==="toggle"&&(s||n||(m="remove")),m==="add"){var x;g=[...c,{id:i.id,desc:w}],g.splice(0,g.length-((x=u.options.maxMultiSortColCount)!=null?x:Number.MAX_SAFE_INTEGER))}else m==="toggle"?g=c.map(P=>P.id===i.id?{...P,desc:w}:P):m==="remove"?g=c.filter(P=>P.id!==i.id):g=[{id:i.id,desc:w}];return g})},i.getFirstSortDir=()=>{var r,l;return((r=(l=i.columnDef.sortDescFirst)!=null?l:u.options.sortDescFirst)!=null?r:i.getAutoSortDir()==="desc")?"desc":"asc"},i.getNextSortingOrder=r=>{var l,n;const s=i.getFirstSortDir(),c=i.getIsSorted();return c?c!==s&&((l=u.options.enableSortingRemoval)==null||l)&&(!(r&&(n=u.options.enableMultiRemove)!=null)||n)?!1:c==="desc"?"asc":"desc":s},i.getCanSort=()=>{var r,l;return((r=i.columnDef.enableSorting)!=null?r:!0)&&((l=u.options.enableSorting)!=null?l:!0)&&!!i.accessorFn},i.getCanMultiSort=()=>{var r,l;return(r=(l=i.columnDef.enableMultiSort)!=null?l:u.options.enableMultiSort)!=null?r:!!i.accessorFn},i.getIsSorted=()=>{var r;const l=(r=u.getState().sorting)==null?void 0:r.find(n=>n.id===i.id);return l?l.desc?"desc":"asc":!1},i.getSortIndex=()=>{var r,l;return(r=(l=u.getState().sorting)==null?void 0:l.findIndex(n=>n.id===i.id))!=null?r:-1},i.clearSorting=()=>{u.setSorting(r=>r!=null&&r.length?r.filter(l=>l.id!==i.id):[])},i.getToggleSortingHandler=()=>{const r=i.getCanSort();return l=>{r&&(l.persist==null||l.persist(),i.toggleSorting==null||i.toggleSorting(void 0,i.getCanMultiSort()?u.options.isMultiSortEvent==null?void 0:u.options.isMultiSortEvent(l):!1))}}},createTable:i=>{i.setSorting=u=>i.options.onSortingChange==null?void 0:i.options.onSortingChange(u),i.resetSorting=u=>{var r,l;i.setSorting(u?[]:(r=(l=i.initialState)==null?void 0:l.sorting)!=null?r:[])},i.getPreSortedRowModel=()=>i.getGroupedRowModel(),i.getSortedRowModel=()=>(!i._getSortedRowModel&&i.options.getSortedRowModel&&(i._getSortedRowModel=i.options.getSortedRowModel(i)),i.options.manualSorting||!i._getSortedRowModel?i.getPreSortedRowModel():i._getSortedRowModel())}},qa=[pa,Ia,Ea,ka,ga,ma,za,Aa,Wa,ba,Fa,Ba,Ha,Za,Ra];function Ya(i){var u,r;const l=[...qa,...(u=i._features)!=null?u:[]];let n={_features:l};const s=n._features.reduce((x,P)=>Object.assign(x,P.getDefaultOptions==null?void 0:P.getDefaultOptions(n)),{}),c=x=>n.options.mergeOptions?n.options.mergeOptions(s,x):{...s,...x};let p={...{},...(r=i.initialState)!=null?r:{}};n._features.forEach(x=>{var P;p=(P=x.getInitialState==null?void 0:x.getInitialState(p))!=null?P:p});const g=[];let m=!1;const w={_features:l,options:{...s,...i},initialState:p,_queue:x=>{g.push(x),m||(m=!0,Promise.resolve().then(()=>{for(;g.length;)g.shift()();m=!1}).catch(P=>setTimeout(()=>{throw P})))},reset:()=>{n.setState(n.initialState)},setOptions:x=>{const P=At(x,n.options);n.options=c(P)},getState:()=>n.options.state,setState:x=>{n.options.onStateChange==null||n.options.onStateChange(x)},_getRowId:(x,P,M)=>{var S;return(S=n.options.getRowId==null?void 0:n.options.getRowId(x,P,M))!=null?S:`${M?[M.id,P].join("."):P}`},getCoreRowModel:()=>(n._getCoreRowModel||(n._getCoreRowModel=n.options.getCoreRowModel(n)),n._getCoreRowModel()),getRowModel:()=>n.getPaginationRowModel(),getRow:(x,P)=>{let M=(P?n.getPrePaginationRowModel():n.getRowModel()).rowsById[x];if(!M&&(M=n.getCoreRowModel().rowsById[x],!M))throw new Error;return M},_getDefaultColumnDef:I(()=>[n.options.defaultColumn],x=>{var P;return x=(P=x)!=null?P:{},{header:M=>{const S=M.header.column.columnDef;return S.accessorKey?S.accessorKey:S.accessorFn?S.id:null},cell:M=>{var S,O;return(S=(O=M.renderValue())==null||O.toString==null?void 0:O.toString())!=null?S:null},...n._features.reduce((M,S)=>Object.assign(M,S.getDefaultColumnDef==null?void 0:S.getDefaultColumnDef()),{}),...x}},z(i,"debugColumns")),_getColumnDefs:()=>n.options.columns,getAllColumns:I(()=>[n._getColumnDefs()],x=>{const P=function(M,S,O){return O===void 0&&(O=0),M.map(E=>{const V=fa(n,E,O,S),D=E;return V.columns=D.columns?P(D.columns,V,O+1):[],V})};return P(x)},z(i,"debugColumns")),getAllFlatColumns:I(()=>[n.getAllColumns()],x=>x.flatMap(P=>P.getFlatColumns()),z(i,"debugColumns")),_getAllFlatColumnsById:I(()=>[n.getAllFlatColumns()],x=>x.reduce((P,M)=>(P[M.id]=M,P),{}),z(i,"debugColumns")),getAllLeafColumns:I(()=>[n.getAllColumns(),n._getOrderColumnsFn()],(x,P)=>{let M=x.flatMap(S=>S.getLeafColumns());return P(M)},z(i,"debugColumns")),getColumn:x=>n._getAllFlatColumnsById()[x]};Object.assign(n,w);for(let x=0;x<n._features.length;x++){const P=n._features[x];P==null||P.createTable==null||P.createTable(n)}return n}function Ka(){return i=>I(()=>[i.options.data],u=>{const r={rows:[],flatRows:[],rowsById:{}},l=function(n,s,c){s===void 0&&(s=0);const f=[];for(let g=0;g<n.length;g++){const m=_a(i,i._getRowId(n[g],g,c),n[g],g,s,void 0,c==null?void 0:c.id);if(r.flatRows.push(m),r.rowsById[m.id]=m,f.push(m),i.options.getSubRows){var p;m.originalSubRows=i.options.getSubRows(n[g],g),(p=m.originalSubRows)!=null&&p.length&&(m.subRows=l(m.originalSubRows,s+1,m))}}return f};return r.rows=l(u),r},z(i.options,"debugTable","getRowModel",()=>i._autoResetPageIndex()))}/**
   * react-table
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function ko(i,u){return i?Xa(i)?F.createElement(i,u):i:null}function Xa(i){return Ja(i)||typeof i=="function"||Qa(i)}function Ja(i){return typeof i=="function"&&(()=>{const u=Object.getPrototypeOf(i);return u.prototype&&u.prototype.isReactComponent})()}function Qa(i){return typeof i=="object"&&typeof i.$$typeof=="symbol"&&["react.memo","react.forward_ref"].includes(i.$$typeof.description)}function tl(i){const u={state:{},onStateChange:()=>{},renderFallbackValue:null,...i},[r]=F.useState(()=>({current:Ya(u)})),[l,n]=F.useState(()=>r.current.initialState);return r.current.setOptions(s=>({...s,...i,state:{...l,...i.state},onStateChange:c=>{n(c),i.onStateChange==null||i.onStateChange(c)}})),r.current}const el=[{sno:1,fieldname:"Amaravathi",geographical_area:"",created_at:"",status:"active",action:"spraying"},{sno:3,fieldname:"Amaravathi",geographical_area:"",created_at:"",status:"active",action:"spraying"},{sno:4,fieldname:"Amaravathi",geographical_area:"",created_at:"",status:"active",action:"spraying"}],il=[{header:"S NO",accessorKey:"sno"},{header:"Field Name",accessorKey:"fieldname"},{header:"Geographical Area",accessorKey:"geographical_area"},{header:"Status",accessorKey:"status"},{header:"Action",accessorKey:"action"}];function nl(){const i=tl({data:el,columns:il,getCoreRowModel:Ka()});return T.jsx("div",{children:T.jsxs("table",{className:"min-w-full",children:[T.jsx("thead",{children:i.getHeaderGroups().map(u=>T.jsx("tr",{children:u.headers.map(r=>T.jsx("th",{className:"border p-0.5 bg-gray-100 text-xs text-center",children:ko(r.column.columnDef.header,r.getContext())},r.id))},u.id))}),T.jsx("tbody",{children:i.getRowModel().rows.map(u=>T.jsx("tr",{children:u.getVisibleCells().map(r=>T.jsx("td",{className:"border p-0.5 text-center text-xs",style:{backgroundColor:"#ffff"},children:ko(r.column.columnDef.cell,r.getContext())},r.id))},u.id))})]})})}function ol({setField:i}){const[u,r]=F.useState([]),[l,n]=F.useState(null),[s,c]=F.useState(null),[f,p]=F.useState("idle"),[g,m]=F.useState(null);return T.jsxs("div",{children:[T.jsx(rl,{setField:i,formCoordinates:u,fieldAccessPoint:l,robotHome:s,setMode:p,locationInfo:g}),T.jsx(ua,{setFormCoordinates:r,setFieldAccessPoint:n,setRobotHome:c,mode:f,setMode:p,setLocationInfo:m})]})}function rl({setField:i,formCoordinates:u,fieldAccessPoint:r,robotHome:l,setMode:n,locationInfo:s}){const c=Ps({defaultValues:{type:"",field_name:"",farm:""},onSubmit:async({value:f})=>{const p={field_name:f.field_name,field_boundary:u,location:(s==null?void 0:s.location)||"",field_area:(s==null?void 0:s.area)||"",field_access_point:r,robot_home:l};console.log(p)}});return T.jsxs("div",{children:[T.jsx("form",{onSubmit:f=>{c.handleSubmit(f),f.preventDefault(),f.stopPropagation()},className:"h-125 w-78 shadow-2xl bg-white rounded-xl float-end",style:{backgroundColor:"#ffff"},children:T.jsxs("div",{className:"flex flex-col p-2 gap-2",children:[T.jsx("h1",{className:"text-sm font-semibold text-center mb-4",children:"Register Field"}),T.jsxs("div",{children:[T.jsx("label",{className:"text-[10px]",children:"Field Name"})," ",T.jsx("br",{}),T.jsx(c.Field,{name:"field_name",children:f=>T.jsx("input",{value:f.state.value,onChange:p=>f.handleChange(p.target.value),className:" bg-gray-100 rounded w-74 p-1.5 text-xs",required:!0})})]}),T.jsxs("div",{className:"flex justify-between text-[12px] mt-3 font-semibold",children:[T.jsx("span",{children:"Geographical Area"}),T.jsxs("span",{className:"rounded pl-2 pr-2 text-xs text-red-400 bg-red-200",children:[(s==null?void 0:s.area)||0,T.jsx("span",{className:"text-black",children:" Hectars"})]})]})," ",T.jsx("br",{}),T.jsxs("div",{className:"mb-2",children:[T.jsx("label",{className:"text-[10px]",children:"Field Access point"}),T.jsx("br",{}),T.jsx("button",{type:"button",style:{cursor:"pointer"},className:"rounded px-2 pt-1 pb-1 text-xs bg-green-200",onClick:()=>{n("field_access_point"),Cs.info("Click on the map to place Field Access Point",{position:"top-right",autoClose:2e3,style:{fontSize:"12px",color:"#065f46",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"}})},children:"+ Add"})]}),T.jsxs("div",{className:"mb-2",children:[T.jsx("label",{className:"text-[10px]",children:"Robot Home"}),T.jsx("br",{}),T.jsx("button",{type:"button",style:{cursor:"pointer"},className:"rounded px-2 pt-1 pb-1 text-xs bg-green-200",onClick:()=>{n("robot_home")},children:"+ Add"})]}),T.jsxs("div",{children:[T.jsx("label",{className:"text-[10px]",children:"obstacles"}),T.jsx("br",{}),T.jsx("button",{type:"button",style:{cursor:"pointer"},className:"rounded px-2 pt-1 pb-1 text-xs bg-green-200",children:"+ Add"})]}),T.jsxs("div",{children:[T.jsx("div",{className:"float-right mt-17 mr-3 rounded pl-3 pr-3 text-sm bg-green-400",children:T.jsx("button",{type:"submit",style:{cursor:"pointer"},children:"Save"})}),T.jsx("div",{className:"float-right mt-17 mr-3 border-1 rounded pl-2 pr-2 text-sm  ",children:T.jsx("button",{type:"button",onClick:()=>i(!1),style:{cursor:"pointer"},children:"Cancel"})})]})]})}),T.jsx(Ss,{})]})}const ul=function(){const[u,r]=F.useState(!1);return T.jsx("div",{children:u?T.jsx(ol,{setField:r}):T.jsxs(T.Fragment,{children:[T.jsx("button",{className:"bg-[#0ed78d] cursor-pointer px-2 py-0.5 rounded float-end mr-5 mb-1 text-xs",onClick:()=>{r(!0)},children:"+ Add Field"}),T.jsx(nl,{})]})})};export{ul as component};
